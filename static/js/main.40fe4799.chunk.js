(this["webpackJsonpmy-world"]=this["webpackJsonpmy-world"]||[]).push([[0],{100:function(e,r,t){},101:function(e,r,t){},128:function(e,r,t){},136:function(e,r,t){},137:function(e,r,t){},138:function(e,r,t){"use strict";t.r(r);var n=t(1),a=t.n(n),o=t(62),i=t.n(o),c=t(8);Object(c.b)({"accessNode.api":"https://access-testnet.onflow.org","discovery.wallet":"https://fcl-discovery.onflow.org/testnet/authn","0xFungibleToken":"0x9a0766d93b6608b7","0xFUSD":"0xe223d8a629e49c68","0xMyWorld":"0x510627df4617530f","0xMyMarketplace":"0x510627df4617530f"});t(95),t(96);var s=t(9),u=t(10),f=t(7),l=t(6),d=t.n(l),p=t(13),h=t(26),m=function(e,r){switch(r.type){case"PROCESSING":return Object(f.a)(Object(f.a)({},e),{},{loading:!0,error:!1});case"SUCCESS":return Object(f.a)(Object(f.a)({},e),{},{loading:!1,error:!1,data:r.payload});case"ADD":return Object(f.a)(Object(f.a)({},e),{},{data:[].concat(Object(h.a)(e.data),[r.payload])});case"ERROR":return Object(f.a)(Object(f.a)({},e),{},{loading:!1,error:!0});default:throw new Error}},b=(t(98),t(0));function v(){return Object(b.jsxs)("div",{className:"lds-ring",children:[Object(b.jsx)("div",{}),Object(b.jsx)("div",{}),Object(b.jsx)("div",{}),Object(b.jsx)("div",{})]})}t(100);function y(e){var r=e.id;return Object(b.jsxs)("div",{className:"tx__wrapper",children:[Object(b.jsx)("div",{className:"tx__loader",children:Object(b.jsx)(v,{})}),Object(b.jsx)("div",{className:"tx__content",children:Object(b.jsxs)("p",{children:["Tx: ",r]})})]})}var w=a.a.createContext();function g(e){var r=e.children,t=Object(n.useState)([]),a=Object(s.a)(t,2),o=a[0],i=a[1],u=Object(n.useState)(!0),l=Object(s.a)(u,2),m=l[0],g=l[1];Object(n.useEffect)((function(){x()}),[]);var x=function(){var e=Object(p.a)(d.a.mark((function e(){var r,t,n,a,o;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((r=window.localStorage.getItem("txs"))&&0!==r.length){e.next=4;break}return g(!1),e.abrupt("return");case 4:t=null===r||void 0===r?void 0:r.split(","),n=[],a=d.a.mark((function e(r){var a,o;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t[r],e.next=3,O(a);case 3:if(4!==(null===(o=e.sent)||void 0===o?void 0:o.status)){e.next=6;break}return e.abrupt("return","continue");case 6:Object(c.i)(a).subscribe((function(e){return k(null===e||void 0===e?void 0:e.status,a)})),n.push(a);case 8:case"end":return e.stop()}}),e)})),o=0;case 8:if(!(o<t.length)){e.next=16;break}return e.delegateYield(a(o),"t0",10);case 10:if("continue"!==e.t0){e.next=13;break}return e.abrupt("continue",13);case 13:o++,e.next=8;break;case 16:localStorage.setItem("txs",n.toString()),i(n.map((function(e){return{id:e}}))),g(!1);case 19:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),k=function(e,r){if(4!==e){var t=o.find((function(e){return e.id===r})),n=o.filter((function(e){return e.id!==r}));if(t){var a=Object(f.a)(Object(f.a)({},t),{},{status:e});i([].concat(Object(h.a)(n),[a]))}}else j(r)},j=function(e){var r=o.filter((function(r){return r.id!==e}));i(r)},O=function(){var e=Object(p.a)(d.a.mark((function e(r){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(c.h)([Object(c.e)(r)]).then(c.d);case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}();return m?Object(b.jsx)(v,{}):Object(b.jsxs)(w.Provider,{value:{runningTxs:0!==o.length,addTx:function(e){var r={id:e};i((function(e){return[].concat(Object(h.a)(e),[r])})),Object(c.i)(e).subscribe((function(e){return k(null===e||void 0===e?void 0:e.status,null===r||void 0===r?void 0:r.id)})),window.localStorage.setItem("txs",[].concat(Object(h.a)(o),[null===r||void 0===r?void 0:r.id]).toString())}},children:[Object(b.jsx)("div",{className:"txs__list",children:o.map((function(e){return Object(b.jsx)(y,{id:null===e||void 0===e?void 0:e.id},null===e||void 0===e?void 0:e.id)}))}),r]})}function x(){return Object(n.useContext)(w)}var k=t(65),j=t(66),O=function(){function e(r,t,n,a){Object(k.a)(this,e),this.id=r,this.name=t,this.price=n||0,this.uri=a}return Object(j.a)(e,[{key:"type",get:function(){return"MyArt"}}]),e}();var T=function(e,r){switch(r.type){case"PROCESSING":return Object(f.a)(Object(f.a)({},e),{},{loading:!0,error:!1});case"SUCCESS":return Object(f.a)(Object(f.a)({},e),{},{loading:!1,error:!1,data:r.payload});case"ERROR":return Object(f.a)(Object(f.a)({},e),{},{loading:!1,error:!0});default:throw new Error}};function E(e){var r=e.title,t=e.subtitle;return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("img",{src:"".concat("","/assets/MyWorld.png"),width:"200px",alt:"MyWorld"}),Object(b.jsx)("h1",{className:"app__title",children:r}),Object(b.jsx)("h3",{className:"app__subtitle",children:t})]})}var C=Object(n.createContext)();function _(e){var r=e.children,t=function(){var e=Object(n.useState)(),r=Object(s.a)(e,2),t=r[0],a=r[1],o={logIn:c.a,logOut:c.j};return Object(n.useEffect)((function(){var e=!1;return e||c.c().subscribe(a),function(){e=!0}}),[]),[t,null!=(null===t||void 0===t?void 0:t.addr),o]}(),a=Object(s.a)(t,3),o=a[0],i=a[1],u=a[2];return o&&i?Object(b.jsx)(C.Provider,{value:Object(f.a)({user:o,loggedIn:i},u),children:r}):Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)(E,{title:Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("span",{className:"highlight",children:"My"}),"World"]}),subtitle:Object(b.jsxs)(b.Fragment,{children:["An NFT gallery of ",Object(b.jsx)("span",{className:"highlight",children:"arts and music"})," for autism community"]})}),Object(b.jsx)("div",{style:{display:"inline-block"},className:"btn btn-bg rounded",onClick:function(){return null===u||void 0===u?void 0:u.logIn()},children:"Sign In to start"})]})}var A=function(){return Object(n.useContext)(C)},S=Object(n.createContext)();function I(e){var r=e.children,t=A().user,a=function(e){var r=Object(n.useState)(!0),t=Object(s.a)(r,2),a=t[0],o=t[1],i=Object(n.useState)(null),u=Object(s.a)(i,2),f=u[0],l=u[1],h=x().addTx;return Object(n.useEffect)((function(){(null===e||void 0===e?void 0:e.addr)&&function(){var r=Object(p.a)(d.a.mark((function r(){var t;return d.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,Object(c.g)({cadence:"\nimport MyWorldContract from 0xMyWorld\n\npub fun main(addr: Address): Bool {\n  let ref = getAccount(addr).getCapability<&{MyWorldContract.CollectionPublic}>(MyWorldContract.CollectionPublicPath).check()\n  return ref\n}\n",args:function(r,t){return[r(null===e||void 0===e?void 0:e.addr,t.Address)]}});case 3:t=r.sent,l(t),o(!1),r.next=12;break;case 8:r.prev=8,r.t0=r.catch(0),console.log(r.t0),o(!1);case 12:case"end":return r.stop()}}),r,null,[[0,8]])})));return function(){return r.apply(this,arguments)}}()()}),[]),{loading:a,collection:f,createCollection:function(){var e=Object(p.a)(d.a.mark((function e(){var r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(c.f)({cadence:"\n  import MyWorldContract from 0xMyWorld\n  \n  transaction {\n    prepare(acct: AuthAccount) {\n      let collection <- MyWorldContract.createEmptyCollection()\n      acct.save<@MyWorldContract.Collection>(<-collection, to: MyWorldContract.CollectionStoragePath)\n      acct.link<&{MyWorldContract.CollectionPublic}>(MyWorldContract.CollectionPublicPath, target: MyWorldContract.CollectionStoragePath)\n    }\n  }\n",limit:55});case 2:return r=e.sent,h(r),e.next=6,Object(c.i)(r).onceSealed();case 6:l(!0);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),deleteCollection:function(){var e=Object(p.a)(d.a.mark((function e(){var r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(c.f)({cadence:'\n  import MyWorldContract from 0xMyWorld\n\n  transaction() {\n    prepare(acct: AuthAccount) {\n      let collectionRef <- acct.load<@MyWorldContract.Collection>(from: MyWorldContract.CollectionStoragePath)\n        ?? panic("Could not borrow collection reference")\n      destroy collectionRef\n      acct.unlink(MyWorldContract.CollectionPublicPath)\n    }\n  }\n',limit:75});case 3:return r=e.sent,h(r),e.next=7,Object(c.i)(r).onceSealed();case 7:l(!1),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.log(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}()}}(t),o=a.collection,i=a.createCollection,u=a.deleteCollection,l=function(e){var r=Object(n.useReducer)(T,{loading:!0,error:!1,data:null}),t=Object(s.a)(r,2),a=t[0],o=t[1],i=x().addTx;Object(n.useEffect)((function(){u()}),[]);var u=function(){var r=Object(p.a)(d.a.mark((function r(){var t;return d.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return o({type:"PROCESSING"}),r.prev=1,r.next=4,Object(c.g)({cadence:"\n  import FungibleToken from 0xFungibleToken\n  import FUSD from 0xFUSD\n\n  pub fun main(address: Address): UFix64? {\n    let account = getAccount(address)\n    if let vaultRef = account.getCapability(/public/fusdBalance).borrow<&FUSD.Vault{FungibleToken.Balance}>() {\n      return vaultRef.balance\n    } \n    return nil\n  }\n",args:function(r,t){return[r(null===e||void 0===e?void 0:e.addr,t.Address)]}});case 4:t=r.sent,o({type:"SUCCESS",payload:t}),r.next=12;break;case 8:r.prev=8,r.t0=r.catch(1),o({type:"ERROR"}),console.log(r.t0);case 12:case"end":return r.stop()}}),r,null,[[1,8]])})));return function(){return r.apply(this,arguments)}}(),l=function(){var e=Object(p.a)(d.a.mark((function e(){var r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o({type:"PROCESSING"}),e.prev=1,e.next=4,Object(c.f)({cadence:"\n  import FungibleToken from 0xFungibleToken\n  import FUSD from 0xFUSD\n\n  transaction {\n    prepare(signer: AuthAccount) {\n      if(signer.borrow<&FUSD.Vault>(from: /storage/fusdVault) != nil) {\n        return\n      }\n    \n      signer.save(<-FUSD.createEmptyVault(), to: /storage/fusdVault)\n\n      signer.link<&FUSD.Vault{FungibleToken.Receiver}>(\n        /public/fusdReceiver,\n        target: /storage/fusdVault\n      )\n\n      signer.link<&FUSD.Vault{FungibleToken.Balance}>(\n        /public/fusdBalance,\n        target: /storage/fusdVault\n      )\n    }\n  }\n",limit:100});case 4:return r=e.sent,i(r),e.next=8,Object(c.i)(r).onceSealed();case 8:o({type:"SUCCESS"}),u(),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(1),o({type:"ERROR"});case 15:case"end":return e.stop()}}),e,null,[[1,12]])})));return function(){return e.apply(this,arguments)}}();return Object(f.a)(Object(f.a)({},a),{},{createFUSDVault:l,getFUSDBalance:u})}(t),h=l.data,v=l.createFUSDVault,y=l.getFUSDBalance,w=function(){var e=Object(n.useReducer)(T,{loading:!1,error:!1,data:[]}),r=Object(s.a)(e,2),t=r[0],a=r[1],o=function(){var e=Object(p.a)(d.a.mark((function e(){var r,t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a({type:"PROCESSING"}),e.prev=1,e.next=5,Object(c.g)({cadence:'\n    import MyMarketplaceContract from 0xMyMarketplace\n    import MyWorldContract from 0xMyWorld\n    \n    pub fun main(address: Address): {UInt64: MyWorldContract.MyArtData} {\n    let account = getAccount(address)\n    let saleRef = account.getCapability<\n        &{MyMarketplaceContract.SalePublic}>\n        (MyMarketplaceContract.SaleCollectionPublicPath)\n        .borrow() ?? panic("Cannot borrow reference")\n    return saleRef.getCollection()\n    }\n',args:function(e,r){return[e("0x510627df4617530f",r.Address)]}});case 5:r=e.sent,t=Object.keys(r).map((function(e){return new O(e,r[e].name,r[e].price,r[e].uri)})),a({type:"SUCCESS",payload:t}),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),a({type:"ERROR"});case 13:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){o()}),[]),Object(f.a)(Object(f.a)({},t),{},{fetchGallery:o})}(),g=w.data,k=function(e,r,t,a){var o=Object(n.useReducer)(m,{loading:!1,error:!1,data:[]}),i=Object(s.a)(o,2),u=i[0],l=i[1],h=x(),b=h.addTx,v=h.runningTxs,y=function(){var r=Object(p.a)(d.a.mark((function r(){var t,n;return d.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return l({type:"PROCESSING"}),r.prev=1,r.next=4,Object(c.g)({cadence:"\n  import MyWorldContract from 0xMyWorld\n\n  pub fun main(addr: Address): {UInt64: MyWorldContract.MyArtData}? {\n    let account = getAccount(addr)\n    \n    if let ref = account.getCapability<&{MyWorldContract.CollectionPublic}>(MyWorldContract.CollectionPublicPath)\n                .borrow() {\n                  let myArts = ref.listMyArts()\n                  return myArts\n                }\n    \n    return nil\n  }\n",args:function(r,t){return[r(null===e||void 0===e?void 0:e.addr,t.Address)]}});case 4:t=r.sent,n=Object.keys(t).map((function(e){return new O(e,t[e].name,t[e].price,t[e].uri)})),l({type:"SUCCESS",payload:n}),r.next=12;break;case 9:r.prev=9,r.t0=r.catch(1),l({type:"ERROR"});case 12:case"end":return r.stop()}}),r,null,[[1,9]])})));return function(){return r.apply(this,arguments)}}();Object(n.useEffect)((function(){y()}),[]);var w=function(){var e=Object(p.a)(d.a.mark((function e(r,n){var o,i,s;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!v){e.next=3;break}return alert("Transactions are still running. Please wait for them to finish first."),e.abrupt("return");case 3:return e.prev=3,o=parseFloat(n).toFixed(8),i=parseInt(r),e.next=9,Object(c.f)({cadence:'\nimport MyWorldContract from 0xMyWorld\nimport MyMarketplaceContract from 0xMyMarketplace\n\ntransaction(myWorldAdmin: Address, myArtId: UInt64, wantPrice: UFix64) {\n\n    // let seller: AuthAccount\n    let saleRef: &{MyMarketplaceContract.SalePublic}\n    let collectionRef: &MyWorldContract.Collection\n\n    prepare(seller: AuthAccount) {\n        \n        let adminAccount = getAccount(myWorldAdmin)\n        /* Sale Collection */\n        self.saleRef = adminAccount\n            .getCapability(MyMarketplaceContract.SaleCollectionPublicPath)\n            .borrow<&{MyMarketplaceContract.SalePublic}>() \n                ?? panic("Cannot borrow reference")\n\n        /* Private Collection */\n        self.collectionRef = seller\n            .borrow<&MyWorldContract.Collection>\n            (from: MyWorldContract.CollectionStoragePath)\n                ?? panic("Cannot borrow reference")     \n\n    }\n\n    execute {\n\n        let myArt <- self.collectionRef.withdraw(withdrawID: myArtId)\n        let price = myArt.data.price /* Need to change the price */\n        self.saleRef.putForSale(token: <-myArt, wantPrice: wantPrice)\n\n    }\n    \n}\n',limit:55,args:function(e,r){return[e("0x510627df4617530f",r.Address),e(i,r.UInt64),e(o,r.UFix64)]}});case 9:return s=e.sent,b(s),e.next=13,Object(c.i)(s).onceSealed();case 13:return e.next=15,t();case 15:y(),a(),e.next=22;break;case 19:e.prev=19,e.t0=e.catch(3),console.log(e.t0);case 22:case"end":return e.stop()}}),e,null,[[3,19]])})));return function(r,t){return e.apply(this,arguments)}}(),g=function(){var e=Object(p.a)(d.a.mark((function e(n,a,o){var i;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r){e.next=3;break}return alert("You need to enable the collection first. Go to the tab Collection"),e.abrupt("return");case 3:if(!v){e.next=6;break}return alert("Transactions are still running. Please wait for them to finish first."),e.abrupt("return");case 6:return e.prev=6,e.next=9,Object(c.f)({cadence:'\nimport MyWorldContract from 0xMyWorld\nimport FUSD from 0xFUSD\nimport FungibleToken from 0xFungibleToken\n\ntransaction(name: String, price: UFix64, uri: String) {\n  let receiverReference: &MyWorldContract.Collection{MyWorldContract.Receiver}\n  let vaultRef: &FUSD.Vault\n\n  prepare(acct: AuthAccount) {\n\n    self.receiverReference = acct.borrow<&MyWorldContract.Collection>(from: MyWorldContract.CollectionStoragePath) \n        ?? panic("Cannot borrow")\n    self.vaultRef = acct.borrow<&FUSD.Vault>(from: /storage/fusdVault) ?? panic("Could not borrow FUSD vault")\n\n  }\n\n  execute {\n\n    let sentVault: @FungibleToken.Vault <- self.vaultRef.withdraw(amount: price)\n    let newMyArt <- MyWorldContract.mintMyArt(artData: MyWorldContract.MyArtData(name: name, price: price, uri: uri), paymentVault: <- sentVault)\n    self.receiverReference.deposit(token: <-newMyArt)\n\n  }\n}\n',limit:55,args:function(e,r){return[e(n,r.String),e(a,r.UFix64),e(o,r.String)]}});case 9:return i=e.sent,b(i),e.next=13,Object(c.i)(i).onceSealed();case 13:return e.next=15,t();case 15:return e.next=17,y();case 17:e.next=22;break;case 19:e.prev=19,e.t0=e.catch(6),console.log(e.t0);case 22:case"end":return e.stop()}}),e,null,[[6,19]])})));return function(r,t,n){return e.apply(this,arguments)}}(),k=function(){var e=Object(p.a)(d.a.mark((function e(){var r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=3,Object(c.g)({cadence:"\n      pub fun main(): AnyStruct {\n        return true\n      }\n    "});case 3:r=e.sent,console.log(r);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(f.a)(Object(f.a)({},u),{},{putForSale:w,mintMyArt:g,testScript:k})}(t,o,y,w.fetchGallery),j=k.data,E=k.putForSale,C=k.mintMyArt,_=k.testScript;return Object(b.jsx)(S.Provider,{value:{saleItems:g,useMyarts:j,putForSale:E,mintMyArt:C,collection:o,createCollection:i,deleteCollection:u,balance:h,createFUSDVault:v,getFUSDBalance:y,testScript:_},children:r})}var M=function(){return Object(n.useContext)(S)};t(55);function U(e){var r=e.myart,t=e.store,n=M(),a=n.useMyarts,o=n.putForSale,i=r.id,c=r.name,s=r.price,u=r.uri,f=a.some((function(e){return(null===e||void 0===e?void 0:e.id)===(null===r||void 0===r?void 0:r.id)})),l=function(){return Object(b.jsxs)("div",{onClick:function(){return o(i,s)},className:"btn btn-bordered btn-light",children:[Object(b.jsx)("i",{className:"ri-price-tag-3-fill btn-icon"})," ",parseInt(s)," FUSD"]})};return Object(b.jsxs)("div",{className:"myart-card__border",children:[Object(b.jsxs)("div",{className:"myart-card__wrapper ".concat(f&&t&&"faded"),children:[Object(b.jsx)("img",{className:"myart-card__image img-large",src:u,alt:"Art"}),Object(b.jsx)("br",{}),Object(b.jsx)("h3",{className:"myart-cart__title",children:c}),Object(b.jsxs)("p",{className:"myart-card__info",children:["# ",i]})]}),Object(b.jsx)(l,{}),Object(b.jsx)("div",{className:"collected",children:"Collected"})]})}t(56),t(101);var N=function(e){var r=Object(n.useState)(e),t=Object(s.a)(r,2),a=t[0],o=t[1];return{value:a,setValue:o,reset:function(){return o("")},bind:{value:a,onChange:function(e){o(e.target.value)}}}},P=t(67);function D(){var e=M().mintMyArt,r=N(""),t=r.value,a=r.bind,o=r.reset,i=N(""),c=i.value,u=i.bind,l=i.reset,h=Object(n.useState)(null),m=Object(s.a)(h,2),v=m[0],y=m[1],w={endpoint:"https://api.nft.storage",token:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJkaWQ6ZXRocjoweDgxYzhmZTJBODg1ZkU1RDYyMDU2RWU0NzU5ODE1NUZCNjVGNGY4REMiLCJpc3MiOiJuZnQtc3RvcmFnZSIsImlhdCI6MTYzMTM0NzgwMDU5NSwibmFtZSI6IkxFIERBTkcgTkdVWUVOIn0.ymITevlur8fKk5VApTqNjWVIr4sxi8wt_3Pw92u9bWI",ipfspath:"https://ipfs.io/ipfs",setIpfsUri:function(e){return y(e)}},g=function(){var r=Object(p.a)(d.a.mark((function r(n){var a;return d.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(n.preventDefault(),!(t&&c&&v)){r.next=8;break}if(!confirm("Minting myart: ".concat(t,", price: ").concat(c,", uri: ").concat(v," \n Process?"))){r.next=6;break}return a=parseFloat(c).toFixed(8),r.next=6,e(t,a,v);case 6:r.next=9;break;case 8:alert("Enter name, price and upload arwork");case 9:o(),l();case 11:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}();return Object(b.jsx)(b.Fragment,{children:Object(b.jsxs)("div",{className:"myart__form__border",children:[Object(b.jsx)("div",{className:"myart-cart__title",children:"Mint Your Art"}),Object(b.jsxs)("form",{className:"myart__form",children:[Object(b.jsx)(P.LazyIpfsImage,Object(f.a)({},w)),Object(b.jsxs)("div",{className:"myart__form__item ",children:[Object(b.jsx)("label",{children:"Name"}),Object(b.jsx)("input",Object(f.a)({type:"text"},a))]}),Object(b.jsxs)("div",{className:"myart__form__item ",children:[Object(b.jsx)("label",{children:"Price"}),Object(b.jsx)("input",Object(f.a)({type:"number",step:".01"},u))]}),Object(b.jsx)("div",{className:"btn upload__btn btn-bg rounded",onClick:g,children:"3. Submit"})]})]})})}function B(e){var r=e.myarts;return Object(b.jsxs)("div",{className:"myart-list__wrapper",children:[r.map((function(e,r){return Object(b.jsx)(U,{myart:e},r)})),Object(b.jsx)(D,{})]})}function R(e){var r=e.myart,t=e.store,n=M(),a=n.useMyarts,o=n.putForSale,i=r.id,c=r.name,s=r.price,u=r.uri,f=a.some((function(e){return(null===e||void 0===e?void 0:e.id)===(null===r||void 0===r?void 0:r.id)})),l=function(){return Object(b.jsxs)("div",{onClick:function(){return o(i,s)},className:"btn btn-bordered btn-light",children:[Object(b.jsx)("i",{className:"ri-price-tag-3-fill btn-icon"})," ",parseInt(s)," FUSD"]})};return Object(b.jsxs)("div",{className:"myart-card__border",children:[Object(b.jsxs)("div",{className:"myart-card__wrapper ".concat(f&&t&&"faded"),children:[Object(b.jsx)("img",{className:"myart-card__image img-large",src:u,alt:"Art"}),Object(b.jsx)("br",{}),Object(b.jsx)("h3",{className:"myart-cart__title",children:c}),Object(b.jsxs)("p",{className:"myart-card__info",children:["# ",i]})]}),Object(b.jsx)(l,{}),Object(b.jsx)("div",{className:"collected",children:"Collected"})]})}function F(e){var r=e.myarts;return Object(b.jsx)("div",{className:"myart-list__wrapper",children:r.map((function(e,r){return Object(b.jsx)(R,{myart:e},r)}))})}t(128);var L=[{name:"Home",path:"/",component:function(){var e=Object(u.f)();return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)(E,{title:Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("span",{className:"highlight",children:"My"}),"World"]}),subtitle:Object(b.jsxs)(b.Fragment,{children:["An NFT gallery of ",Object(b.jsx)("span",{className:"highlight",children:"arts and music"})," for autism community"]})}),Object(b.jsx)("img",{className:"header-image",alt:"Header",onClick:function(){return e.push("/packs")},src:"".concat("","/assets/PinWheel.png")})]})},nav:!0},{name:"Gallery",path:"/gallery",component:function(){var e=M().saleItems;return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)(E,{title:Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("span",{className:"highlight",children:"MyWorld "}),"Gallery"]}),subtitle:Object(b.jsxs)(b.Fragment,{children:["Browse ",Object(b.jsx)("span",{className:"highlight",children:"arts"})," in our gallery"]})}),Object(b.jsx)(F,{myarts:e})]})},nav:!0},{name:"Collection",path:"/collection",component:function(){var e=M(),r=e.collection,t=e.createCollection,n=e.deleteCollection,a=e.useMyarts;return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)(E,{title:Object(b.jsxs)(b.Fragment,{children:["MyWorld ",Object(b.jsx)("span",{className:"highlight",children:"Collection"})]}),subtitle:Object(b.jsxs)(b.Fragment,{children:["Here are your ",Object(b.jsx)("span",{className:"highlight",children:"Arts"})," collection"]})}),r?Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)(B,{myarts:a}),Object(b.jsx)("div",{className:"btn btn-bg rounded",onClick:function(){return n()},children:"Delete Collection"})]}):Object(b.jsx)("div",{className:"btn btn-bg rounded",onClick:function(){return t()},children:"Enable Collection"})]})},nav:!0},{name:"Artists",path:"/artists",component:function(){return Object(b.jsx)(b.Fragment,{children:Object(b.jsx)(E,{title:Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("span",{className:"highlight",children:"Artists"})," Profile"]}),subtitle:Object(b.jsxs)(b.Fragment,{children:["Our lens ",Object(b.jsx)("span",{className:"highlight",children:"through"})," life"]})})})},nav:!0}],z=L.filter((function(e){return e.nav}));t(136);function W(){var e=Object(n.useState)(!1),r=Object(s.a)(e,2),t=r[0],a=r[1],o=Object(u.f)(),i=function(e){var r=e.route;return Object(b.jsx)("div",{className:"navbar__item",children:Object(b.jsx)("div",{className:"btn",onClick:function(){return o.push(r.path)},children:r.name})})};return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("div",{className:"navbar",children:z.map((function(e){return Object(b.jsx)(i,{route:e},e.path)}))}),Object(b.jsx)("div",{className:"btn btn-bg navbar__mobile__trigger mobile_only",onClick:function(){return a((function(e){return!e}))},children:"Menu"}),t&&Object(b.jsx)("div",{className:"navbar__mobile",children:z.map((function(e){return Object(b.jsx)(i,{route:e},e.path)}))})]})}var V=t(29);function H(e){var r=e.children;return Object(b.jsx)(V.a,{children:Object(b.jsx)(_,{children:Object(b.jsx)(g,{children:Object(b.jsx)(I,{children:Object(b.jsx)("div",{className:"app",children:r})})})})})}function G(){return Object(b.jsx)("div",{children:"Not found"})}function q(e){var r=e.routes.map((function(e){var r=e.path,t=e.component;return Object(b.jsx)(u.a,{path:r,component:t,exact:!0},r)}));return Object(b.jsxs)(u.c,{children:[r,Object(b.jsx)(u.a,{component:G})]})}t(137);function J(){var e=A(),r=e.user,t=e.logOut,n=M(),a=n.balance,o=n.createFUSDVault;return Object(b.jsxs)("div",{className:"wallet__popup",children:[Object(b.jsxs)("div",{className:"wallet__item",children:["\ud83d\udc5b ",null===r||void 0===r?void 0:r.addr]}),a?Object(b.jsxs)("div",{className:"wallet__item",children:["\ud83d\udcb0 FUSD: ",a.slice(0,-6)," ",Object(b.jsx)("a",{style:{color:"white"},href:"https://youtu.be/q8vcEGe95js",children:"(Get FUSD)"})]}):Object(b.jsx)("div",{className:"btn btn-small",onClick:function(){return o()},children:"\u26a0\ufe0f Enable FUSD"}),Object(b.jsx)("div",{className:"btn btn-small",onClick:function(){return t()},children:"\ud83d\udc4b Logout"})]})}function Y(){return Object(b.jsxs)(H,{children:[Object(b.jsx)(J,{}),Object(b.jsx)(W,{}),Object(b.jsx)(q,{routes:L})]})}i.a.render(Object(b.jsx)(Y,{}),document.getElementById("root"))},55:function(e,r,t){},56:function(e,r,t){},67:function(e,r,t){var n=t(102),a=t(106),o=t(107),i=t(111),c=t(60),s=t(114),u=t(6),f=t(115),l=t(116),d=t(117),p=t(121),h=t(122),m=t(123),b=t(124),v=t(125),y=t(126);e.exports=function(e){var r={};function t(n){if(r[n])return r[n].exports;var a=r[n]={i:n,l:!1,exports:{}};return e[n].call(a.exports,a,a.exports,t),a.l=!0,a.exports}return t.m=e,t.c=r,t.d=function(e,r,n){t.o(e,r)||Object.defineProperty(e,r,{enumerable:!0,get:n})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,r){if(1&r&&(e=t(e)),8&r)return e;if(4&r&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(t.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&r&&"string"!=typeof e)for(var a in e)t.d(n,a,function(r){return e[r]}.bind(null,a));return n},t.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(r,"a",r),r},t.o=function(e,r){return Object.prototype.hasOwnProperty.call(e,r)},t.p="",t(t.s=64)}([function(e,r){e.exports=t(1)},function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(){function e(r,t,n){p(this,e),this.major=r,this.majorEncoded=r<<5,this.name=t,this.terminal=n}return h(e,[{key:"toString",value:function(){return"Type[".concat(this.major,"].").concat(this.name)}},{key:"compare",value:function(e){return this.major<e.major?-1:this.major>e.major?1:0}}]),e}();n.uint=new n(0,"uint",!0),n.negint=new n(1,"negint",!0),n.bytes=new n(2,"bytes",!0),n.string=new n(3,"string",!0),n.array=new n(4,"array",!1),n.map=new n(5,"map",!1),n.tag=new n(6,"tag",!1),n.float=new n(7,"float",!0),n.false=new n(7,"false",!0),n.true=new n(7,"true",!0),n.null=new n(7,"null",!0),n.undefined=new n(7,"undefined",!0),n.break=new n(7,"break",!0),r.Token=function(){function e(r,t,n){p(this,e),this.type=r,this.value=t,this.encodedLength=n,this.encodedBytes=void 0}return h(e,[{key:"toString",value:function(){return"Token[".concat(this.type,"].").concat(this.value)}}]),e}(),r.Type=n},function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=[];n[23]=1,n[24]=2,n[25]=3,n[26]=5,n[27]=9,r.assertEnoughData=function(e,r,t){if(e.length-r<t)throw new Error("CBOR decode error: not enough data for type")},r.decodeErrPrefix="CBOR decode error:",r.encodeErrPrefix="CBOR encode error:",r.uintMinorPrefixBytes=n},function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=t(1),a=t(2),o=[24,256,65536,4294967296,BigInt("18446744073709551616")];function i(e,r,t){a.assertEnoughData(e,r,1);var n=e[r];if(!0===t.strict&&n<o[0])throw new Error(a.decodeErrPrefix+" integer encoded in more bytes than necessary (strict decode)");return n}function c(e,r,t){a.assertEnoughData(e,r,2);var n=e[r]<<8|e[r+1];if(!0===t.strict&&n<o[1])throw new Error(a.decodeErrPrefix+" integer encoded in more bytes than necessary (strict decode)");return n}function s(e,r,t){a.assertEnoughData(e,r,4);var n=16777216*e[r]+(e[r+1]<<16)+(e[r+2]<<8)+e[r+3];if(!0===t.strict&&n<o[2])throw new Error(a.decodeErrPrefix+" integer encoded in more bytes than necessary (strict decode)");return n}function u(e,r,t){a.assertEnoughData(e,r,8);var n=16777216*e[r]+(e[r+1]<<16)+(e[r+2]<<8)+e[r+3],i=16777216*e[r+4]+(e[r+5]<<16)+(e[r+6]<<8)+e[r+7],c=(BigInt(n)<<BigInt(32))+BigInt(i);if(!0===t.strict&&c<o[3])throw new Error(a.decodeErrPrefix+" integer encoded in more bytes than necessary (strict decode)");if(c<=Number.MAX_SAFE_INTEGER)return Number(c);if(!0===t.allowBigInt)return c;throw new Error(a.decodeErrPrefix+" integers outside of the safe integer range are not supported")}function f(e,r){return l(e,0,r.value)}function l(e,r,t){if(t<o[0]){var n=Number(t);e.push([r|n])}else if(t<o[1]){var i=Number(t);e.push([24|r,i])}else if(t<o[2]){var c=Number(t);e.push([25|r,c>>>8,255&c])}else if(t<o[3]){var s=Number(t);e.push([26|r,s>>>24&255,s>>>16&255,s>>>8&255,255&s])}else{var u=BigInt(t);if(!(u<o[4]))throw new Error(a.decodeErrPrefix+" encountered BigInt larger than allowable range");var f=[27|r,0,0,0,0,0,0,0],l=Number(u&BigInt(4294967295)),d=Number(u>>BigInt(32)&BigInt(4294967295));f[8]=255&l,l>>=8,f[7]=255&l,l>>=8,f[6]=255&l,l>>=8,f[5]=255&l,f[4]=255&d,d>>=8,f[3]=255&d,d>>=8,f[2]=255&d,d>>=8,f[1]=255&d,e.push(f)}}f.encodedSize=function(e){return l.encodedSize(e.value)},l.encodedSize=function(e){return e<o[0]?1:e<o[1]?2:e<o[2]?3:e<o[3]?5:9},f.compareTokens=function(e,r){return e.value<r.value?-1:e.value>r.value?1:0},r.decodeUint16=function(e,r,t,a){return new n.Token(n.Type.uint,c(e,r+1,a),3)},r.decodeUint32=function(e,r,t,a){return new n.Token(n.Type.uint,s(e,r+1,a),5)},r.decodeUint64=function(e,r,t,a){return new n.Token(n.Type.uint,u(e,r+1,a),9)},r.decodeUint8=function(e,r,t,a){return new n.Token(n.Type.uint,i(e,r+1,a),2)},r.encodeUint=f,r.encodeUintValue=l,r.readUint16=c,r.readUint32=s,r.readUint64=u,r.readUint8=i,r.uintBoundaries=o},function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=t(9),a=t(8),o=t(41),i=t(43),c=t(5),s=function(){function e(r,t,n,a){p(this,e),this.code=t,this.version=r,this.multihash=n,this.bytes=a,this.byteOffset=a.byteOffset,this.byteLength=a.byteLength,this.asCID=this,this._baseCache=new Map,Object.defineProperties(this,{byteOffset:g,byteLength:g,code:w,version:w,multihash:w,bytes:w,_baseCache:g,asCID:g})}return h(e,[{key:"toV0",value:function(){switch(this.version){case 0:return this;default:var r=this.code,t=this.multihash;if(r!==m)throw new Error("Cannot convert a non dag-pb CID to CIDv0");if(t.code!==b)throw new Error("Cannot convert non sha2-256 multihash CID to CIDv0");return e.createV0(t)}}},{key:"toV1",value:function(){switch(this.version){case 0:var r=this.multihash,t=r.code,n=r.digest,o=a.create(t,n);return e.createV1(this.code,o);case 1:return this;default:throw Error("Can not convert CID version ".concat(this.version," to version 0. This is a bug please report"))}}},{key:"equals",value:function(e){return e&&this.code===e.code&&this.version===e.version&&a.equals(this.multihash,e.multihash)}},{key:"toString",value:function(e){var r=this.bytes,t=this.version,n=this._baseCache;switch(t){case 0:return f(r,n,e||o.base58btc.encoder);default:return l(r,n,e||i.base32.encoder)}}},{key:"toJSON",value:function(){return{code:this.code,version:this.version,hash:this.multihash.bytes}}},{key:Symbol.toStringTag,get:function(){return"CID"}},{key:Symbol.for("nodejs.util.inspect.custom"),value:function(){return"CID("+this.toString()+")"}},{key:"toBaseEncodedString",get:function(){throw new Error("Deprecated, use .toString()")}},{key:"codec",get:function(){throw new Error('"codec" property is deprecated, use integer "code" property instead')}},{key:"buffer",get:function(){throw new Error("Deprecated .buffer property, use .bytes to get Uint8Array instead")}},{key:"multibaseName",get:function(){throw new Error('"multibaseName" property is deprecated')}},{key:"prefix",get:function(){throw new Error('"prefix" property is deprecated')}}],[{key:"isCID",value:function(e){return x(/^0\.0/,k),!(!e||!e[y]&&e.asCID!==e)}},{key:"asCID",value:function(r){if(r instanceof e)return r;if(null!=r&&r.asCID===r){var t=r.version,n=r.code,o=r.multihash;return new e(t,n,o,r.bytes||v(t,n,o.bytes))}if(null!=r&&!0===r[y]){var i=r.version,c=r.multihash,s=r.code,u=a.decode(c);return e.create(i,s,u)}return null}},{key:"create",value:function(r,t,n){if("number"!=typeof t)throw new Error("String codecs are no longer supported");switch(r){case 0:if(t!==m)throw new Error("Version 0 CID must use dag-pb (code: ".concat(m,") block encoding"));return new e(r,t,n,n.bytes);case 1:return new e(r,t,n,v(r,t,n.bytes));default:throw new Error("Invalid version")}}},{key:"createV0",value:function(r){return e.create(0,m,r)}},{key:"createV1",value:function(r,t){return e.create(1,r,t)}},{key:"decode",value:function(r){var t=e.decodeFirst(r),n=d(t,2),a=n[0];if(n[1].length)throw new Error("Incorrect length");return a}},{key:"decodeFirst",value:function(r){var t=e.inspectBytes(r),n=t.size-t.multihashSize,o=c.coerce(r.subarray(n,n+t.multihashSize));if(o.byteLength!==t.multihashSize)throw new Error("Incorrect length");var i=o.subarray(t.multihashSize-t.digestSize),s=new a.Digest(t.multihashCode,t.digestSize,i,o);return[0===t.version?e.createV0(s):e.createV1(t.codec,s),r.subarray(t.size)]}},{key:"inspectBytes",value:function(e){var r=0,t=function(){var t=n.decode(e.subarray(r)),a=d(t,2),o=a[0],i=a[1];return r+=i,o},a=t(),o=m;if(18===a?(a=0,r=0):1===a&&(o=t()),0!==a&&1!==a)throw new RangeError("Invalid CID version "+a);var i=r,c=t(),s=t(),u=r+s;return{version:a,codec:o,multihashCode:c,digestSize:s,multihashSize:u-i,size:u}}},{key:"parse",value:function(r,t){var n=u(r,t),a=d(n,2),o=a[0],i=a[1],c=e.decode(i);return c._baseCache.set(o,r),c}}]),e}(),u=function(e,r){switch(e[0]){case"Q":var t=r||o.base58btc;return[o.base58btc.prefix,t.decode("".concat(o.base58btc.prefix).concat(e))];case o.base58btc.prefix:var n=r||o.base58btc;return[o.base58btc.prefix,n.decode(e)];case i.base32.prefix:var a=r||i.base32;return[i.base32.prefix,a.decode(e)];default:if(null==r)throw Error("To parse non base32 or base58btc encoded CID multibase decoder must be provided");return[e[0],r.decode(e)]}},f=function(e,r,t){var n=t.prefix;if(n!==o.base58btc.prefix)throw Error("Cannot string encode V0 in ".concat(t.name," encoding"));var a=r.get(n);if(null==a){var i=t.encode(e).slice(1);return r.set(n,i),i}return a},l=function(e,r,t){var n=t.prefix,a=r.get(n);if(null==a){var o=t.encode(e);return r.set(n,o),o}return a},m=112,b=18,v=function(e,r,t){var a=n.encodingLength(e),o=a+n.encodingLength(r),i=new Uint8Array(o+t.byteLength);return n.encodeTo(e,i,0),n.encodeTo(r,i,a),i.set(t,o),i},y=Symbol.for("@ipld/js-cid/CID"),w={writable:!1,configurable:!1,enumerable:!0},g={writable:!1,enumerable:!1,configurable:!1},x=function(e,r){if(!e.test("0.0.0-dev"))throw new Error(r);console.warn(r)},k="CID.isCID(v) is deprecated and will be removed in the next major release.\nFollowing code pattern:\n\nif (CID.isCID(value)) {\n  doSomethingWithCID(value)\n}\n\nIs replaced with:\n\nconst cid = CID.asCID(value)\nif (cid) {\n  // Make sure to use cid instead of value\n  doSomethingWithCID(cid)\n}\n";r.CID=s},function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=new Uint8Array(0);r.coerce=function(e){if(e instanceof Uint8Array&&"Uint8Array"===e.constructor.name)return e;if(e instanceof ArrayBuffer)return new Uint8Array(e);if(ArrayBuffer.isView(e))return new Uint8Array(e.buffer,e.byteOffset,e.byteLength);throw new Error("Unknown type, must be binary type")},r.empty=n,r.equals=function(e,r){if(e===r)return!0;if(e.byteLength!==r.byteLength)return!1;for(var t=0;t<e.byteLength;t++)if(e[t]!==r[t])return!1;return!0},r.fromHex=function(e){var r=e.match(/../g);return r?new Uint8Array(r.map((function(e){return parseInt(e,16)}))):n},r.fromString=function(e){return(new TextEncoder).encode(e)},r.isBinary=function(e){return e instanceof ArrayBuffer||ArrayBuffer.isView(e)},r.toHex=function(e){return e.reduce((function(e,r){return e+r.toString(16).padStart(2,"0")}),"")},r.toString=function(e){return(new TextDecoder).decode(e)}},function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=globalThis.process&&!globalThis.process.browser&&globalThis.Buffer&&"function"==typeof globalThis.Buffer.isBuffer,a=new TextDecoder,o=new TextEncoder;function i(e){return n&&globalThis.Buffer.isBuffer(e)}function c(e){return e instanceof Uint8Array?i(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):e:Uint8Array.from(e)}var s=n?function(e,r,t){return t-r>64?globalThis.Buffer.from(e.subarray(r,t)).toString("utf8"):y(e,r,t)}:function(e,r,t){return t-r>64?a.decode(e.subarray(r,t)):y(e,r,t)},u=n?function(e){return e.length>64?globalThis.Buffer.from(e):v(e)}:function(e){return e.length>64?o.encode(e):v(e)},f=n?function(e,r,t){return i(e)?new Uint8Array(e.subarray(r,t)):e.slice(r,t)}:function(e,r,t){return e.slice(r,t)},d=n?function(e,r){return e=e.map((function(e){return e instanceof Uint8Array?e:globalThis.Buffer.from(e)})),c(globalThis.Buffer.concat(e,r))}:function(e,r){var t,n=new Uint8Array(r),a=0,o=l(e);try{for(o.s();!(t=o.n()).done;){var i=t.value;a+i.length>n.length&&(i=i.subarray(0,n.length-a)),n.set(i,a),a+=i.length}}catch(c){o.e(c)}finally{o.f()}return n},p=n?function(e){return globalThis.Buffer.allocUnsafe(e)}:function(e){return new Uint8Array(e)},h=n?function(e){return"string"==typeof e?e:globalThis.Buffer.from(b(e)).toString("hex")}:function(e){return"string"==typeof e?e:Array.prototype.reduce.call(b(e),(function(e,r){return"".concat(e).concat(r.toString(16).padStart(2,"0"))}),"")},m=n?function(e){return e instanceof Uint8Array?e:globalThis.Buffer.from(e,"hex")}:function(e){return e instanceof Uint8Array?e:e.length?new Uint8Array(e.split("").map((function(e,r,t){return r%2==0?"0x".concat(e).concat(t[r+1]):""})).filter(Boolean).map((function(e){return parseInt(e,16)}))):new Uint8Array(0)};function b(e){if(e instanceof Uint8Array&&"Uint8Array"===e.constructor.name)return e;if(e instanceof ArrayBuffer)return new Uint8Array(e);if(ArrayBuffer.isView(e))return new Uint8Array(e.buffer,e.byteOffset,e.byteLength);throw new Error("Unknown type, must be binary type")}function v(e){for(var r,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1/0,n=e.length,a=null,o=[],i=0;i<n;++i){if((r=e.charCodeAt(i))>55295&&r<57344){if(!a){if(r>56319){(t-=3)>-1&&o.push(239,191,189);continue}if(i+1===n){(t-=3)>-1&&o.push(239,191,189);continue}a=r;continue}if(r<56320){(t-=3)>-1&&o.push(239,191,189),a=r;continue}r=65536+(a-55296<<10|r-56320)}else a&&(t-=3)>-1&&o.push(239,191,189);if(a=null,r<128){if((t-=1)<0)break;o.push(r)}else if(r<2048){if((t-=2)<0)break;o.push(r>>6|192,63&r|128)}else if(r<65536){if((t-=3)<0)break;o.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;o.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return o}function y(e,r,t){for(var n=[];r<t;){var a=e[r],o=null,i=a>239?4:a>223?3:a>191?2:1;if(r+i<=t){var c=void 0,s=void 0,u=void 0,f=void 0;switch(i){case 1:a<128&&(o=a);break;case 2:128==(192&(c=e[r+1]))&&((f=(31&a)<<6|63&c)>127&&(o=f));break;case 3:c=e[r+1],s=e[r+2],128==(192&c)&&128==(192&s)&&((f=(15&a)<<12|(63&c)<<6|63&s)>2047&&(f<55296||f>57343)&&(o=f));break;case 4:c=e[r+1],s=e[r+2],u=e[r+3],128==(192&c)&&128==(192&s)&&128==(192&u)&&((f=(15&a)<<18|(63&c)<<12|(63&s)<<6|63&u)>65535&&f<1114112&&(o=f))}}null===o?(o=65533,i=1):o>65535&&(o-=65536,n.push(o>>>10&1023|55296),o=56320|1023&o),n.push(o),r+=i}return w(n)}function w(e){var r=e.length;if(r<=4096)return String.fromCharCode.apply(String,e);for(var t="",n=0;n<r;)t+=String.fromCharCode.apply(String,e.slice(n,n+=4096));return t}r.alloc=p,r.asU8A=c,r.compare=function(e,r){if(i(e)&&i(r))return e.compare(r);for(var t=0;t<e.length;t++)if(e[t]!==r[t])return e[t]<r[t]?-1:1;return 0},r.concat=d,r.decodeCodePointsArray=w,r.fromArray=function(e){return Uint8Array.from(e)},r.fromHex=m,r.fromString=u,r.slice=f,r.toHex=h,r.toString=s,r.useBuffer=n},function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=t(16),a=t(4),o=t(8),i=t(10);var c=function(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}(n),s=function(e){if(e&&e.__esModule)return e;var r=Object.create(null);return e&&Object.keys(e).forEach((function(t){if("default"!==t){var n=Object.getOwnPropertyDescriptor(e,t);Object.defineProperty(r,t,n.get?n:{enumerable:!0,get:function(){return e[t]}})}})),r.default=e,Object.freeze(r)}(o);function l(e){return d.apply(this,arguments)}function d(){return(d=f(u.mark((function e(r){var t,n;return u.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.upTo(8);case 2:return t=e.sent,n=c.default.decode(t),e.abrupt("return",(r.seek(c.default.decode.bytes),n));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function p(e){return h.apply(this,arguments)}function h(){return(h=f(u.mark((function e(r){var t,n,a;return u.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l(r);case 2:if(0!==(t=e.sent)){e.next=5;break}throw new Error("Invalid CAR header (zero length)");case 5:return e.next=7,r.exactly(t);case 7:if(n=e.sent,r.seek(t),null!=(a=i.decode(n))&&!Array.isArray(a)&&"object"==typeof a){e.next=12;break}throw new Error("Invalid CAR header format");case 12:if(1===a.version){e.next=16;break}if("string"!=typeof a.version){e.next=15;break}throw new Error('Invalid CAR version: "'.concat(a.version,'"'));case 15:throw new Error("Invalid CAR version: "+a.version);case 16:if(Array.isArray(a.roots)){e.next=18;break}throw new Error("Invalid CAR header format");case 18:if(!Object.keys(a).filter((function(e){return"roots"!==e&&"version"!==e})).length){e.next=20;break}throw new Error("Invalid CAR header format");case 20:return e.abrupt("return",a);case 21:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function m(e){return b.apply(this,arguments)}function b(){return(b=f(u.mark((function e(r){var t,n,o,i,d,p,h;return u.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.exactly(2);case 2:if(18!==(t=e.sent)[0]||32!==t[1]){e.next=10;break}return e.next=6,r.exactly(34);case 6:return n=e.sent,r.seek(34),o=s.decode(n),e.abrupt("return",a.CID.create(0,112,o));case 10:return e.next=12,l(r);case 12:if(1===(i=e.sent)){e.next=15;break}throw new Error("Unexpected CID version (".concat(i,")"));case 15:return e.next=17,l(r);case 17:return d=e.sent,e.next=20,function(){var e=f(u.mark((function e(r){var t,n,a,o,i;return u.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.upTo(8);case 2:return t=e.sent,c.default.decode(t),n=c.default.decode.bytes,a=c.default.decode(t.subarray(c.default.decode.bytes)),o=n+c.default.decode.bytes+a,e.next=9,r.exactly(o);case 9:return i=e.sent,e.abrupt("return",(r.seek(o),i));case 11:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}()(r);case 20:return p=e.sent,h=s.decode(p),e.abrupt("return",a.CID.create(i,d,h));case 23:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function w(e){return g.apply(this,arguments)}function g(){return(g=f(u.mark((function e(r){var t,n;return u.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.pos,e.next=3,l(r);case 3:if(0!==(n=e.sent)){e.next=6;break}throw new Error("Invalid CAR section (zero length)");case 6:return n+=r.pos-t,e.next=9,m(r);case 9:return e.t0=e.sent,e.t1=n,e.t2=n-(r.pos-t),e.abrupt("return",{cid:e.t0,length:e.t1,blockLength:e.t2});case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function x(e){return k.apply(this,arguments)}function k(){return(k=f(u.mark((function e(r){var t,n,a,o;return u.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w(r);case 2:return t=e.sent,n=t.cid,a=t.blockLength,e.next=7,r.exactly(a);case 7:return o=e.sent,e.abrupt("return",(r.seek(a),{bytes:o,cid:n}));case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function j(e){return O.apply(this,arguments)}function O(){return(O=f(u.mark((function e(r){var t,n,a,o,i,c;return u.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.pos,e.next=3,w(r);case 3:return n=e.sent,a=n.cid,o=n.length,i=n.blockLength,c={cid:a,length:o,blockLength:i,offset:t,blockOffset:r.pos},e.abrupt("return",(r.seek(c.blockLength),c));case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function T(e){var r=0,t=0,n=0,a=new Uint8Array(0),o=function(){var r=f(u.mark((function r(o){var i,c,s,f,l,d;return u.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:t=a.length-n,i=[a.subarray(n)];case 2:if(!(t<o)){r.next=11;break}return r.next=5,e();case 5:if(null!=(c=r.sent)){r.next=8;break}return r.abrupt("break",11);case 8:t<0?c.length>t&&i.push(c.subarray(-t)):i.push(c),t+=c.length;case 9:r.next=2;break;case 11:for(a=new Uint8Array(i.reduce((function(e,r){return e+r.length}),0)),s=0,f=0,l=i;f<l.length;f++)d=l[f],a.set(d,s),s+=d.length;n=0;case 15:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}();return{upTo:function(){var e=f(u.mark((function e(r){return u.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=a.length-n<r,!e.t0){e.next=4;break}return e.next=4,o(r);case 4:return e.abrupt("return",a.subarray(n,n+Math.min(a.length-n,r)));case 5:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}(),exactly:function(e){return f(u.mark((function r(){return u.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(r.t0=a.length-n<e,!r.t0){r.next=4;break}return r.next=4,o(e);case 4:if(!(a.length-n<e)){r.next=6;break}throw new Error("Unexpected end of data");case 6:return r.abrupt("return",a.subarray(n,n+e));case 7:case"end":return r.stop()}}),r)})))()},seek:function(e){r+=e,n+=e},get pos(){return r}}}r.asyncIterableReader=function(e){var r=e[Symbol.asyncIterator]();return T(f(u.mark((function e(){var t;return u.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.next();case 2:return t=e.sent,e.abrupt("return",t.done?null:t.value);case 4:case"end":return e.stop()}}),e)}))))},r.bytesReader=function(e){var r=0;return{upTo:function(){var t=f(u.mark((function t(n){return u.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e.subarray(r,r+Math.min(n,e.length-r)));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),exactly:function(t){return f(u.mark((function n(){return u.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!(t>e.length-r)){n.next=2;break}throw new Error("Unexpected end of data");case 2:return n.abrupt("return",e.subarray(r,r+t));case 3:case"end":return n.stop()}}),n)})))()},seek:function(e){r+=e},get pos(){return r}}},r.chunkReader=T,r.createDecoder=function(e){var r=p(e);return{header:function(){return r},blocks:function(){return y(u.mark((function t(){return u.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,v(r);case 2:return t.next=4,v(e.upTo(8));case 4:if(t.t0=t.sent.length,!(t.t0>0)){t.next=10;break}return t.next=8,x(e);case 8:t.next=2;break;case 10:case"end":return t.stop()}}),t)})))()},blocksIndex:function(){return y(u.mark((function t(){return u.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,v(r);case 2:return t.next=4,v(e.upTo(8));case 4:if(t.t0=t.sent.length,!(t.t0>0)){t.next=10;break}return t.next=8,j(e);case 8:t.next=2;break;case 10:case"end":return t.stop()}}),t)})))()}}},r.readHeader=p},function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=t(5),a=t(9),o=function e(r,t,n,a){p(this,e),this.code=r,this.size=t,this.digest=n,this.bytes=a};r.Digest=o,r.create=function(e,r){var t=r.byteLength,n=a.encodingLength(e),i=n+a.encodingLength(t),c=new Uint8Array(i+t);return a.encodeTo(e,c,0),a.encodeTo(t,c,n),c.set(r,i),new o(e,t,r,c)},r.decode=function(e){var r=n.coerce(e),t=a.decode(r),i=d(t,2),c=i[0],s=i[1],u=a.decode(r.subarray(s)),f=d(u,2),l=f[0],p=f[1],h=r.subarray(s+p);if(h.byteLength!==l)throw new Error("Incorrect length");return new o(c,l,h,r)},r.equals=function(e,r){return e===r||e.code===r.code&&e.size===r.size&&n.equals(e.bytes,r.bytes)}},function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=t(40);r.decode=function(e){return[n.decode(e),n.decode.bytes]},r.encodeTo=function(e,r){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return n.encode(e,r,t),r},r.encodingLength=function(e){return n.encodingLength(e)}},function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=t(44),a=t(4);var o=function(e){if(e&&e.__esModule)return e;var r=Object.create(null);return e&&Object.keys(e).forEach((function(t){if("default"!==t){var n=Object.getOwnPropertyDescriptor(e,t);Object.defineProperty(r,t,n.get?n:{enumerable:!0,get:function(){return e[t]}})}})),r.default=e,Object.freeze(r)}(n),i={float64:!0,typeEncoders:{Object:function(e){if(e.asCID!==e)return null;var r=a.CID.asCID(e);if(!r)return null;var t=new Uint8Array(r.bytes.byteLength+1);return t.set(r.bytes,1),[new o.Token(o.Type.tag,42),new o.Token(o.Type.bytes,t)]},undefined:function(){throw new Error("`undefined` is not supported by the IPLD Data Model and cannot be encoded")},number:function(e){if(Number.isNaN(e))throw new Error("`NaN` is not supported by the IPLD Data Model and cannot be encoded");if(e===1/0||e===-1/0)throw new Error("`Infinity` and `-Infinity` is not supported by the IPLD Data Model and cannot be encoded");return null}}},c={allowIndefinite:!1,allowUndefined:!1,allowNaN:!1,allowInfinity:!1,allowBigInt:!0,strict:!0,useMaps:!1,tags:[]};c.tags[42]=function(e){if(0!==e[0])throw new Error("Invalid CID for CBOR tag 42; expected leading 0x00");return a.CID.decode(e.subarray(1))},r.code=113,r.decode=function(e){return o.decode(e,c)},r.encode=function(e){return o.encode(e,i)},r.name="dag-cbor"},function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=t(1),a=t(2),o=t(3),i=t(6);function c(e,r,t,o){a.assertEnoughData(e,r,t+o);var c=i.slice(e,r+t,r+t+o);return new n.Token(n.Type.bytes,c,t+o)}function s(e){return void 0===e.encodedBytes&&(e.encodedBytes=e.type===n.Type.string?i.fromString(e.value):e.value),e.encodedBytes}function u(e,r){var t=s(r);o.encodeUintValue(e,r.type.majorEncoded,t.length),e.push(t)}function f(e,r){return e.length<r.length?-1:e.length>r.length?1:i.compare(e,r)}u.encodedSize=function(e){var r=s(e);return o.encodeUintValue.encodedSize(r.length)+r.length},u.compareTokens=function(e,r){return f(s(e),s(r))},r.compareBytes=f,r.decodeBytes16=function(e,r,t,n){return c(e,r,3,o.readUint16(e,r+1,n))},r.decodeBytes32=function(e,r,t,n){return c(e,r,5,o.readUint32(e,r+1,n))},r.decodeBytes64=function(e,r,t,n){var i=o.readUint64(e,r+1,n);if("bigint"==typeof i)throw new Error(a.decodeErrPrefix+" 64-bit integer bytes lengths not supported");return c(e,r,9,i)},r.decodeBytes8=function(e,r,t,n){return c(e,r,2,o.readUint8(e,r+1,n))},r.decodeBytesCompact=function(e,r,t,n){return c(e,r,1,t)},r.encodeBytes=u},function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=t(35),a=t(63);r.TreewalkCarSplitter=n.TreewalkCarSplitter,r.TreewalkCarJoiner=a.TreewalkCarJoiner},function(e,r,t){"use strict";var n,a=function(){var e={};return function(r){if(void 0===e[r]){var t=document.querySelector(r);if(window.HTMLIFrameElement&&t instanceof window.HTMLIFrameElement)try{t=t.contentDocument.head}catch(e){t=null}e[r]=t}return e[r]}}(),o=[];function i(e){for(var r=-1,t=0;t<o.length;t++)if(o[t].identifier===e){r=t;break}return r}function c(e,r){for(var t={},n=[],a=0;a<e.length;a++){var c=e[a],s=r.base?c[0]+r.base:c[0],u=t[s]||0,f="".concat(s," ").concat(u);t[s]=u+1;var l=i(f),d={css:c[1],media:c[2],sourceMap:c[3]};-1!==l?(o[l].references++,o[l].updater(d)):o.push({identifier:f,updater:m(d,r),references:1}),n.push(f)}return n}function s(e){var r=document.createElement("style"),n=e.attributes||{};if(void 0===n.nonce){var o=t.nc;o&&(n.nonce=o)}if(Object.keys(n).forEach((function(e){r.setAttribute(e,n[e])})),"function"==typeof e.insert)e.insert(r);else{var i=a(e.insert||"head");if(!i)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");i.appendChild(r)}return r}var u,f=(u=[],function(e,r){return u[e]=r,u.filter(Boolean).join("\n")});function l(e,r,t,n){var a=t?"":n.media?"@media ".concat(n.media," {").concat(n.css,"}"):n.css;if(e.styleSheet)e.styleSheet.cssText=f(r,a);else{var o=document.createTextNode(a),i=e.childNodes;i[r]&&e.removeChild(i[r]),i.length?e.insertBefore(o,i[r]):e.appendChild(o)}}function d(e,r,t){var n=t.css,a=t.media,o=t.sourceMap;if(a?e.setAttribute("media",a):e.removeAttribute("media"),o&&"undefined"!=typeof btoa&&(n+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(o))))," */")),e.styleSheet)e.styleSheet.cssText=n;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(n))}}var p=null,h=0;function m(e,r){var t,n,a;if(r.singleton){var o=h++;t=p||(p=s(r)),n=l.bind(null,t,o,!1),a=l.bind(null,t,o,!0)}else t=s(r),n=d.bind(null,t,r),a=function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(t)};return n(e),function(r){if(r){if(r.css===e.css&&r.media===e.media&&r.sourceMap===e.sourceMap)return;n(e=r)}else a()}}e.exports=function(e,r){(r=r||{}).singleton||"boolean"==typeof r.singleton||(r.singleton=(void 0===n&&(n=Boolean(window&&document&&document.all&&!window.atob)),n));var t=c(e=e||[],r);return function(e){if(e=e||[],"[object Array]"===Object.prototype.toString.call(e)){for(var n=0;n<t.length;n++){var a=i(t[n]);o[a].references--}for(var s=c(e,r),u=0;u<t.length;u++){var f=i(t[u]);0===o[f].references&&(o[f].updater(),o.splice(f,1))}t=s}}}},function(e,r,t){"use strict";e.exports=function(e){var r=[];return r.toString=function(){return this.map((function(r){var t=function(e,r){var t,n,a,o=e[1]||"",i=e[3];if(!i)return o;if(r&&"function"==typeof btoa){var c=(t=i,n=btoa(unescape(encodeURIComponent(JSON.stringify(t)))),a="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(n),"/*# ".concat(a," */")),s=i.sources.map((function(e){return"/*# sourceURL=".concat(i.sourceRoot||"").concat(e," */")}));return[o].concat(s).concat([c]).join("\n")}return[o].join("\n")}(r,e);return r[2]?"@media ".concat(r[2]," {").concat(t,"}"):t})).join("")},r.i=function(e,t,n){"string"==typeof e&&(e=[[null,e,""]]);var a={};if(n)for(var o=0;o<this.length;o++){var i=this[o][0];null!=i&&(a[i]=!0)}for(var c=0;c<e.length;c++){var s=[].concat(e[c]);n&&a[s[0]]||(t&&(s[2]?s[2]="".concat(t," and ").concat(s[2]):s[2]=t),r.push(s))}},r}},function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=t(36),a=t(49),o=t(50),i=t(51),c=t(54);r.CarReader=n.CarReader,r.CarIndexer=a.CarIndexer,r.CarBlockIterator=o.CarBlockIterator,r.CarCIDIterator=o.CarCIDIterator,r.CarWriter=i.CarWriter,r.CarIndexedReader=c.CarIndexedReader},function(e,r,t){e.exports={encode:t(37),decode:t(38),encodingLength:t(39)}},function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=t(42),a=t(5),o=function(){function e(r,t,n){p(this,e),this.name=r,this.prefix=t,this.baseEncode=n}return h(e,[{key:"encode",value:function(e){if(e instanceof Uint8Array)return"".concat(this.prefix).concat(this.baseEncode(e));throw Error("Unknown type, must be binary type")}}]),e}(),i=function(){function e(r,t,n){p(this,e),this.name=r,this.prefix=t,this.baseDecode=n}return h(e,[{key:"decode",value:function(e){if("string"!=typeof e)throw Error("Can only multibase decode strings");switch(e[0]){case this.prefix:return this.baseDecode(e.slice(1));default:throw Error("Unable to decode multibase string ".concat(JSON.stringify(e),", ").concat(this.name," decoder only supports inputs prefixed with ").concat(this.prefix))}}},{key:"or",value:function(e){var r=s(c({},this.prefix,this),e.decoders||c({},e.prefix,e));return new u(r)}}]),e}(),u=function(){function e(r){p(this,e),this.decoders=r}return h(e,[{key:"or",value:function(r){var t=r.decoders||c({},r.prefix,r);return new e(s(s({},this.decoders),t))}},{key:"decode",value:function(e){var r=e[0],t=this.decoders[r];if(t)return t.decode(e);throw RangeError("Unable to decode multibase string ".concat(JSON.stringify(e),", only inputs prefixed with ").concat(Object.keys(this.decoders)," are supported"))}}]),e}(),f=function(){function e(r,t,n,a){p(this,e),this.name=r,this.prefix=t,this.baseEncode=n,this.baseDecode=a,this.encoder=new o(r,t,n),this.decoder=new i(r,t,a)}return h(e,[{key:"encode",value:function(e){return this.encoder.encode(e)}},{key:"decode",value:function(e){return this.decoder.decode(e)}}]),e}(),l=function(e){var r=e.name,t=e.prefix,n=e.encode,a=e.decode;return new f(r,t,n,a)};r.Codec=f,r.baseX=function(e){var r=e.prefix,t=e.name,o=e.alphabet,i=n(o,t),c=i.encode,s=i.decode;return l({prefix:r,name:t,encode:c,decode:function(e){return a.coerce(s(e))}})},r.from=l,r.rfc4648=function(e){var r=e.name,t=e.prefix,n=e.bitsPerChar,a=e.alphabet;return l({prefix:t,name:r,encode:function(e){return function(e,r,t){for(var n="="===r[r.length-1],a=(1<<t)-1,o="",i=0,c=0,s=0;s<e.length;++s)for(c=c<<8|e[s],i+=8;i>t;)o+=r[a&c>>(i-=t)];if(i&&(o+=r[a&c<<t-i]),n)for(;o.length*t&7;)o+="=";return o}(e,a,n)},decode:function(e){return function(e,r,t,n){for(var a={},o=0;o<r.length;++o)a[r[o]]=o;for(var i=e.length;"="===e[i-1];)--i;for(var c=new Uint8Array(i*t/8|0),s=0,u=0,f=0,l=0;l<i;++l){var d=a[e[l]];if(void 0===d)throw new SyntaxError("Non-".concat(n," character"));u=u<<t|d,(s+=t)>=8&&(s-=8,c[f++]=255&u>>s)}if(s>=t||255&u<<8-s)throw new SyntaxError("Unexpected end of data");return c}(e,a,n,r)}})}},function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=t(1),a=t(3),o=t(19),i=t(11),c=t(20),s=t(21),u=t(22),f=t(23),l=t(24),d=t(2),p=t(6);function h(e,r,t){throw new Error("".concat(d.decodeErrPrefix," encountered invalid minor (").concat(t,") for major ").concat(e[r]>>>5))}function m(e){return function(){throw new Error("".concat(d.decodeErrPrefix," ").concat(e))}}for(var b=[],v=0;v<=23;v++)b[v]=h;b[24]=a.decodeUint8,b[25]=a.decodeUint16,b[26]=a.decodeUint32,b[27]=a.decodeUint64,b[28]=h,b[29]=h,b[30]=h,b[31]=h;for(var y=32;y<=55;y++)b[y]=h;b[56]=o.decodeNegint8,b[57]=o.decodeNegint16,b[58]=o.decodeNegint32,b[59]=o.decodeNegint64,b[60]=h,b[61]=h,b[62]=h,b[63]=h;for(var w=64;w<=87;w++)b[w]=i.decodeBytesCompact;b[88]=i.decodeBytes8,b[89]=i.decodeBytes16,b[90]=i.decodeBytes32,b[91]=i.decodeBytes64,b[92]=h,b[93]=h,b[94]=h,b[95]=m("indefinite length bytes/strings are not supported");for(var g=96;g<=119;g++)b[g]=c.decodeStringCompact;b[120]=c.decodeString8,b[121]=c.decodeString16,b[122]=c.decodeString32,b[123]=c.decodeString64,b[124]=h,b[125]=h,b[126]=h,b[127]=m("indefinite length bytes/strings are not supported");for(var x=128;x<=151;x++)b[x]=s.decodeArrayCompact;b[152]=s.decodeArray8,b[153]=s.decodeArray16,b[154]=s.decodeArray32,b[155]=s.decodeArray64,b[156]=h,b[157]=h,b[158]=h,b[159]=s.decodeArrayIndefinite;for(var k=160;k<=183;k++)b[k]=u.decodeMapCompact;b[184]=u.decodeMap8,b[185]=u.decodeMap16,b[186]=u.decodeMap32,b[187]=u.decodeMap64,b[188]=h,b[189]=h,b[190]=h,b[191]=u.decodeMapIndefinite;for(var j=192;j<=215;j++)b[j]=f.decodeTagCompact;b[216]=f.decodeTag8,b[217]=f.decodeTag16,b[218]=f.decodeTag32,b[219]=f.decodeTag64,b[220]=h,b[221]=h,b[222]=h,b[223]=h;for(var O=224;O<=243;O++)b[O]=m("simple values are not supported");b[244]=h,b[245]=h,b[246]=h,b[247]=l.decodeUndefined,b[248]=m("simple values are not supported"),b[249]=l.decodeFloat16,b[250]=l.decodeFloat32,b[251]=l.decodeFloat64,b[252]=h,b[253]=h,b[254]=h,b[255]=l.decodeBreak;for(var T=[],E=0;E<24;E++)T[E]=new n.Token(n.Type.uint,E,1);for(var C=-1;C>=-24;C--)T[31-C]=new n.Token(n.Type.negint,C,1);T[64]=new n.Token(n.Type.bytes,new Uint8Array(0),1),T[96]=new n.Token(n.Type.string,"",1),T[128]=new n.Token(n.Type.array,0,1),T[160]=new n.Token(n.Type.map,0,1),T[244]=new n.Token(n.Type.false,!1,1),T[245]=new n.Token(n.Type.true,!0,1),T[246]=new n.Token(n.Type.null,null,1),r.jump=b,r.quick=T,r.quickEncodeToken=function(e){switch(e.type){case n.Type.false:return p.fromArray([244]);case n.Type.true:return p.fromArray([245]);case n.Type.null:return p.fromArray([246]);case n.Type.bytes:return e.value.length?void 0:p.fromArray([64]);case n.Type.string:return""===e.value?p.fromArray([96]):void 0;case n.Type.array:return 0===e.value?p.fromArray([128]):void 0;case n.Type.map:return 0===e.value?p.fromArray([160]):void 0;case n.Type.uint:return e.value<24?p.fromArray([Number(e.value)]):void 0;case n.Type.negint:if(e.value>=-24)return p.fromArray([31-Number(e.value)])}}},function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=t(1),a=t(3),o=t(2),i=BigInt(-1),c=BigInt(1);function s(e,r){var t=r.value,n="bigint"==typeof t?t*i-c:-1*t-1;a.encodeUintValue(e,r.type.majorEncoded,n)}s.encodedSize=function(e){var r=e.value,t="bigint"==typeof r?r*i-c:-1*r-1;return t<a.uintBoundaries[0]?1:t<a.uintBoundaries[1]?2:t<a.uintBoundaries[2]?3:t<a.uintBoundaries[3]?5:9},s.compareTokens=function(e,r){return e.value<r.value?1:e.value>r.value?-1:0},r.decodeNegint16=function(e,r,t,o){return new n.Token(n.Type.negint,-1-a.readUint16(e,r+1,o),3)},r.decodeNegint32=function(e,r,t,o){return new n.Token(n.Type.negint,-1-a.readUint32(e,r+1,o),5)},r.decodeNegint64=function(e,r,t,c){var s=a.readUint64(e,r+1,c);if("bigint"!=typeof s){var u=-1-s;if(u>=Number.MIN_SAFE_INTEGER)return new n.Token(n.Type.negint,u,9)}if(!0!==c.allowBigInt)throw new Error(o.decodeErrPrefix+" integers outside of the safe integer range are not supported");return new n.Token(n.Type.negint,i-BigInt(s),9)},r.decodeNegint8=function(e,r,t,o){return new n.Token(n.Type.negint,-1-a.readUint8(e,r+1,o),2)},r.encodeNegint=s},function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=t(1),a=t(2),o=t(3),i=t(11),c=t(6);function s(e,r,t,o){var i=t+o;return a.assertEnoughData(e,r,i),new n.Token(n.Type.string,c.toString(e,r+t,r+i),i)}var u=i.encodeBytes;r.decodeString16=function(e,r,t,n){return s(e,r,3,o.readUint16(e,r+1,n))},r.decodeString32=function(e,r,t,n){return s(e,r,5,o.readUint32(e,r+1,n))},r.decodeString64=function(e,r,t,n){var i=o.readUint64(e,r+1,n);if("bigint"==typeof i)throw new Error(a.decodeErrPrefix+" 64-bit integer string lengths not supported");return s(e,r,9,i)},r.decodeString8=function(e,r,t,n){return s(e,r,2,o.readUint8(e,r+1,n))},r.decodeStringCompact=function(e,r,t,n){return s(e,r,1,t)},r.encodeString=u},function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=t(1),a=t(3),o=t(2);function i(e,r,t,a){return new n.Token(n.Type.array,a,t)}function c(e,r){a.encodeUintValue(e,n.Type.array.majorEncoded,r.value)}c.compareTokens=a.encodeUint.compareTokens,r.decodeArray16=function(e,r,t,n){return i(0,0,3,a.readUint16(e,r+1,n))},r.decodeArray32=function(e,r,t,n){return i(0,0,5,a.readUint32(e,r+1,n))},r.decodeArray64=function(e,r,t,n){var c=a.readUint64(e,r+1,n);if("bigint"==typeof c)throw new Error(o.decodeErrPrefix+" 64-bit integer array lengths not supported");return i(0,0,9,c)},r.decodeArray8=function(e,r,t,n){return i(0,0,2,a.readUint8(e,r+1,n))},r.decodeArrayCompact=function(e,r,t,n){return i(0,0,1,t)},r.decodeArrayIndefinite=function(e,r,t,n){if(!1===n.allowIndefinite)throw new Error(o.decodeErrPrefix+" indefinite length items not allowed");return i(0,0,1,1/0)},r.encodeArray=c},function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=t(1),a=t(3),o=t(2);function i(e,r,t,a){return new n.Token(n.Type.map,a,t)}function c(e,r){a.encodeUintValue(e,n.Type.map.majorEncoded,r.value)}c.compareTokens=a.encodeUint.compareTokens,r.decodeMap16=function(e,r,t,n){return i(0,0,3,a.readUint16(e,r+1,n))},r.decodeMap32=function(e,r,t,n){return i(0,0,5,a.readUint32(e,r+1,n))},r.decodeMap64=function(e,r,t,n){var c=a.readUint64(e,r+1,n);if("bigint"==typeof c)throw new Error(o.decodeErrPrefix+" 64-bit integer map lengths not supported");return i(0,0,9,c)},r.decodeMap8=function(e,r,t,n){return i(0,0,2,a.readUint8(e,r+1,n))},r.decodeMapCompact=function(e,r,t,n){return i(0,0,1,t)},r.decodeMapIndefinite=function(e,r,t,n){if(!1===n.allowIndefinite)throw new Error(o.decodeErrPrefix+" indefinite length items not allowed");return i(0,0,1,1/0)},r.encodeMap=c},function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=t(1),a=t(3);function o(e,r){a.encodeUintValue(e,n.Type.tag.majorEncoded,r.value)}o.compareTokens=a.encodeUint.compareTokens,r.decodeTag16=function(e,r,t,o){return new n.Token(n.Type.tag,a.readUint16(e,r+1,o),3)},r.decodeTag32=function(e,r,t,o){return new n.Token(n.Type.tag,a.readUint32(e,r+1,o),5)},r.decodeTag64=function(e,r,t,o){return new n.Token(n.Type.tag,a.readUint64(e,r+1,o),9)},r.decodeTag8=function(e,r,t,o){return new n.Token(n.Type.tag,a.readUint8(e,r+1,o),2)},r.decodeTagCompact=function(e,r,t,a){return new n.Token(n.Type.tag,t,1)},r.encodeTag=o},function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=t(1),a=t(2),o=t(3);function i(e,r,t){if(t){if(!1===t.allowNaN&&Number.isNaN(e))throw new Error(a.decodeErrPrefix+" NaN values are not supported");if(!1===t.allowInfinity&&(e===1/0||e===-1/0))throw new Error(a.decodeErrPrefix+" Infinity values are not supported")}return new n.Token(n.Type.float,e,r)}function c(e,r,t){var a,o=r.value;if(!1===o)e.push([20|n.Type.float.majorEncoded]);else if(!0===o)e.push([21|n.Type.float.majorEncoded]);else if(null===o)e.push([22|n.Type.float.majorEncoded]);else if(void 0===o)e.push([23|n.Type.float.majorEncoded]);else{var i=!1;t&&!0===t.float64||(l(o),o===d(f,1)||Number.isNaN(o)?(f[0]=249,e.push(f.slice(0,3)),i=!0):(p(o),o===h(f,1)&&(f[0]=250,e.push(f.slice(0,5)),i=!0))),i||(a=o,u.setFloat64(0,a,!1),m(f,1),f[0]=251,e.push(f.slice(0,9)))}}c.encodedSize=function(e,r){var t=e.value;if(!1===t||!0===t||null==t)return 1;if(!r||!0!==r.float64){if(l(t),t===d(f,1)||Number.isNaN(t))return 3;if(p(t),t===h(f,1))return 5}return 9};var s=new ArrayBuffer(9),u=new DataView(s,1),f=new Uint8Array(s,0);function l(e){if(e===1/0)u.setUint16(0,31744,!1);else if(e===-1/0)u.setUint16(0,64512,!1);else if(Number.isNaN(e))u.setUint16(0,32256,!1);else{u.setFloat32(0,e);var r=u.getUint32(0),t=(2139095040&r)>>23,n=8388607&r;if(255===t)u.setUint16(0,31744,!1);else if(0===t)u.setUint16(0,(2147483648&e)>>16|n>>13,!1);else{var a=t-127;a<-24?u.setUint16(0,0):a<-14?u.setUint16(0,(2147483648&r)>>16|1<<24+a,!1):u.setUint16(0,(2147483648&r)>>16|a+15<<10|n>>13,!1)}}}function d(e,r){if(e.length-r<2)throw new Error(a.decodeErrPrefix+" not enough data for float16");var t=(e[r]<<8)+e[r+1];if(31744===t)return 1/0;if(64512===t)return-1/0;if(32256===t)return NaN;var n,o=t>>10&31,i=1023&t;return n=0===o?i*Math.pow(2,-24):31!==o?(i+1024)*Math.pow(2,o-25):0===i?1/0:NaN,32768&t?-n:n}function p(e){u.setFloat32(0,e,!1)}function h(e,r){if(e.length-r<4)throw new Error(a.decodeErrPrefix+" not enough data for float32");var t=(e.byteOffset||0)+r;return new DataView(e.buffer,t,4).getFloat32(0,!1)}function m(e,r){if(e.length-r<8)throw new Error(a.decodeErrPrefix+" not enough data for float64");var t=(e.byteOffset||0)+r;return new DataView(e.buffer,t,8).getFloat64(0,!1)}c.compareTokens=o.encodeUint.compareTokens,r.decodeBreak=function(e,r,t,o){if(!1===o.allowIndefinite)throw new Error(a.decodeErrPrefix+" indefinite length items not allowed");return new n.Token(n.Type.break,void 0,1)},r.decodeFloat16=function(e,r,t,n){return i(d(e,r+1),3,n)},r.decodeFloat32=function(e,r,t,n){return i(h(e,r+1),5,n)},r.decodeFloat64=function(e,r,t,n){return i(m(e,r+1),9,n)},r.decodeUndefined=function(e,r,t,o){if(!1===o.allowUndefined)throw new Error(a.decodeErrPrefix+" undefined values are not supported");return new n.Token(n.Type.undefined,void 0,1)},r.encodeFloat=c},function(e,r){},function(e,r){e.exports=t(139)},function(e,r,t){"use strict";var n=t(32),c=["Failed to fetch","NetworkError when attempting to fetch resource.","The Internet connection appears to be offline.","Network request failed"],l=function(e){a(t,e);var r=o(t);function t(e){var n;return p(this,t),n=r.call(this),e instanceof Error?(n.originalError=e,e=e.message):(n.originalError=new Error(e),n.originalError.stack=n.stack),n.name="AbortError",n.message=e,n}return t}(i(Error)),d=function(e,r){return new Promise((function(t,a){r=s({onFailedAttempt:function(){},retries:10},r);var o=n.operation(r);o.attempt(function(){var n=f(u.mark((function n(i){var s;return u.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.t0=t,n.next=4,e(i);case 4:n.t1=n.sent,(0,n.t0)(n.t1),n.next=30;break;case 8:if(n.prev=8,n.t2=n.catch(0),n.t2 instanceof Error){n.next=12;break}return n.abrupt("return",void a(new TypeError('Non-error was thrown: "'.concat(n.t2,'". You should only throw errors.'))));case 12:if(!(n.t2 instanceof l)){n.next=16;break}o.stop(),a(n.t2.originalError),n.next=30;break;case 16:if(!(n.t2 instanceof TypeError)||(s=n.t2.message,c.includes(s))){n.next=20;break}o.stop(),a(n.t2),n.next=30;break;case 20:return function(e,r,t){var n=t.retries-(r-1);e.attemptNumber=r,e.retriesLeft=n}(n.t2,i,r),n.prev=21,n.next=24,r.onFailedAttempt(n.t2);case 24:n.next=29;break;case 26:return n.prev=26,n.t3=n.catch(21),n.abrupt("return",void a(n.t3));case 29:o.retry(n.t2)||a(o.mainError());case 30:case"end":return n.stop()}}),n,null,[[0,8],[21,26]])})));return function(e){return n.apply(this,arguments)}}())}))};e.exports=d,e.exports.default=d,e.exports.AbortError=l},function(e,r,t){var n=t(13),a=t(29);"string"==typeof(a=a.__esModule?a.default:a)&&(a=[[e.i,a,""]]);n(a,{insert:"head",singleton:!1}),e.exports=a.locals||{}},function(e,r,t){(r=t(14)(!1)).push([e.i,".upload__form {\n  max-width: 600px;\n}\n\n.upload_message {\n  overflow-wrap: break-word;\n}\n\n.upload__frame {\n  width: 100%;\n  min-height: 400px;\n  display:block;\n  position: relative;\n  border: solid white 3px;\n}\n\n.upload__placeholder , .upload__artwork {\n  background-color: transparent;\n  display: block;\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  max-height: 100%;\n  max-width: 100%;\n  transform: translate(-50%, -50%);\n}\n\ninput#file_input {\n  display: none;\n}\n\n.upload__btn {\n    margin: 1.0rem;\n}\n",""]),e.exports=r},function(e,r,t){var n=t(13),a=t(31);"string"==typeof(a=a.__esModule?a.default:a)&&(a=[[e.i,a,""]]);n(a,{insert:"head",singleton:!1}),e.exports=a.locals||{}},function(e,r,t){(r=t(14)(!1)).push([e.i,".loader {\n    color: #1e5050;\n    font-size: 20px;\n    margin: 100px auto;\n    width: 1em;\n    height: 1em;\n    border-radius: 50%;\n    position: relative;\n    text-indent: -9999em;\n    -webkit-animation: load4 1.3s infinite linear;\n    animation: load4 1.3s infinite linear;\n    -webkit-transform: translateZ(0);\n    -ms-transform: translateZ(0);\n    transform: translateZ(0);\n  }\n  @-webkit-keyframes load4 {\n    0%,\n    100% {\n      box-shadow: 0 -3em 0 0.2em, 2em -2em 0 0em, 3em 0 0 -1em, 2em 2em 0 -1em, 0 3em 0 -1em, -2em 2em 0 -1em, -3em 0 0 -1em, -2em -2em 0 0;\n    }\n    12.5% {\n      box-shadow: 0 -3em 0 0, 2em -2em 0 0.2em, 3em 0 0 0, 2em 2em 0 -1em, 0 3em 0 -1em, -2em 2em 0 -1em, -3em 0 0 -1em, -2em -2em 0 -1em;\n    }\n    25% {\n      box-shadow: 0 -3em 0 -0.5em, 2em -2em 0 0, 3em 0 0 0.2em, 2em 2em 0 0, 0 3em 0 -1em, -2em 2em 0 -1em, -3em 0 0 -1em, -2em -2em 0 -1em;\n    }\n    37.5% {\n      box-shadow: 0 -3em 0 -1em, 2em -2em 0 -1em, 3em 0em 0 0, 2em 2em 0 0.2em, 0 3em 0 0em, -2em 2em 0 -1em, -3em 0em 0 -1em, -2em -2em 0 -1em;\n    }\n    50% {\n      box-shadow: 0 -3em 0 -1em, 2em -2em 0 -1em, 3em 0 0 -1em, 2em 2em 0 0em, 0 3em 0 0.2em, -2em 2em 0 0, -3em 0em 0 -1em, -2em -2em 0 -1em;\n    }\n    62.5% {\n      box-shadow: 0 -3em 0 -1em, 2em -2em 0 -1em, 3em 0 0 -1em, 2em 2em 0 -1em, 0 3em 0 0, -2em 2em 0 0.2em, -3em 0 0 0, -2em -2em 0 -1em;\n    }\n    75% {\n      box-shadow: 0em -3em 0 -1em, 2em -2em 0 -1em, 3em 0em 0 -1em, 2em 2em 0 -1em, 0 3em 0 -1em, -2em 2em 0 0, -3em 0em 0 0.2em, -2em -2em 0 0;\n    }\n    87.5% {\n      box-shadow: 0em -3em 0 0, 2em -2em 0 -1em, 3em 0 0 -1em, 2em 2em 0 -1em, 0 3em 0 -1em, -2em 2em 0 0, -3em 0em 0 0, -2em -2em 0 0.2em;\n    }\n  }\n  @keyframes load4 {\n    0%,\n    100% {\n      box-shadow: 0 -3em 0 0.2em, 2em -2em 0 0em, 3em 0 0 -1em, 2em 2em 0 -1em, 0 3em 0 -1em, -2em 2em 0 -1em, -3em 0 0 -1em, -2em -2em 0 0;\n    }\n    12.5% {\n      box-shadow: 0 -3em 0 0, 2em -2em 0 0.2em, 3em 0 0 0, 2em 2em 0 -1em, 0 3em 0 -1em, -2em 2em 0 -1em, -3em 0 0 -1em, -2em -2em 0 -1em;\n    }\n    25% {\n      box-shadow: 0 -3em 0 -0.5em, 2em -2em 0 0, 3em 0 0 0.2em, 2em 2em 0 0, 0 3em 0 -1em, -2em 2em 0 -1em, -3em 0 0 -1em, -2em -2em 0 -1em;\n    }\n    37.5% {\n      box-shadow: 0 -3em 0 -1em, 2em -2em 0 -1em, 3em 0em 0 0, 2em 2em 0 0.2em, 0 3em 0 0em, -2em 2em 0 -1em, -3em 0em 0 -1em, -2em -2em 0 -1em;\n    }\n    50% {\n      box-shadow: 0 -3em 0 -1em, 2em -2em 0 -1em, 3em 0 0 -1em, 2em 2em 0 0em, 0 3em 0 0.2em, -2em 2em 0 0, -3em 0em 0 -1em, -2em -2em 0 -1em;\n    }\n    62.5% {\n      box-shadow: 0 -3em 0 -1em, 2em -2em 0 -1em, 3em 0 0 -1em, 2em 2em 0 -1em, 0 3em 0 0, -2em 2em 0 0.2em, -3em 0 0 0, -2em -2em 0 -1em;\n    }\n    75% {\n      box-shadow: 0em -3em 0 -1em, 2em -2em 0 -1em, 3em 0em 0 -1em, 2em 2em 0 -1em, 0 3em 0 -1em, -2em 2em 0 0, -3em 0em 0 0.2em, -2em -2em 0 0;\n    }\n    87.5% {\n      box-shadow: 0em -3em 0 0, 2em -2em 0 -1em, 3em 0 0 -1em, 2em 2em 0 -1em, 0 3em 0 -1em, -2em 2em 0 0, -3em 0em 0 0, -2em -2em 0 0.2em;\n    }\n  }\n  ",""]),e.exports=r},function(e,r,t){e.exports=t(33)},function(e,r,t){var n=t(34);r.operation=function(e){var t=r.timeouts(e);return new n(t,{forever:e&&(e.forever||e.retries===1/0),unref:e&&e.unref,maxRetryTime:e&&e.maxRetryTime})},r.timeouts=function(e){if(e instanceof Array)return[].concat(e);var r={retries:10,factor:2,minTimeout:1e3,maxTimeout:1/0,randomize:!1};for(var t in e)r[t]=e[t];if(r.minTimeout>r.maxTimeout)throw new Error("minTimeout is greater than maxTimeout");for(var n=[],a=0;a<r.retries;a++)n.push(this.createTimeout(a,r));return e&&e.forever&&!n.length&&n.push(this.createTimeout(a,r)),n.sort((function(e,r){return e-r})),n},r.createTimeout=function(e,r){var t=r.randomize?Math.random()+1:1,n=Math.round(t*Math.max(r.minTimeout,1)*Math.pow(r.factor,e));return Math.min(n,r.maxTimeout)},r.wrap=function(e,t,n){if(t instanceof Array&&(n=t,t=null),!n)for(var a in n=[],e)"function"==typeof e[a]&&n.push(a);for(var o=0;o<n.length;o++){var i=n[o],c=e[i];e[i]=function(n){var a=r.operation(t),o=Array.prototype.slice.call(arguments,1),i=o.pop();o.push((function(e){a.retry(e)||(e&&(arguments[0]=a.mainError()),i.apply(this,arguments))})),a.attempt((function(){n.apply(e,o)}))}.bind(e,c),e[i].options=t}}},function(e,r){function t(e,r){"boolean"==typeof r&&(r={forever:r}),this._originalTimeouts=JSON.parse(JSON.stringify(e)),this._timeouts=e,this._options=r||{},this._maxRetryTime=r&&r.maxRetryTime||1/0,this._fn=null,this._errors=[],this._attempts=1,this._operationTimeout=null,this._operationTimeoutCb=null,this._timeout=null,this._operationStart=null,this._timer=null,this._options.forever&&(this._cachedTimeouts=this._timeouts.slice(0))}e.exports=t,t.prototype.reset=function(){this._attempts=1,this._timeouts=this._originalTimeouts.slice(0)},t.prototype.stop=function(){this._timeout&&clearTimeout(this._timeout),this._timer&&clearTimeout(this._timer),this._timeouts=[],this._cachedTimeouts=null},t.prototype.retry=function(e){if(this._timeout&&clearTimeout(this._timeout),!e)return!1;var r=(new Date).getTime();if(e&&r-this._operationStart>=this._maxRetryTime)return this._errors.push(e),this._errors.unshift(new Error("RetryOperation timeout occurred")),!1;this._errors.push(e);var t=this._timeouts.shift();if(void 0===t){if(!this._cachedTimeouts)return!1;this._errors.splice(0,this._errors.length-1),t=this._cachedTimeouts.slice(-1)}var n=this;return this._timer=setTimeout((function(){n._attempts++,n._operationTimeoutCb&&(n._timeout=setTimeout((function(){n._operationTimeoutCb(n._attempts)}),n._operationTimeout),n._options.unref&&n._timeout.unref()),n._fn(n._attempts)}),t),this._options.unref&&this._timer.unref(),!0},t.prototype.attempt=function(e,r){this._fn=e,r&&(r.timeout&&(this._operationTimeout=r.timeout),r.cb&&(this._operationTimeoutCb=r.cb));var t=this;this._operationTimeoutCb&&(this._timeout=setTimeout((function(){t._operationTimeoutCb()}),t._operationTimeout)),this._operationStart=(new Date).getTime(),this._fn(this._attempts)},t.prototype.try=function(e){console.log("Using RetryOperation.try() is deprecated"),this.attempt(e)},t.prototype.start=function(e){console.log("Using RetryOperation.start() is deprecated"),this.attempt(e)},t.prototype.start=t.prototype.try,t.prototype.errors=function(){return this._errors},t.prototype.attempts=function(){return this._attempts},t.prototype.mainError=function(){if(0===this._errors.length)return null;for(var e={},r=null,t=0,n=0;n<this._errors.length;n++){var a=this._errors[n],o=a.message,i=(e[o]||0)+1;e[o]=i,i>=t&&(r=a,t=i)}return r}},function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var a=t(15),o=t(55),i=t(58),c=t(10),s=t(59);function m(e){if(e&&e.__esModule)return e;var r=Object.create(null);return e&&Object.keys(e).forEach((function(t){if("default"!==t){var n=Object.getOwnPropertyDescriptor(e,t);Object.defineProperty(r,t,n.get?n:{enumerable:!0,get:function(){return e[t]}})}})),r.default=e,Object.freeze(r)}var w=m(i),g=m(c),x=m(s),k=function(){function e(r,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(p(this,e),"number"!=typeof t||t<=0)throw new Error("invalid target chunk size");this._reader=r,this._targetSize=t,this._decoders=[x,w,g].concat(n(a.decoders||[]))}return h(e,[{key:"cars",value:function(){var e=this;return y(u.mark((function r(){var t,n,a,o,i,c,s,f,l;return u.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,v(e._reader.getRoots());case 2:if(1===(t=r.sent).length){r.next=5;break}throw new Error("unexpected number of roots: "+t.length);case 5:a=!0,o=!1,r.prev=7,c=b(e._cars(t[0]));case 9:return r.next=11,v(c.next());case 11:return s=r.sent,a=s.done,r.next=15,v(s.value);case 15:if(f=r.sent,a){r.next=26;break}if(n=(l=f).channel,r.t0=l.out,!r.t0){r.next=23;break}return r.next=23,l.out;case 23:a=!0,r.next=9;break;case 26:r.next=32;break;case 28:r.prev=28,r.t1=r.catch(7),o=!0,i=r.t1;case 32:if(r.prev=32,r.prev=33,a||null==c.return){r.next=37;break}return r.next=37,v(c.return());case 37:if(r.prev=37,!o){r.next=40;break}throw i;case 40:return r.finish(37);case 41:return r.finish(32);case 42:if(n){r.next=44;break}throw new Error("missing CAR writer channel");case 44:return n.writer.close(),r.next=47,n.out;case 47:case"end":return r.stop()}}),r,null,[[7,28,32,42],[33,,37,41]])})))()}},{key:"_get",value:function(){var e=f(u.mark((function e(r){var t,n,a;return u.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._reader.get(r);case 2:if(t=e.sent){e.next=5;break}throw new Error("missing block for "+r);case 5:if(n=t.bytes,a=this._decoders.find((function(e){return e.code===r.code}))){e.next=8;break}throw new Error("missing decoder for "+r.code);case 8:return e.abrupt("return",new o.Block({cid:r,bytes:n,value:a.decode(n)}));case 9:case"end":return e.stop()}}),e,this)})));return function(r){return e.apply(this,arguments)}}()},{key:"_cars",value:function(e){var r=this,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2?arguments[2]:void 0;return y(u.mark((function o(){var i,c,s,f,p,h,m,y,w,g,x,k,j;return u.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,v(r._get(e));case 2:if(i=o.sent,!((n=n||Object.assign(a.CarWriter.create(e),{size:0})).size>0&&n.size+i.bytes.byteLength>=r._targetSize)){o.next=9;break}return n.writer.close(),c=n.out,n=function(e){var r,t=Object.assign(a.CarWriter.create(e[0].cid),{size:e.reduce((function(e,r){return e+r.bytes.byteLength}),0)}),n=l(e);try{for(n.s();!(r=n.n()).done;){var o=r.value;t.writer.put(o)}}catch(i){n.e(i)}finally{n.f()}return t}(t),o.next=9,{channel:n,out:c};case 9:t=t.concat(i),n.size+=i.bytes.byteLength,n.writer.put(i),s=l(i.links()),o.prev=11,s.s();case 13:if((f=s.n()).done){o.next=52;break}p=d(f.value,2),h=p[1],m=!0,y=!1,o.prev=17,g=b(r._cars(h,t,n));case 19:return o.next=21,v(g.next());case 21:return x=o.sent,m=x.done,o.next=25,v(x.value);case 25:if(k=o.sent,m){o.next=34;break}return n=(j=k).channel,o.next=31,j;case 31:m=!0,o.next=19;break;case 34:o.next=40;break;case 36:o.prev=36,o.t0=o.catch(17),y=!0,w=o.t0;case 40:if(o.prev=40,o.prev=41,m||null==g.return){o.next=45;break}return o.next=45,v(g.return());case 45:if(o.prev=45,!y){o.next=48;break}throw w;case 48:return o.finish(45);case 49:return o.finish(40);case 50:o.next=13;break;case 52:o.next=57;break;case 54:o.prev=54,o.t1=o.catch(11),s.e(o.t1);case 57:return o.prev=57,s.f(),o.finish(57);case 60:if(n){o.next=62;break}throw new Error("missing CAR writer channel");case 62:return o.next=64,{channel:n};case 64:case"end":return o.stop()}}),o,null,[[11,54,57,60],[17,36,40,50],[41,,45,49]])})))()}}],[{key:"fromIterable",value:function(){var r=f(u.mark((function r(t,n,o){var i;return u.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,a.CarReader.fromIterable(t);case 2:return i=r.sent,r.abrupt("return",new e(i,n,o));case 4:case"end":return r.stop()}}),r)})));return function(e,t,n){return r.apply(this,arguments)}}()},{key:"fromBlob",value:function(){var r=f(u.mark((function r(t,n,o){var i,c;return u.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,t.arrayBuffer();case 2:return i=r.sent,r.next=5,a.CarReader.fromBytes(new Uint8Array(i));case 5:return c=r.sent,r.abrupt("return",new e(c,n,o));case 7:case"end":return r.stop()}}),r)})));return function(e,t,n){return r.apply(this,arguments)}}()}]),e}();r.TreewalkCarSplitter=k},function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=t(7),a=function(){function e(r,t,n){p(this,e),this._version=r,this._roots=t,this._blocks=n,this._keys=n.map((function(e){return e.cid.toString()}))}return h(e,[{key:"version",get:function(){return this._version}},{key:"getRoots",value:function(){var e=f(u.mark((function e(){return u.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._roots);case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"has",value:function(){var e=f(u.mark((function e(r){return u.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._keys.indexOf(r.toString())>-1);case 1:case"end":return e.stop()}}),e,this)})));return function(r){return e.apply(this,arguments)}}()},{key:"get",value:function(){var e=f(u.mark((function e(r){var t;return u.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this._keys.indexOf(r.toString()),e.abrupt("return",t>-1?this._blocks[t]:void 0);case 2:case"end":return e.stop()}}),e,this)})));return function(r){return e.apply(this,arguments)}}()},{key:"blocks",value:function(){var e=this;return y(u.mark((function r(){var t,n,a;return u.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:t=l(e._blocks),r.prev=1,t.s();case 3:if((n=t.n()).done){r.next=9;break}return a=n.value,r.next=7,a;case 7:r.next=3;break;case 9:r.next=14;break;case 11:r.prev=11,r.t0=r.catch(1),t.e(r.t0);case 14:return r.prev=14,t.f(),r.finish(14);case 17:case"end":return r.stop()}}),r,null,[[1,11,14,17]])})))()}},{key:"cids",value:function(){var e=this;return y(u.mark((function r(){var t,n,a;return u.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:t=l(e._blocks),r.prev=1,t.s();case 3:if((n=t.n()).done){r.next=9;break}return a=n.value,r.next=7,a.cid;case 7:r.next=3;break;case 9:r.next=14;break;case 11:r.prev=11,r.t0=r.catch(1),t.e(r.t0);case 14:return r.prev=14,t.f(),r.finish(14);case 17:case"end":return r.stop()}}),r,null,[[1,11,14,17]])})))()}}],[{key:"fromBytes",value:function(){var e=f(u.mark((function e(r){return u.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r instanceof Uint8Array){e.next=2;break}throw new TypeError("fromBytes() requires a Uint8Array");case 2:return e.abrupt("return",o(n.bytesReader(r)));case 3:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}()},{key:"fromIterable",value:function(){var e=f(u.mark((function e(r){return u.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r&&"function"==typeof r[Symbol.asyncIterator]){e.next=2;break}throw new TypeError("fromIterable() requires an async iterable");case 2:return e.abrupt("return",o(n.asyncIterableReader(r)));case 3:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}()}]),e}();function o(e){return i.apply(this,arguments)}function i(){return(i=f(u.mark((function e(r){var t,o,i,c,s,f,l,d,p,h,m,v;return u.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.createDecoder(r),e.next=3,t.header();case 3:o=e.sent,i=o.version,c=o.roots,s=[],f=!0,l=!1,e.prev=9,p=b(t.blocks());case 11:return e.next=13,p.next();case 13:return h=e.sent,f=h.done,e.next=17,h.value;case 17:if(m=e.sent,f){e.next=24;break}v=m,s.push(v);case 21:f=!0,e.next=11;break;case 24:e.next=30;break;case 26:e.prev=26,e.t0=e.catch(9),l=!0,d=e.t0;case 30:if(e.prev=30,e.prev=31,f||null==p.return){e.next=35;break}return e.next=35,p.return();case 35:if(e.prev=35,!l){e.next=38;break}throw d;case 38:return e.finish(35);case 39:return e.finish(30);case 40:return e.abrupt("return",new a(i,c,s));case 41:case"end":return e.stop()}}),e,null,[[9,26,30,40],[31,,35,39]])})))).apply(this,arguments)}r.CarReader=a,r.__browser=!0},function(e,r){e.exports=function e(r,n,a){if(Number.MAX_SAFE_INTEGER&&r>Number.MAX_SAFE_INTEGER)throw e.bytes=0,new RangeError("Could not encode varint");n=n||[];for(var o=a=a||0;r>=t;)n[a++]=255&r|128,r/=128;for(;-128&r;)n[a++]=255&r|128,r>>>=7;return n[a]=0|r,e.bytes=a-o+1,n};var t=Math.pow(2,31)},function(e,r){e.exports=function e(r,t){var n,a=0,o=0,i=t=t||0,c=r.length;do{if(i>=c||o>49)throw e.bytes=0,new RangeError("Could not decode varint");n=r[i++],a+=o<28?(127&n)<<o:(127&n)*Math.pow(2,o),o+=7}while(n>=128);return e.bytes=i-t,a}},function(e,r){var t=Math.pow(2,7),n=Math.pow(2,14),a=Math.pow(2,21),o=Math.pow(2,28),i=Math.pow(2,35),c=Math.pow(2,42),s=Math.pow(2,49),u=Math.pow(2,56),f=Math.pow(2,63);e.exports=function(e){return e<t?1:e<n?2:e<a?3:e<o?4:e<i?5:e<c?6:e<s?7:e<u?8:e<f?9:10}},function(e,r,t){"use strict";var n=Math.pow(2,31),a=Math.pow(2,7),o=Math.pow(2,14),i=Math.pow(2,21),c=Math.pow(2,28),s=Math.pow(2,35),u=Math.pow(2,42),f=Math.pow(2,49),l=Math.pow(2,56),d=Math.pow(2,63),p={encode:function e(r,t,a){t=t||[];for(var o=a=a||0;r>=n;)t[a++]=255&r|128,r/=128;for(;-128&r;)t[a++]=255&r|128,r>>>=7;return t[a]=0|r,e.bytes=a-o+1,t},decode:function e(r,t){var n,a=0,o=0,i=t=t||0,c=r.length;do{if(i>=c)throw e.bytes=0,new RangeError("Could not decode varint");n=r[i++],a+=o<28?(127&n)<<o:(127&n)*Math.pow(2,o),o+=7}while(n>=128);return e.bytes=i-t,a},encodingLength:function(e){return e<a?1:e<o?2:e<i?3:e<c?4:e<s?5:e<u?6:e<f?7:e<l?8:e<d?9:10}};e.exports=p},function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=t(17),a=n.baseX({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),o=n.baseX({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});r.base58btc=a,r.base58flickr=o},function(e,r,t){"use strict";e.exports=function(e,r){if(e.length>=255)throw new TypeError("Alphabet too long");for(var t=new Uint8Array(256),n=0;n<t.length;n++)t[n]=255;for(var a=0;a<e.length;a++){var o=e.charAt(a),i=o.charCodeAt(0);if(255!==t[i])throw new TypeError(o+" is ambiguous");t[i]=a}var c=e.length,s=e.charAt(0),u=Math.log(c)/Math.log(256),f=Math.log(256)/Math.log(c);function l(e){if("string"!=typeof e)throw new TypeError("Expected String");if(0===e.length)return new Uint8Array;var r=0;if(" "!==e[r]){for(var n=0,a=0;e[r]===s;)n++,r++;for(var o=(e.length-r)*u+1>>>0,i=new Uint8Array(o);e[r];){var f=t[e.charCodeAt(r)];if(255===f)return;for(var l=0,d=o-1;(0!==f||l<a)&&-1!==d;d--,l++)f+=c*i[d]>>>0,i[d]=f%256>>>0,f=f/256>>>0;if(0!==f)throw new Error("Non-zero carry");a=l,r++}if(" "!==e[r]){for(var p=o-a;p!==o&&0===i[p];)p++;for(var h=new Uint8Array(n+(o-p)),m=n;p!==o;)h[m++]=i[p++];return h}}}return{encode:function(r){if(r instanceof Uint8Array||(ArrayBuffer.isView(r)?r=new Uint8Array(r.buffer,r.byteOffset,r.byteLength):Array.isArray(r)&&(r=Uint8Array.from(r))),!(r instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(0===r.length)return"";for(var t=0,n=0,a=0,o=r.length;a!==o&&0===r[a];)a++,t++;for(var i=(o-a)*f+1>>>0,u=new Uint8Array(i);a!==o;){for(var l=r[a],d=0,p=i-1;(0!==l||d<n)&&-1!==p;p--,d++)l+=256*u[p]>>>0,u[p]=l%c>>>0,l=l/c>>>0;if(0!==l)throw new Error("Non-zero carry");n=d,a++}for(var h=i-n;h!==i&&0===u[h];)h++;for(var m=s.repeat(t);h<i;++h)m+=e.charAt(u[h]);return m},decodeUnsafe:l,decode:function(e){var t=l(e);if(t)return t;throw new Error("Non-".concat(r," character"))}}}},function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=t(17),a=n.rfc4648({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),o=n.rfc4648({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),i=n.rfc4648({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),c=n.rfc4648({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),s=n.rfc4648({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),u=n.rfc4648({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),f=n.rfc4648({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),l=n.rfc4648({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),d=n.rfc4648({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});r.base32=a,r.base32hex=s,r.base32hexpad=f,r.base32hexpadupper=l,r.base32hexupper=u,r.base32pad=i,r.base32padupper=c,r.base32upper=o,r.base32z=d},function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=t(45),a=t(48),o=t(1);r.encode=n.encode,r.decode=a.decode,r.Token=o.Token,r.Type=o.Type},function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=t(46),a=t(1),o=t(47),i=t(2),c=t(18),s=t(6),u=t(3),f=t(19),d=t(11),m=t(20),b=t(21),v=t(22),y=t(23),w=t(24),g={float64:!1,mapSorter:function(e,r){var t=Array.isArray(e[0])?e[0][0]:e[0],n=Array.isArray(r[0])?r[0][0]:r[0];if(t.type!==n.type)return t.type.compare(n.type);var a=t.type.major,o=x[a].compareTokens(t,n);return 0===o&&console.warn("WARNING: complex key types used, CBOR key sorting guarantees are gone"),o},quickEncodeToken:c.quickEncodeToken},x=[];x[a.Type.uint.major]=u.encodeUint,x[a.Type.negint.major]=f.encodeNegint,x[a.Type.bytes.major]=d.encodeBytes,x[a.Type.string.major]=m.encodeString,x[a.Type.array.major]=b.encodeArray,x[a.Type.map.major]=v.encodeMap,x[a.Type.tag.major]=y.encodeTag,x[a.Type.float.major]=w.encodeFloat;var k=new o.Bl,j=function(){function e(r,t){p(this,e),this.obj=r,this.parent=t}return h(e,[{key:"includes",value:function(e){var r=this;do{if(r.obj===e)return!0}while(r=r.parent);return!1}}],[{key:"createCheck",value:function(r,t){if(r&&r.includes(t))throw new Error(i.encodeErrPrefix+" object contains circular references");return new e(t,r)}}]),e}(),O={null:new a.Token(a.Type.null,null),undefined:new a.Token(a.Type.undefined,void 0),true:new a.Token(a.Type.true,!0),false:new a.Token(a.Type.false,!1),emptyArray:new a.Token(a.Type.array,0),emptyMap:new a.Token(a.Type.map,0)},T={number:function(e,r,t,n){return Number.isInteger(e)&&Number.isSafeInteger(e)?e>=0?new a.Token(a.Type.uint,e):new a.Token(a.Type.negint,e):new a.Token(a.Type.float,e)},bigint:function(e,r,t,n){return e>=BigInt(0)?new a.Token(a.Type.uint,e):new a.Token(a.Type.negint,e)},Uint8Array:function(e,r,t,n){return new a.Token(a.Type.bytes,e)},string:function(e,r,t,n){return new a.Token(a.Type.string,e)},boolean:function(e,r,t,n){return e?O.true:O.false},null:function(e,r,t,n){return O.null},undefined:function(e,r,t,n){return O.undefined},ArrayBuffer:function(e,r,t,n){return new a.Token(a.Type.bytes,new Uint8Array(e))},DataView:function(e,r,t,n){return new a.Token(a.Type.bytes,new Uint8Array(e.buffer,e.byteOffset,e.byteLength))},Array:function(e,r,t,n){if(!e.length)return!0===t.addBreakTokens?[O.emptyArray,new a.Token(a.Type.break)]:O.emptyArray;n=j.createCheck(n,e);var o,i=[],c=0,s=l(e);try{for(s.s();!(o=s.n()).done;){var u=o.value;i[c++]=A(u,t,n)}}catch(f){s.e(f)}finally{s.f()}return t.addBreakTokens?[new a.Token(a.Type.array,e.length),i,new a.Token(a.Type.break)]:[new a.Token(a.Type.array,e.length),i]},Object:function(e){function r(r,t,n,a){return e.apply(this,arguments)}return r.toString=function(){return e.toString()},r}((function(e,r,t,n){var o="Object"!==r,i=o?e.keys():Object.keys(e),c=o?e.size:i.length;if(!c)return!0===t.addBreakTokens?[O.emptyMap,new a.Token(a.Type.break)]:O.emptyMap;n=j.createCheck(n,e);var s,u=[],f=0,d=l(i);try{for(d.s();!(s=d.n()).done;){var p=s.value;u[f++]=[A(p,t,n),A(o?e.get(p):e[p],t,n)]}}catch(h){d.e(h)}finally{d.f()}return function(e,r){r.mapSorter&&e.sort(r.mapSorter)}(u,t),t.addBreakTokens?[new a.Token(a.Type.map,c),u,new a.Token(a.Type.break)]:[new a.Token(a.Type.map,c),u]}))};T.Map=T.Object,T.Buffer=T.Uint8Array;var E,C=l("Uint8Clamped Uint16 Uint32 Int8 Int16 Int32 BigUint64 BigInt64 Float32 Float64".split(" "));try{for(C.s();!(E=C.n()).done;){var _=E.value;T[_+"Array"]=T.DataView}}catch(I){C.e(I)}finally{C.f()}function A(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=arguments.length>2?arguments[2]:void 0,a=n.is(e),o=r&&r.typeEncoders&&r.typeEncoders[a]||T[a];if("function"==typeof o){var c=o(e,a,r,t);if(null!=c)return c}var s=T[a];if(!s)throw new Error("".concat(i.encodeErrPrefix," unsupported type: ").concat(a));return s(e,a,r,t)}function S(e,r,t){var n=A(e,t);if(!Array.isArray(n)&&t.quickEncodeToken){var a=t.quickEncodeToken(n);if(a)return a;var i=r[n.type.major];if(i.encodedSize){var c=i.encodedSize(n,t),u=new o.Bl(c);if(i(u,n,t),1!==u.chunks.length)throw new Error("Unexpected error: pre-calculated length for ".concat(n," was wrong"));return s.asU8A(u.chunks[0])}}return function e(r,t,n,a){if(Array.isArray(t)){var o,i=l(t);try{for(i.s();!(o=i.n()).done;){e(r,o.value,n,a)}}catch(I){i.e(I)}finally{i.f()}}else n[t.type.major](r,t,a)}(k,n,r,t),k.toBytes(!0)}r.Ref=j,r.encode=function(e,r){return r=Object.assign({},g,r),S(e,x,r)},r.encodeCustom=S,r.objectToTokens=A},function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=["string","number","bigint","symbol"],a=["Function","Generator","AsyncGenerator","GeneratorFunction","AsyncGeneratorFunction","AsyncFunction","Observable","Array","Buffer","Object","RegExp","Date","Error","Map","Set","WeakMap","WeakSet","ArrayBuffer","SharedArrayBuffer","DataView","Promise","URL","HTMLElement","Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array","BigInt64Array","BigUint64Array"];r.is=function(e){if(null===e)return"null";if(void 0===e)return"undefined";if(!0===e||!1===e)return"boolean";var r=typeof e;return n.includes(r)?r:"function"===r?"Function":Array.isArray(e)?"Array":function(e){return e&&e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer.call(null,e)}(e)?"Buffer":function(e){var r=Object.prototype.toString.call(e).slice(8,-1);if(a.includes(r))return r}(e)||"Object"}},function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=t(6);r.Bl=function(){function e(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:256;p(this,e),this.chunkSize=r,this.cursor=0,this.maxCursor=-1,this.chunks=[],this._initReuseChunk=null}return h(e,[{key:"reset",value:function(){this.chunks=[],this.cursor=0,this.maxCursor=-1,null!==this._initReuseChunk&&(this.chunks.push(this._initReuseChunk),this.maxCursor=this._initReuseChunk.length-1)}},{key:"push",value:function(e){var r=this.chunks[this.chunks.length-1];if(this.cursor+e.length<=this.maxCursor+1){var t=r.length-(this.maxCursor-this.cursor)-1;r.set(e,t)}else{if(r){var a=r.length-(this.maxCursor-this.cursor)-1;a<r.length&&(this.chunks[this.chunks.length-1]=r.subarray(0,a),this.maxCursor=this.cursor-1)}e.length<64&&e.length<this.chunkSize?(r=n.alloc(this.chunkSize),this.chunks.push(r),this.maxCursor+=r.length,null===this._initReuseChunk&&(this._initReuseChunk=r),r.set(e,0)):(this.chunks.push(e),this.maxCursor+=e.length)}this.cursor+=e.length}},{key:"toBytes",value:function(){var e,r=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(1===this.chunks.length){var t=this.chunks[0];r&&this.cursor>t.length/2?(e=this.cursor===t.length?t:t.subarray(0,this.cursor),this._initReuseChunk=null,this.chunks=[]):e=n.slice(t,0,this.cursor)}else e=n.concat(this.chunks,this.cursor);return r&&this.reset(),e}}]),e}()},function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=t(2),a=t(1),o=t(18),i={strict:!1,allowIndefinite:!0,allowUndefined:!0,allowBigInt:!0},c=function(){function e(r){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};p(this,e),this.pos=0,this.data=r,this.options=t}return h(e,[{key:"done",value:function(){return this.pos>=this.data.length}},{key:"next",value:function(){var e=this.data[this.pos],r=o.quick[e];if(void 0===r){var t=o.jump[e];if(!t)throw new Error("".concat(n.decodeErrPrefix," no decoder for major type ").concat(e>>>5," (byte 0x").concat(e.toString(16).padStart(2,"0"),")"));var a=31&e;r=t(this.data,this.pos,a,this.options)}return this.pos+=r.encodedLength,r}}]),e}(),s=Symbol.for("DONE"),u=Symbol.for("BREAK");function f(e,r){if(e.done())return s;var t=e.next();if(t.type===a.Type.break)return u;if(t.type.terminal)return t.value;if(t.type===a.Type.array)return function(e,r,t){for(var a=[],o=0;o<e.value;o++){var i=f(r,t);if(i===u){if(e.value===1/0)break;throw new Error(n.decodeErrPrefix+" got unexpected break to lengthed array")}if(i===s)throw new Error("".concat(n.decodeErrPrefix," found array but not enough entries (got ").concat(o,", expected ").concat(e.value,")"));a[o]=i}return a}(t,e,r);if(t.type===a.Type.map)return function(e,r,t){for(var a=!0===t.useMaps,o=a?void 0:{},i=a?new Map:void 0,c=0;c<e.value;c++){var l=f(r,t);if(l===u){if(e.value===1/0)break;throw new Error(n.decodeErrPrefix+" got unexpected break to lengthed map")}if(l===s)throw new Error("".concat(n.decodeErrPrefix," found map but not enough entries (got ").concat(c," [no key], expected ").concat(e.value,")"));if(!0!==a&&"string"!=typeof l)throw new Error("".concat(n.decodeErrPrefix," non-string keys not supported (got ").concat(typeof l,")"));var d=f(r,t);if(d===s)throw new Error("".concat(n.decodeErrPrefix," found map but not enough entries (got ").concat(c," [no value], expected ").concat(e.value,")"));a?i.set(l,d):o[l]=d}return a?i:o}(t,e,r);if(t.type===a.Type.tag){if(r.tags&&"function"==typeof r.tags[t.value]){var o=f(e,r);return r.tags[t.value](o)}throw new Error("".concat(n.decodeErrPrefix," tag not supported (").concat(t.value,")"))}throw new Error("unsupported")}r.Tokeniser=c,r.decode=function(e,r){if(!(e instanceof Uint8Array))throw new Error(n.decodeErrPrefix+" data to decode must be a Uint8Array");var t=(r=Object.assign({},i,r)).tokenizer||new c(e,r),a=f(t,r);if(a===s)throw new Error(n.decodeErrPrefix+" did not find any content to decode");if(a===u)throw new Error(n.decodeErrPrefix+" got unexpected break");if(!t.done())throw new Error(n.decodeErrPrefix+" too many terminals, data makes no sense");return a},r.tokensToObject=f},function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=t(7),a=function(){function e(r,t,n){p(this,e),this._version=r,this._roots=t,this._iterator=n}return h(e,[{key:"version",get:function(){return this._version}},{key:"getRoots",value:function(){var e=f(u.mark((function e(){return u.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._roots);case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:Symbol.asyncIterator,value:function(){return this._iterator}}],[{key:"fromBytes",value:function(){var e=f(u.mark((function e(r){return u.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r instanceof Uint8Array){e.next=2;break}throw new TypeError("fromBytes() requires a Uint8Array");case 2:return e.abrupt("return",o(n.bytesReader(r)));case 3:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}()},{key:"fromIterable",value:function(){var e=f(u.mark((function e(r){return u.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r&&"function"==typeof r[Symbol.asyncIterator]){e.next=2;break}throw new TypeError("fromIterable() requires an async iterable");case 2:return e.abrupt("return",o(n.asyncIterableReader(r)));case 3:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}()}]),e}();function o(e){return i.apply(this,arguments)}function i(){return(i=f(u.mark((function e(r){var t,o,i,c;return u.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.createDecoder(r),e.next=3,t.header();case 3:return o=e.sent,i=o.version,c=o.roots,e.abrupt("return",new a(i,c,t.blocksIndex()));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}r.CarIndexer=a},function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=t(7),i=function(){function e(r,t,n){p(this,e),this._version=r,this._roots=t,this._iterable=n,this._decoded=!1}return h(e,[{key:"version",get:function(){return this._version}},{key:"getRoots",value:function(){var e=f(u.mark((function e(){return u.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._roots);case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),c=function(e){a(t,e);var r=o(t);function t(){return p(this,t),r.apply(this,arguments)}return h(t,[{key:Symbol.asyncIterator,value:function(){if(this._decoded)throw new Error("Cannot decode more than once");if(!this._iterable)throw new Error("Block iterable not found");return this._decoded=!0,this._iterable[Symbol.asyncIterator]()}}],[{key:"fromBytes",value:function(){var e=f(u.mark((function e(r){var n,a,o,i;return u.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l(r);case 2:return n=e.sent,a=n.version,o=n.roots,i=n.iterator,e.abrupt("return",new t(a,o,i));case 7:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}()},{key:"fromIterable",value:function(){var e=f(u.mark((function e(r){var n,a,o,i;return u.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m(r);case 2:return n=e.sent,a=n.version,o=n.roots,i=n.iterator,e.abrupt("return",new t(a,o,i));case 7:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}()}]),t}(i),s=function(e){a(t,e);var r=o(t);function t(){return p(this,t),r.apply(this,arguments)}return h(t,[{key:Symbol.asyncIterator,value:function(){if(this._decoded)throw new Error("Cannot decode more than once");if(!this._iterable)throw new Error("Block iterable not found");this._decoded=!0;var e=this._iterable[Symbol.asyncIterator]();return{next:function(){return f(u.mark((function r(){var t;return u.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,e.next();case 2:return t=r.sent,r.abrupt("return",t.done?t:{done:!1,value:t.value.cid});case 4:case"end":return r.stop()}}),r)})))()}}}}],[{key:"fromBytes",value:function(){var e=f(u.mark((function e(r){var n,a,o,i;return u.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l(r);case 2:return n=e.sent,a=n.version,o=n.roots,i=n.iterator,e.abrupt("return",new t(a,o,i));case 7:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}()},{key:"fromIterable",value:function(){var e=f(u.mark((function e(r){var n,a,o,i;return u.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m(r);case 2:return n=e.sent,a=n.version,o=n.roots,i=n.iterator,e.abrupt("return",new t(a,o,i));case 7:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}()}]),t}(i);function l(e){return d.apply(this,arguments)}function d(){return(d=f(u.mark((function e(r){return u.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r instanceof Uint8Array){e.next=2;break}throw new TypeError("fromBytes() requires a Uint8Array");case 2:return e.abrupt("return",v(n.bytesReader(r)));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function m(e){return b.apply(this,arguments)}function b(){return(b=f(u.mark((function e(r){return u.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r&&"function"==typeof r[Symbol.asyncIterator]){e.next=2;break}throw new TypeError("fromIterable() requires an async iterable");case 2:return e.abrupt("return",v(n.asyncIterableReader(r)));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function v(e){return y.apply(this,arguments)}function y(){return(y=f(u.mark((function e(r){var t,a,o,i;return u.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.createDecoder(r),e.next=3,t.header();case 3:return a=e.sent,o=a.version,i=a.roots,e.abrupt("return",{version:o,roots:i,iterator:t.blocks()});case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}r.CarBlockIterator=c,r.CarCIDIterator=s,r.CarIteratorBase=i},function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=t(4),a=t(52),o=t(53),i=t(7),c=function(){function e(r,t){p(this,e),this._encoder=t,this._mutex=t.setRoots(r),this._ended=!1}return h(e,[{key:"put",value:function(){var e=f(u.mark((function e(r){var t,a=this;return u.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r.bytes instanceof Uint8Array&&r.cid){e.next=2;break}throw new TypeError("Can only write {cid, bytes} objects");case 2:if(!this._ended){e.next=4;break}throw new Error("Already closed");case 4:if(t=n.CID.asCID(r.cid)){e.next=7;break}throw new TypeError("Can only write {cid, bytes} objects");case 7:return e.abrupt("return",(this._mutex=this._mutex.then((function(){return a._encoder.writeBlock({cid:t,bytes:r.bytes})})),this._mutex));case 8:case"end":return e.stop()}}),e,this)})));return function(r){return e.apply(this,arguments)}}()},{key:"close",value:function(){var e=f(u.mark((function e(){return u.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._ended){e.next=2;break}throw new Error("Already closed");case 2:return e.next=4,this._mutex;case 4:return this._ended=!0,e.abrupt("return",this._encoder.close());case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}],[{key:"create",value:function(r){r=function(e){if(void 0===e)return[];if(!Array.isArray(e)){var r=n.CID.asCID(e);if(!r)throw new TypeError("roots must be a single CID or an array of CIDs");return[r]}var t,a=[],o=l(e);try{for(o.s();!(t=o.n()).done;){var i=t.value,c=n.CID.asCID(i);if(!c)throw new TypeError("roots must be a single CID or an array of CIDs");a.push(c)}}catch(s){o.e(s)}finally{o.f()}return a}(r);var t=d(),a=t.encoder,o=t.iterator;return{writer:new e(r,a),out:new s(o)}}},{key:"createAppender",value:function(){var r=d(),t=r.encoder,n=r.iterator;return t.setRoots=function(){return Promise.resolve()},{writer:new e([],t),out:new s(n)}}},{key:"updateRootsInBytes",value:function(){var e=f(u.mark((function e(r,t){var n,o;return u.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=i.bytesReader(r),e.next=3,i.readHeader(n);case 3:if(o=a.createHeader(t),n.pos===o.length){e.next=6;break}throw new Error("updateRoots() can only overwrite a header of the same length (old header is ".concat(n.pos," bytes, new header is ").concat(o.length," bytes)"));case 6:return e.abrupt("return",(r.set(o,0),r));case 7:case"end":return e.stop()}}),e)})));return function(r,t){return e.apply(this,arguments)}}()}]),e}(),s=function(){function e(r){p(this,e),this._iterator=r}return h(e,[{key:Symbol.asyncIterator,value:function(){if(this._iterating)throw new Error("Multiple iterator not supported");return this._iterating=!0,this._iterator}}]),e}();function d(){var e=o.create(),r=e.writer,t=e.iterator;return{encoder:a.createEncoder(r),iterator:t}}r.CarWriter=c,r.CarWriterOut=s,r.__browser=!0},function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=t(16),a=t(10);var o=function(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}(n);function i(e){var r=a.encode({version:1,roots:e}),t=o.default.encode(r.length),n=new Uint8Array(t.length+r.length);return n.set(t,0),n.set(r,t.length),n}r.createEncoder=function(e){return{setRoots:function(r){return f(u.mark((function t(){var n;return u.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=i(r),t.next=3,e.write(n);case 3:case"end":return t.stop()}}),t)})))()},writeBlock:function(r){return f(u.mark((function t(){var n,a;return u.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=r.cid,a=r.bytes,t.next=3,e.write(new Uint8Array(o.default.encode(n.bytes.length+a.length)));case 3:return t.next=5,e.write(n.bytes);case 5:if(t.t0=a.length,!t.t0){t.next=9;break}return t.next=9,e.write(a);case 9:case"end":return t.stop()}}),t)})))()},close:function(){var r=f(u.mark((function r(){return u.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",e.end());case 1:case"end":return r.stop()}}),r)})));return function(){return r.apply(this,arguments)}}()}},r.createHeader=i},function(e,r,t){"use strict";function n(){}Object.defineProperty(r,"__esModule",{value:!0}),r.create=function(){var e=[],r=null,t=n,a=!1,o=null,i=n,c=function(){return r||(r=new Promise((function(e){t=function(){r=null,t=n,e()}}))),r},s={next:function(){return f(u.mark((function r(){var c;return u.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return c=e.shift(),r.abrupt("return",c?(0===e.length&&t(),{done:!1,value:c}):a?(t(),{done:!0,value:void 0}):(o||(o=new Promise((function(e){i=function(){return o=null,i=n,e(s.next())}}))),o));case 2:case"end":return r.stop()}}),r)})))()}};return{writer:{write:function(r){e.push(r);var t=c();return i(),t},end:function(){return f(u.mark((function e(){var r;return u.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=!0,r=c(),e.abrupt("return",(i(),r));case 3:case"end":return e.stop()}}),e)})))()}},iterator:s}}},function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.CarIndexedReader=function(){function e(){p(this,e)}return h(e,null,[{key:"fromFile",value:function(){var e=f(u.mark((function e(){return u.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new Error("Unsupported in this environment");case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}]),e}(),r.__browser=!0},function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),t(56);var a=t(4),o=t(5),i=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=e.enumerable,t=void 0===r||r,n=e.configurable,a=void 0!==n&&n;return{enumerable:t,configurable:a,writable:!1}},c=u.mark((function e(r,t){var o,i,c,s,f,p,h,m,b,v,y,w,g,x;return u.wrap((function(u){for(;;)switch(u.prev=u.next){case 0:if(null==r||r instanceof Uint8Array){u.next=43;break}o=0,i=Object.entries(r);case 2:if(!(o<i.length)){u.next=43;break}if(c=d(i[o],2),s=c[0],f=c[1],p=[].concat(n(t),[s]),null==f||"object"!=typeof f){u.next=40;break}if(!Array.isArray(f)){u.next=33;break}h=l(f.entries()),u.prev=8,h.s();case 10:if((m=h.n()).done){u.next=23;break}if(b=d(m.value,2),v=b[0],y=b[1],w=[].concat(n(p),[v]),!(g=a.CID.asCID(y))){u.next=18;break}return u.next=16,[w.join("/"),g];case 16:u.next=21;break;case 18:if(u.t0="object"==typeof y,!u.t0){u.next=21;break}return u.delegateYield(e(y,w),"t1",21);case 21:u.next=10;break;case 23:u.next=28;break;case 25:u.prev=25,u.t2=u.catch(8),h.e(u.t2);case 28:return u.prev=28,h.f(),u.finish(28);case 31:u.next=40;break;case 33:if(!(x=a.CID.asCID(f))){u.next=39;break}return u.next=37,[p.join("/"),x];case 37:u.next=40;break;case 39:return u.delegateYield(e(f,p),"t3",40);case 40:o++,u.next=2;break;case 43:case"end":return u.stop()}}),e,null,[[8,25,28,31]])})),s=u.mark((function e(r,t){var o,i,c,s,f,p,h,m,b,v,y,w;return u.wrap((function(u){for(;;)switch(u.prev=u.next){case 0:if(null==r){u.next=36;break}o=0,i=Object.entries(r);case 2:if(!(o<i.length)){u.next=36;break}return c=d(i[o],2),s=c[0],f=c[1],p=[].concat(n(t),[s]),u.next=7,p.join("/");case 7:if(null==f||f instanceof Uint8Array||"object"!=typeof f||a.CID.asCID(f)){u.next=33;break}if(!Array.isArray(f)){u.next=32;break}h=l(f.entries()),u.prev=10,h.s();case 12:if((m=h.n()).done){u.next=22;break}return b=d(m.value,2),v=b[0],y=b[1],w=[].concat(n(p),[v]),u.next=17,w.join("/");case 17:if(u.t0="object"!=typeof y||a.CID.asCID(y),u.t0){u.next=20;break}return u.delegateYield(e(y,w),"t1",20);case 20:u.next=12;break;case 22:u.next=27;break;case 24:u.prev=24,u.t2=u.catch(10),h.e(u.t2);case 27:return u.prev=27,h.f(),u.finish(27);case 30:u.next=33;break;case 32:return u.delegateYield(e(f,p),"t3",33);case 33:o++,u.next=2;break;case 36:case"end":return u.stop()}}),e,null,[[10,24,27,30]])})),m=function(){function e(r){var t=r.cid,n=r.bytes,a=r.value;if(p(this,e),!t||!n||void 0===a)throw new Error("Missing required argument");this.cid=t,this.bytes=n,this.value=a,this.asBlock=this,Object.defineProperties(this,{cid:i(),bytes:i(),value:i(),asBlock:i()})}return h(e,[{key:"links",value:function(){return c(this.value,[])}},{key:"tree",value:function(){return s(this.value,[])}},{key:"get",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"/";return function(e,r){var t,n=e,o=l(r.entries());try{for(o.s();!(t=o.n()).done;){var i=d(t.value,2),c=i[0];if(null==(n=n[i[1]]))throw new Error("Object has no property at "+r.slice(0,c+1).map((function(e){return"[".concat(JSON.stringify(e),"]")})).join(""));var s=a.CID.asCID(n);if(s)return{value:s,remaining:r.slice(c+1).join("/")}}}catch(u){o.e(u)}finally{o.f()}return{value:n}}(this.value,e.split("/").filter(Boolean))}}]),e}(),b=function(e){var r=e.bytes,t=e.cid,n=e.value,a=e.codec,o=void 0!==n?n:a&&a.decode(r);if(void 0===o)throw new Error('Missing required argument, must either provide "value" or "codec"');return new m({cid:t,bytes:r,value:o})};r.Block=m,r.create=function(){var e=f(u.mark((function e(r){var t,n,a,i,c,s;return u.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=r.bytes,n=r.cid,a=r.hasher,i=r.codec,t){e.next=3;break}throw new Error('Missing required argument "bytes"');case 3:if(a){e.next=5;break}throw new Error('Missing required argument "hasher"');case 5:return c=i.decode(t),e.next=8,a.digest(t);case 8:if(s=e.sent,o.equals(n.multihash.bytes,s.bytes)){e.next=11;break}throw new Error("CID hash does not match bytes");case 11:return e.abrupt("return",b({bytes:t,cid:n,value:c,codec:i}));case 12:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}(),r.createUnsafe=b,r.decode=function(){var e=f(u.mark((function e(r){var t,n,o,i,c,s;return u.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=r.bytes,n=r.codec,o=r.hasher,t){e.next=3;break}throw new Error('Missing required argument "bytes"');case 3:if(n&&o){e.next=5;break}throw new Error("Missing required argument: codec or hasher");case 5:return i=n.decode(t),e.next=8,o.digest(t);case 8:return c=e.sent,s=a.CID.create(1,n.code,c),e.abrupt("return",new m({value:i,bytes:t,cid:s}));case 11:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}(),r.encode=function(){var e=f(u.mark((function e(r){var t,n,o,i,c,s;return u.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=r.value,n=r.codec,o=r.hasher,void 0!==t){e.next=3;break}throw new Error('Missing required argument "value"');case 3:if(n&&o){e.next=5;break}throw new Error("Missing required argument: codec or hasher");case 5:return i=n.encode(t),e.next=8,o.digest(i);case 8:return c=e.sent,s=a.CID.create(1,n.code,c),e.abrupt("return",new m({value:t,bytes:i,cid:s}));case 11:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}()},function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=t(4),a=t(9),o=t(5),i=t(57),c=t(8);r.CID=n.CID,r.varint=a,r.bytes=o,r.hasher=i,r.digest=c},function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=t(8),a=function(){function e(r,t,n){p(this,e),this.name=r,this.code=t,this.encode=n}return h(e,[{key:"digest",value:function(){var e=f(u.mark((function e(r){var t;return u.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r instanceof Uint8Array)){e.next=5;break}return e.next=3,this.encode(r);case 3:return t=e.sent,e.abrupt("return",n.create(this.code,t));case 5:throw Error("Unknown type, must be binary type");case 6:case"end":return e.stop()}}),e,this)})));return function(r){return e.apply(this,arguments)}}()}]),e}();r.Hasher=a,r.from=function(e){var r=e.name,t=e.code,n=e.encode;return new a(r,t,n)}},function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=t(5);r.code=85,r.decode=function(e){return n.coerce(e)},r.encode=function(e){return n.coerce(e)},r.name="raw"},function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=t(4),a=t(60),o=t(61),i=t(62);r.createLink=i.createLink,r.createNode=i.createNode,r.prepare=i.prepare,r.validate=i.validate,r.code=112,r.decode=function(e){var r=a.decodeNode(e),t={};return r.Data&&(t.Data=r.Data),r.Links&&(t.Links=r.Links.map((function(e){var r={};try{r.Hash=n.CID.decode(e.Hash)}catch(e){}if(!r.Hash)throw new Error("Invalid Hash field found in link, expected CID");return void 0!==e.Name&&(r.Name=e.Name),void 0!==e.Tsize&&(r.Tsize=e.Tsize),r}))),t},r.encode=function(e){i.validate(e);var r={};return e.Links&&(r.Links=e.Links.map((function(e){var r={};return e.Hash&&(r.Hash=e.Hash.bytes),void 0!==e.Name&&(r.Name=e.Name),void 0!==e.Tsize&&(r.Tsize=e.Tsize),r}))),e.Data&&(r.Data=e.Data),o.encodeNode(r)},r.name="dag-pb"},function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=new TextDecoder;function a(e,r){for(var t=0,n=0;;n+=7){if(n>=64)throw new Error("protobuf: varint overflow");if(r>=e.length)throw new Error("protobuf: unexpected end of data");var a=e[r++];if(t+=n<28?(127&a)<<n:(127&a)*Math.pow(2,n),a<128)break}return[t,r]}function o(e,r){var t,n=a(e,r),o=d(n,2);t=o[0];var i=(r=o[1])+t;if(t<0||i<0)throw new Error("protobuf: invalid length");if(i>e.length)throw new Error("protobuf: unexpected end of data");return[e.subarray(r,i),i]}function i(e,r){var t,n,o;return t=a(e,r),[7&(o=(n=d(t,2))[0]),o>>3,r=n[1]]}function c(e){for(var r={},t=e.length,c=0;c<t;){var s,u,f,l;if(s=i(e,c),f=(u=d(s,3))[0],l=u[1],c=u[2],1===l){if(r.Hash)throw new Error("protobuf: (PBLink) duplicate Hash section");if(2!==f)throw new Error("protobuf: (PBLink) wrong wireType (".concat(f,") for Hash"));if(void 0!==r.Name)throw new Error("protobuf: (PBLink) invalid order, found Name before Hash");if(void 0!==r.Tsize)throw new Error("protobuf: (PBLink) invalid order, found Tsize before Hash");var p=o(e,c),h=d(p,2);r.Hash=h[0],c=h[1]}else if(2===l){var m,b;if(void 0!==r.Name)throw new Error("protobuf: (PBLink) duplicate Name section");if(2!==f)throw new Error("protobuf: (PBLink) wrong wireType (".concat(f,") for Name"));if(void 0!==r.Tsize)throw new Error("protobuf: (PBLink) invalid order, found Tsize before Name");var v;m=o(e,c),v=(b=d(m,2))[0],c=b[1],r.Name=n.decode(v)}else{if(3!==l)throw new Error("protobuf: (PBLink) invalid fieldNumber, expected 1, 2 or 3, got "+l);if(void 0!==r.Tsize)throw new Error("protobuf: (PBLink) duplicate Tsize section");if(0!==f)throw new Error("protobuf: (PBLink) wrong wireType (".concat(f,") for Tsize"));var y=a(e,c),w=d(y,2);r.Tsize=w[0],c=w[1]}}if(c>t)throw new Error("protobuf: (PBLink) unexpected end of data");return r}r.decodeNode=function(e){for(var r,t,n=e.length,a=0,s=!1;a<n;){var u,f,l,p;if(u=i(e,a),l=(f=d(u,3))[0],p=f[1],a=f[2],2!==l)throw new Error("protobuf: (PBNode) invalid wireType, expected 2, got "+l);if(1===p){var h,m;if(t)throw new Error("protobuf: (PBNode) duplicate Data section");h=o(e,a),t=(m=d(h,2))[0],a=m[1],r&&(s=!0)}else{if(2!==p)throw new Error("protobuf: (PBNode) invalid fieldNumber, expected 1 or 2, got "+p);var b,v;if(s)throw new Error("protobuf: (PBNode) duplicate Links section");var y;r||(r=[]),b=o(e,a),y=(v=d(b,2))[0],a=v[1],r.push(c(y))}}if(a>n)throw new Error("protobuf: (PBNode) unexpected end of data");var w={};return t&&(w.Data=t),w.Links=r||[],w}},function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=new TextEncoder;function a(e,r){var t=r.length;if("number"==typeof e.Tsize){if(e.Tsize<0)throw new Error("Tsize cannot be negative");if(!Number.isSafeInteger(e.Tsize))throw new Error("Tsize too large for encoding");r[t=i(r,t,e.Tsize)-1]=24}if("string"==typeof e.Name){var a=n.encode(e.Name);t-=a.length,r.set(a,t),r[t=i(r,t,a.length)-1]=18}return e.Hash&&(t-=e.Hash.length,r.set(e.Hash,t),r[t=i(r,t,e.Hash.length)-1]=10),r.length-t}function o(e){var r=0;if(e.Hash){var t=e.Hash.length;r+=1+t+c(t)}if("string"==typeof e.Name){var a=n.encode(e.Name).length;r+=1+a+c(a)}return"number"==typeof e.Tsize&&(r+=1+c(e.Tsize)),r}function i(e,r,t){for(var n=r-=c(t);t>=Math.pow(2,31);)e[r++]=127&t|128,t/=128;for(;t>=128;)e[r++]=127&t|128,t>>>=7;return e[r]=t,n}function c(e){return e%2==0&&e++,Math.floor((function(e){var r=0;return e>=Math.pow(2,32)&&(e=Math.floor(e/Math.pow(2,32)),r=32),e>=65536&&(e>>>=16,r+=16),e>=256&&(e>>>=8,r+=8),r+s[e]}(e)+6)/7)}var s=[0,1,2,2,3,3,3,3,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8];r.encodeNode=function(e){var r=function(e){var r=0;if(e.Data){var t=e.Data.length;r+=1+t+c(t)}if(e.Links){var n,a=l(e.Links);try{for(a.s();!(n=a.n()).done;){var i=o(n.value);r+=1+i+c(i)}}catch(s){a.e(s)}finally{a.f()}}return r}(e),t=new Uint8Array(r),n=r;if(e.Data&&(n-=e.Data.length,t.set(e.Data,n),t[n=i(t,n,e.Data.length)-1]=10),e.Links)for(var s=e.Links.length-1;s>=0;s--){var u=a(e.Links[s],t.subarray(0,n));t[n=i(t,n-=u,u)-1]=18}return t}},function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=t(4),a=["Data","Links"],o=["Hash","Name","Tsize"],i=new TextEncoder;function c(e,r){if(e===r)return 0;for(var t=e.Name?i.encode(e.Name):[],n=r.Name?i.encode(r.Name):[],a=t.length,o=n.length,c=0,s=Math.min(a,o);c<s;++c)if(t[c]!==n[c]){a=t[c],o=n[c];break}return a<o?-1:o<a?1:0}function s(e,r){return!Object.keys(e).some((function(e){return!r.includes(e)}))}function u(e){if("object"==typeof e.asCID){var r=n.CID.asCID(e);if(!r)throw new TypeError("Invalid DAG-PB form");return{Hash:r}}if("object"!=typeof e||Array.isArray(e))throw new TypeError("Invalid DAG-PB form");var t={};if(e.Hash){var a=n.CID.asCID(e.Hash);try{a||("string"==typeof e.Hash?a=n.CID.parse(e.Hash):e.Hash instanceof Uint8Array&&(a=n.CID.decode(e.Hash)))}catch(e){throw new TypeError("Invalid DAG-PB form: "+e.message)}a&&(t.Hash=a)}if(!t.Hash)throw new TypeError("Invalid DAG-PB form");return"string"==typeof e.Name&&(t.Name=e.Name),"number"==typeof e.Tsize&&(t.Tsize=e.Tsize),t}function f(e){if((e instanceof Uint8Array||"string"==typeof e)&&(e={Data:e}),"object"!=typeof e||Array.isArray(e))throw new TypeError("Invalid DAG-PB form");var r={};if(void 0!==e.Data)if("string"==typeof e.Data)r.Data=i.encode(e.Data);else{if(!(e.Data instanceof Uint8Array))throw new TypeError("Invalid DAG-PB form");r.Data=e.Data}if(void 0!==e.Links){if(!Array.isArray(e.Links))throw new TypeError("Invalid DAG-PB form");r.Links=e.Links.map(u),r.Links.sort(c)}else r.Links=[];return r}r.createLink=function(e,r,t){return u({Hash:t,Name:e,Tsize:r})},r.createNode=function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return f({Data:e,Links:r})},r.prepare=f,r.validate=function(e){if(!e||"object"!=typeof e||Array.isArray(e))throw new TypeError("Invalid DAG-PB form");if(!s(e,a))throw new TypeError("Invalid DAG-PB form (extraneous properties)");if(void 0!==e.Data&&!(e.Data instanceof Uint8Array))throw new TypeError("Invalid DAG-PB form (Data must be a Uint8Array)");if(!Array.isArray(e.Links))throw new TypeError("Invalid DAG-PB form (Links must be an array)");for(var r=0;r<e.Links.length;r++){var t=e.Links[r];if(!t||"object"!=typeof t||Array.isArray(t))throw new TypeError("Invalid DAG-PB form (bad link object)");if(!s(t,o))throw new TypeError("Invalid DAG-PB form (extraneous properties on link object)");if(!t.Hash)throw new TypeError("Invalid DAG-PB form (link must have a Hash)");if(t.Hash.asCID!==t.Hash)throw new TypeError("Invalid DAG-PB form (link Hash must be a CID)");if(void 0!==t.Name&&"string"!=typeof t.Name)throw new TypeError("Invalid DAG-PB form (link Name must be a string)");if(void 0!==t.Tsize&&("number"!=typeof t.Tsize||t.Tsize%1!=0))throw new TypeError("Invalid DAG-PB form (link Tsize must be an integer)");if(r>0&&-1===c(t,e.Links[r-1]))throw new TypeError("Invalid DAG-PB form (links must be sorted by Name bytes)")}}},function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=t(15);r.TreewalkCarJoiner=function(){function e(r){if(p(this,e),this._cars=Array.from(r),!this._cars.length)throw new Error("missing CARs")}return h(e,[{key:"car",value:function(){var e=this;return y(u.mark((function r(){var t,a,o,i,c;return u.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return t=e._cars[0],r.next=3,v(t.getRoots());case 3:return a=r.sent,o=n.CarWriter.create(a),i=o.writer,c=o.out,f(u.mark((function r(){var n,a,o,c,s;return u.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return n=new Set,a=function(){var e=f(u.mark((function e(r){var t,a,o,c,s,f,l;return u.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=!0,a=!1,e.prev=2,c=b(r.blocks());case 4:return e.next=6,c.next();case 6:return s=e.sent,t=s.done,e.next=10,s.value;case 10:if(f=e.sent,t){e.next=21;break}if(l=f,e.t0=n.has(l.cid.toString()),e.t0){e.next=18;break}return e.next=17,i.put(l);case 17:n.add(l.cid.toString());case 18:t=!0,e.next=4;break;case 21:e.next=27;break;case 23:e.prev=23,e.t1=e.catch(2),a=!0,o=e.t1;case 27:if(e.prev=27,e.prev=28,t||null==c.return){e.next=32;break}return e.next=32,c.return();case 32:if(e.prev=32,!a){e.next=35;break}throw o;case 35:return e.finish(32);case 36:return e.finish(27);case 37:case"end":return e.stop()}}),e,null,[[2,23,27,37],[28,,32,36]])})));return function(r){return e.apply(this,arguments)}}(),r.prev=1,r.next=4,a(t);case 4:o=l(e._cars.slice(1)),r.prev=5,o.s();case 7:if((c=o.n()).done){r.next=13;break}return s=c.value,r.next=11,a(s);case 11:r.next=7;break;case 13:r.next=18;break;case 15:r.prev=15,r.t0=r.catch(5),o.e(r.t0);case 18:return r.prev=18,o.f(),r.finish(18);case 21:r.next=26;break;case 23:r.prev=23,r.t1=r.catch(1),console.error(r.t1);case 26:return r.prev=26,r.next=29,i.close();case 29:return r.finish(26);case 30:case"end":return r.stop()}}),r,null,[[1,23,26,30],[5,15,18,21]])})))(),r.delegateYield(m(b(c),v),"t0",9);case 9:case"end":return r.stop()}}),r)})))()}}]),e}()},function(e,r,t){"use strict";t.r(r),t.d(r,"LazyIpfsImage",(function(){return X})),t(28),t(30);var a=t(26),o=t(0),i=t.n(o);function m(){var e,r;return{promise:new Promise((function(t,n){r=t,e=n})),reject:e,resolve:r}}function v(e,r,t){var n=function(e){if("function"==typeof e.next)return e;if("function"==typeof e[Symbol.iterator])return e[Symbol.iterator]();if("function"==typeof e[Symbol.asyncIterator])return e[Symbol.asyncIterator]();throw new TypeError('"values" does not to conform to any of the iterator or iterable protocols')}(t),a=[],o=[],i=!1,s=!1,l=0,d=null;function p(){for(;o.length>0&&a.length>0;){(0,o.shift().resolve)({done:!1,value:a.shift()})}for(;o.length>0&&0===l&&i;){var e=o.shift(),r=e.resolve,t=e.reject;d?(t(d),d=null):r({done:!0,value:void 0})}}function h(){return b.apply(this,arguments)}function b(){return(b=f(u.mark((function t(){var o,c,m;return u.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!i){t.next=4;break}p(),t.next=19;break;case 4:if(s||l+a.length>=e){t.next=19;break}return s=!0,l++,t.prev=6,t.next=9,n.next();case 9:o=t.sent,c=o.done,m=o.value,c?(i=!0,l--,p()):function(){var e=f(u.mark((function e(t){var n;return u.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,r(t);case 3:n=e.sent,a.push(n),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),i=!0,d=e.t0;case 10:l--,p(),h();case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(r){return e.apply(this,arguments)}}()(m),t.next=18;break;case 15:t.prev=15,t.t0=t.catch(6),i=!0,l--,d=t.t0,p();case 18:s=!1,h();case 19:case"end":return t.stop()}}),t,null,[[6,15]])})))).apply(this,arguments)}var v=c({next:function(){var e=f(u.mark((function e(){var r,t;return u.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==a.length){e.next=3;break}return r=m(),e.abrupt("return",(o.push(r),h(),r.promise));case 3:return t=a.shift(),e.abrupt("return",(h(),{done:!1,value:t}));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},Symbol.asyncIterator,(function(){return v}));return v}var y=t(27),w=t.n(y),g=t(12);t(25);var x=globalThis.fetch,k=globalThis.FormData,j=(globalThis.Headers,globalThis.Request,globalThis.Response,globalThis.Blob),O=(globalThis.File,globalThis.ReadableStream,new URL("https://dweb.link/")),T=function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=r.gateway||O;return"ipfs:"===(e=new URL(String(e))).protocol?new URL("/ipfs/"+e.href.slice("ipfs://".length),t):e},E=function(){function e(r,t,n){p(this,e),this.ipnft=r,this.url=t,this.data=n,Object.defineProperties(this,{ipnft:{enumerable:!0,writable:!1},url:{enumerable:!0,writable:!1},data:{enumerable:!1,writable:!1}})}return h(e,[{key:"embed",value:function(){return e.embed(this)}}],[{key:"embed",value:function(e){var r=e.data;return C(r,{gateway:O})}}]),e}(),C=function(e,r){return N(e,_,S,r)},_=function(e){return e instanceof URL},A=function(e,r){return[e,new URL(r)]},S=function(e,r){return[e,T(r,e)]},I=function(e,r,t){return"string"==typeof e&&r.has(t.join("."))},M=function(e,r,t){return e.set(t.join("."),r),[e,void 0]},U=function(e){return e instanceof j},N=function(e,r,t,n){var a=P(e,r,t,n,[]);return d(a,2)[1]},P=function(e,r,t,n,a){return r(e,n,a)?t(n,e,a):Array.isArray(e)?B(e,r,t,n,a):"object"==typeof(o=e)&&null!=o?D(e,r,t,n,a):[n,e];var o},D=function(e,r,t,a,o){for(var i=a,c={},s=0,u=Object.entries(e);s<u.length;s++){var f=d(u[s],2),l=f[0],p=f[1],h=P(p,r,t,i,[].concat(n(o),[l])),m=d(h,2),b=m[0],v=m[1];c[l]=v,i=b}return[i,c]},B=function(e,r,t,a,o){var i,c=[],s=a,u=l(e.entries());try{for(u.s();!(i=u.n()).done;){var f=d(i.value,2),p=f[0],h=f[1],m=P(h,r,t,s,[].concat(n(o),[p])),b=d(m,2),v=b[0],y=b[1];c[p]=y,s=v}}catch(w){u.e(w)}finally{u.f()}return[s,c]},R=function(){function e(r){var t=r.token,n=r.endpoint,a=void 0===n?new URL("https://api.nft.storage"):n;p(this,e),this.token=t,this.endpoint=a}return h(e,[{key:"storeBlob",value:function(r){return e.storeBlob(this,r)}},{key:"storeCar",value:function(r,t){return e.storeCar(this,r,t)}},{key:"storeDirectory",value:function(r){return e.storeDirectory(this,r)}},{key:"status",value:function(r){return e.status(this,r)}},{key:"delete",value:function(r){return e.delete(this,r)}},{key:"check",value:function(r){return e.check(this,r)}},{key:"store",value:function(r){return e.store(this,r)}}],[{key:"auth",value:function(e){if(!e)throw new Error("missing token");return{Authorization:"Bearer "+e}}},{key:"storeBlob",value:function(){var r=f(u.mark((function r(t,n){var a,o,i,c,s;return u.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(a=t.endpoint,o=t.token,i=new URL("/upload",a),0!==n.size){r.next=4;break}throw new Error("Content size is 0, make sure to provide some content");case 4:return r.next=6,x(i.toString(),{method:"POST",headers:e.auth(o),body:n});case 6:return c=r.sent,r.next=9,c.json();case 9:if(!(s=r.sent).ok){r.next=12;break}return r.abrupt("return",s.value.cid);case 12:throw new Error(s.error.message);case 13:case"end":return r.stop()}}),r)})));return function(e,t){return r.apply(this,arguments)}}()},{key:"storeCar",value:function(){var r=f(u.mark((function r(t,n){var a,o,i,c,s,l,d,p,h,m,y,x,k,O=arguments;return u.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(a=t.endpoint,o=t.token,i=O.length>2&&void 0!==O[2]?O[2]:{},c=i.onStoredChunk,!(n instanceof j)){r.next=8;break}return r.next=5,g.TreewalkCarSplitter.fromBlob(n,10485760);case 5:r.t0=r.sent,r.next=9;break;case 8:r.t0=new g.TreewalkCarSplitter(n,10485760);case 9:s=r.t0,l=function e(r,t,n){return void 0===t?function(t,n){return n?e(r,t,n):e(r,t)}:void 0===n?function(n){return e(r,t,n)}:v(r,t,n)}(3,function(){var r=f(u.mark((function r(t){var n,i,s,f,l,d,p,h,m,v;return u.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:n=[],i=!0,s=!1,r.prev=3,l=b(t);case 5:return r.next=7,l.next();case 7:return d=r.sent,i=d.done,r.next=11,d.value;case 11:if(p=r.sent,i){r.next=18;break}h=p,n.push(h);case 15:i=!0,r.next=5;break;case 18:r.next=24;break;case 20:r.prev=20,r.t0=r.catch(3),s=!0,f=r.t0;case 24:if(r.prev=24,r.prev=25,i||null==l.return){r.next=29;break}return r.next=29,l.return();case 29:if(r.prev=29,!s){r.next=32;break}throw f;case 32:return r.finish(29);case 33:return r.finish(24);case 34:return m=new j(n,{type:"application/car"}),r.next=37,w()((function(){return e.storeBlob({endpoint:a,token:o},m)}),{retries:5});case 37:return v=r.sent,r.abrupt("return",(c&&c(m.size),v));case 39:case"end":return r.stop()}}),r,null,[[3,20,24,34],[25,,29,33]])})));return function(e){return r.apply(this,arguments)}}()),p=!0,h=!1,r.prev=13,y=b(l(s.cars()));case 15:return r.next=17,y.next();case 17:return x=r.sent,p=x.done,r.next=21,x.value;case 21:if(k=r.sent,p){r.next=28;break}d=k;case 25:p=!0,r.next=15;break;case 28:r.next=34;break;case 30:r.prev=30,r.t1=r.catch(13),h=!0,m=r.t1;case 34:if(r.prev=34,r.prev=35,p||null==y.return){r.next=39;break}return r.next=39,y.return();case 39:if(r.prev=39,!h){r.next=42;break}throw m;case 42:return r.finish(39);case 43:return r.finish(34);case 44:return r.abrupt("return",d);case 45:case"end":return r.stop()}}),r,null,[[13,30,34,44],[35,,39,43]])})));return function(e,t){return r.apply(this,arguments)}}()},{key:"storeDirectory",value:function(){var r=f(u.mark((function r(t,n){var a,o,i,c,s,f,d,p,h,m;return u.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:a=t.endpoint,o=t.token,i=new URL("/upload",a),c=new k,s=0,f=l(n);try{for(f.s();!(d=f.n()).done;)p=d.value,c.append("file",p,p.name),s+=p.size}catch(u){f.e(u)}finally{f.f()}if(0!==s){r.next=7;break}throw new Error("Total size of files should exceed 0, make sure to provide some content");case 7:return r.next=9,x(i.toString(),{method:"POST",headers:e.auth(o),body:c});case 9:return h=r.sent,r.next=12,h.json();case 12:if(!(m=r.sent).ok){r.next=15;break}return r.abrupt("return",m.value.cid);case 15:throw new Error(m.error.message);case 16:case"end":return r.stop()}}),r)})));return function(e,t){return r.apply(this,arguments)}}()},{key:"store",value:function(){var r=f(u.mark((function r(t,n){var a,o,i,c,s,f,l,p;return u.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return a=t.endpoint,o=t.token,F(n),i=new URL("/store",a),c=function(e){var r=P(e,U,M,new k,[]),t=d(r,2),n=t[0],a=t[1];return n.set("meta",JSON.stringify(a)),n}(n),s=new Set(c.keys()),r.next=7,x(i.toString(),{method:"POST",headers:e.auth(o),body:c});case 7:return f=r.sent,r.next=10,f.json();case 10:if(!0!==(l=r.sent).ok){r.next=14;break}return p=l.value,r.abrupt("return",function(e,r){var t=e.ipnft,n=e.url,a=e.data;return new E(t,n,N(a,I,A,r))}(p,s));case 14:throw new Error(l.error.message);case 15:case"end":return r.stop()}}),r)})));return function(e,t){return r.apply(this,arguments)}}()},{key:"status",value:function(){var r=f(u.mark((function r(t,n){var a,o,i,c,s;return u.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return a=t.endpoint,o=t.token,i=new URL("/"+n,a),r.next=4,x(i.toString(),{method:"GET",headers:e.auth(o)});case 4:return c=r.sent,r.next=7,c.json();case 7:if(!(s=r.sent).ok){r.next=10;break}return r.abrupt("return",{cid:s.value.cid,deals:L(s.value.deals),size:s.value.size,pin:z(s.value.pin),created:new Date(s.value.created)});case 10:throw new Error(s.error.message);case 11:case"end":return r.stop()}}),r)})));return function(e,t){return r.apply(this,arguments)}}()},{key:"check",value:function(){var e=f(u.mark((function e(r,t){var n,a,o,i;return u.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.endpoint,a=new URL("/check/"+t,n),e.next=4,x(a.toString());case 4:return o=e.sent,e.next=7,o.json();case 7:if(!(i=e.sent).ok){e.next=10;break}return e.abrupt("return",{cid:i.value.cid,deals:L(i.value.deals),pin:i.value.pin});case 10:throw new Error(i.error.message);case 11:case"end":return e.stop()}}),e)})));return function(r,t){return e.apply(this,arguments)}}()},{key:"delete",value:function(){var r=f(u.mark((function r(t,n){var a,o,i,c,s;return u.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return a=t.endpoint,o=t.token,i=new URL("/"+n,a),r.next=4,x(i.toString(),{method:"DELETE",headers:e.auth(o)});case 4:return c=r.sent,r.next=7,c.json();case 7:if((s=r.sent).ok){r.next=10;break}throw new Error(s.error.message);case 10:case"end":return r.stop()}}),r)})));return function(e,t){return r.apply(this,arguments)}}()}]),e}(),F=function(e){var r=e.name,t=e.description,n=e.image,a=e.decimals;if("string"!=typeof r)throw new TypeError("string property `name` identifying the asset is required");if("string"!=typeof t)throw new TypeError("string property `description` describing asset is required");if(!(n instanceof j))throw new TypeError("property `image` must be a Blob or File object");if(n.type.startsWith("image/")||console.warn("According to ERC721 Metadata JSON Schema 'image' must have 'image/*' mime type.\n\nFor better interoperability we would highly recommend storing content with different mime type under 'properties' namespace e.g. `properties: { video: file }` and using 'image' field for storing a preview image for it instead.\n\nFor more context please see ERC-721 specification https://eips.ethereum.org/EIPS/eip-721"),void 0!==a&&"number"!=typeof a)throw new TypeError("property `decimals` must be an integer value")},L=function(e){return e.map((function(e){var r=s({dealExpiration:null,dealActivation:null},e),t=r.dealActivation,n=r.dealExpiration,a=r.lastChanged;return s(s(s({},e),{},{lastChanged:new Date(a)},t&&{dealActivation:new Date(t)}),n&&{dealExpiration:new Date(n)})}))},z=function(e){return s(s({},e),{},{created:new Date(e.created)})};function W(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function V(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?W(Object(t),!0).forEach((function(r){H(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):W(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}function H(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}var G=function(e,r){var t=r.message?r.message:e.message;switch(r.type){case"PROCESSING":return V(V({},e),{},{loading:!0,error:!1,uri:null,message:t});case"SUCCESS":return V(V({},e),{},{loading:!1,error:!1,uri:r.payload,message:t});case"INFO":return V(V({},e),{},{message:t});case"ERROR":return V(V({},e),{},{loading:!1,error:!0,uri:null,message:t});default:throw new Error}};function q(e,r,t,n,a,o,i){try{var c=e[o](i),s=c.value}catch(e){return void t(e)}c.done?r(s):Promise.resolve(s).then(n,a)}function J(e){return function(){var r=this,t=arguments;return new Promise((function(n,a){var o=e.apply(r,t);function i(e){q(o,n,a,i,c,"next",e)}function c(e){q(o,n,a,i,c,"throw",e)}i(void 0)}))}}function Y(e,r){return function(e){if(Array.isArray(e))return e}(e)||function(e,r){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var n,a,o=[],i=!0,c=!1;try{for(t=t.call(e);!(i=(n=t.next()).done)&&(o.push(n.value),!r||o.length!==r);i=!0);}catch(e){c=!0,a=e}finally{try{i||null==t.return||t.return()}finally{if(c)throw a}}return o}}(e,r)||function(e,r){if(e){if("string"==typeof e)return Z(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?Z(e,r):void 0}}(e,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Z(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}var X=function(e){var r=e.endpoint,t=e.token,n=e.ipfspath,c=e.setIpfsUri;if(!r||!t)throw new Error("Please pass nft.storage endpoint and token to LazyIpfsImage component.");var s=n||"https://ipfs.io/ipfs ",f=Y(Object(o.useReducer)(G,{loading:!1,error:!1,uri:null,message:null}),2),l=f[0],d=f[1],p=Y(Object(o.useState)(),2),h=p[0],m=p[1],b=Y(Object(o.useState)(),2),v=b[0],y=b[1],w=function(){var e=J(u.mark((function e(n){var a,o,i,f;return u.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.preventDefault(),a=function(){var e=J(u.mark((function e(r){return u.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:fetch(r).then((function(e){return e.ok||e.text().then((function(e){return d({type:"ERROR",message:e}),null})),e.blob()})).then((function(e){if(e){var r=URL.createObjectURL(e);d({type:"SUCCESS",message:v,payload:r})}}));case 1:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}(),e.prev=2,h){e.next=6;break}return alert("Please choose file first"),e.abrupt("return");case 6:return d({type:"PROCESSING",message:"Uploading to IPFS, please wait ..."}),o=new R({endpoint:r,token:t}),e.next=10,o.storeBlob(new Blob([h]));case 10:return i=e.sent,e.next=13,o.status(i);case 13:e.sent,m(null),f="".concat(s,"/").concat(i),y(f),c?(console.log("SET URI"),c(f)):console.log("NOT SET"),d({type:"INFO",message:"Upload success at ".concat(f)}),a(f),e.next=26;break;case 22:e.prev=22,e.t0=e.catch(2),console.log(e.t0),d({type:"ERROR",message:e.t0.message});case 26:case"end":return e.stop()}}),e,null,[[2,22]])})));return function(r){return e.apply(this,arguments)}}(),g=function(){var e=J(u.mark((function e(r){return u.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:m(r.target.files[0]);case 1:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}();return i.a.createElement("div",{className:"upload__form"},i.a.createElement("div",{className:"upload__frame"},l.uri&&i.a.createElement(a.LazyImage,{className:"upload__artwork",src:l.uri,alt:"Artwork",debounceDurationMs:400,placeholder:function(e){e.imageProps;var r=e.ref;return i.a.createElement(i.a.Fragment,null,!l.loading&&i.a.createElement("div",{className:"upload__placeholder",ref:r},i.a.createElement("div",{className:"loader"}),i.a.createElement("span",null,"Please be patient, it could take a few minutes")))},actual:function(e){var r=e.imageProps;return i.a.createElement("img",r)}}),l.loading&&i.a.createElement("div",{className:"upload__placeholder"},i.a.createElement("div",{className:"loader"}),i.a.createElement("span",null,"Please be patient, it could take a few minutes")),!l.uri&&!l.loading&&i.a.createElement("div",{className:"upload__placeholder"},i.a.createElement("span",{className:"upload__prompt"},"Please upload no less than [3000x2000]"))),i.a.createElement("label",{className:"btn upload__btn btn-bg rounded"},i.a.createElement("input",{id:"file_input",type:"file",onChange:function(e){return g(e)}}),"1. Choose File"),i.a.createElement("div",{className:"btn upload__btn btn-bg rounded",onClick:function(e){return w(e)}},"2. Upload Artwork"),l.message&&i.a.createElement("div",{className:"upload_message"},l.error?i.a.createElement("span",null,"\u274c"):i.a.createElement("span",null,"\u2705"),l.message))}}])},77:function(e,r){},79:function(e,r){},95:function(e,r,t){},96:function(e,r,t){},98:function(e,r,t){}},[[138,1,2]]]);
//# sourceMappingURL=main.40fe4799.chunk.js.map