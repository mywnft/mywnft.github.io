(this["webpackJsonpmy-world"]=this["webpackJsonpmy-world"]||[]).push([[0],{110:function(e,t,n){},111:function(e,t,n){},130:function(e,t,n){},132:function(e,t,n){},133:function(e,t,n){},160:function(e,t,n){},165:function(e,t,n){},166:function(e,t,n){},167:function(e,t,n){"use strict";n.r(t);var r=n(1),c=n.n(r),a=n(74),i=n.n(a),o=n(8);Object(o.b)({"accessNode.api":Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_ACCESS_NODE,"discovery.wallet":Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_WALLET_DISCOVERY,"0xFungibleTokenContract":Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_FT_CONTRACT,"0xNonFungibleTokenContract":Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_NFT_CONTRACT,"0xFUSDContract":Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_FUSD_CONTRACT,"0xMyWContract":Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_MYW_CONTRACT,"0xMyWArtContract":Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_MYWART_CONTRACT,"0xMyWMarketContract":Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_MYWMARKET_CONTRACT});n(110),n(111);var l=n(9),s=n(11),u=n(6),d=function(e){var t=Object(r.useState)(e),n=Object(l.a)(t,2),c=n[0],a=n[1];return{value:c,setValue:a,reset:function(){return a("")},bind:{value:c,onChange:function(e){a(e.target.value)}}}},b=n(4),f=n.n(b),j=n(10),p=n(77),O=n(78),m=n(79),y=n.n(m),h=n(80),v=n.n(h),x=y.a.create({baseURL:"http://very:5000/api/v1",headers:{"Content-type":"application/json"}}),_=(new v.a).compile({name:{type:"string",min:3,max:255},price:{type:"number",positive:!0,integer:!1},description:{type:"string",min:3,max:255},uri:{type:"url",messages:{required:"An artwork must be uploaded",url:"Url is not in correct format"}}}),g=new(function(){function e(){Object(p.a)(this,e)}return Object(O.a)(e,[{key:"getAll",value:function(){return x.get("gallery/")}},{key:"get",value:function(e){return x.get("gallery/".concat(e))}},{key:"create",value:function(e){return x.post("gallery/",e)}},{key:"delete",value:function(e){return x.delete("gallery/".concat(e))}}]),e}()),C=n(27),W=function(e,t){switch(t.type){case"PROCESSING":return Object(u.a)(Object(u.a)({},e),{},{loading:!0,error:!1});case"SUCCESS":return Object(u.a)(Object(u.a)({},e),{},{loading:!1,error:!1,data:t.payload});case"ADD":return Object(u.a)(Object(u.a)({},e),{},{data:[].concat(Object(C.a)(e.data),[t.payload])});case"ERROR":return Object(u.a)(Object(u.a)({},e),{},{loading:!1,error:!0});default:throw new Error}},M=(n(130),n(0));function S(){return Object(M.jsxs)("div",{className:"lds-ring",children:[Object(M.jsx)("div",{}),Object(M.jsx)("div",{}),Object(M.jsx)("div",{}),Object(M.jsx)("div",{})]})}n(132);function A(e){var t=e.id;return Object(M.jsxs)("div",{className:"tx__wrapper",children:[Object(M.jsx)("div",{className:"tx__loader",children:Object(M.jsx)(S,{})}),Object(M.jsx)("div",{className:"tx__content",children:Object(M.jsxs)("p",{children:["Tx: ",t]})})]})}var T=c.a.createContext();function P(e){var t=e.children,n=Object(r.useState)([]),c=Object(l.a)(n,2),a=c[0],i=c[1],s=Object(r.useState)(!0),d=Object(l.a)(s,2),b=d[0],p=d[1];Object(r.useEffect)((function(){O()}),[]);var O=function(){var e=Object(j.a)(f.a.mark((function e(){var t,n,r,c,a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((t=window.localStorage.getItem("txs"))&&0!==t.length){e.next=4;break}return p(!1),e.abrupt("return");case 4:n=null===t||void 0===t?void 0:t.split(","),r=[],c=f.a.mark((function e(t){var c,a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=n[t],e.next=3,h(c);case 3:if(4!==(null===(a=e.sent)||void 0===a?void 0:a.status)){e.next=6;break}return e.abrupt("return","continue");case 6:Object(o.i)(c).subscribe((function(e){return m(null===e||void 0===e?void 0:e.status,c)})),r.push(c);case 8:case"end":return e.stop()}}),e)})),a=0;case 8:if(!(a<n.length)){e.next=16;break}return e.delegateYield(c(a),"t0",10);case 10:if("continue"!==e.t0){e.next=13;break}return e.abrupt("continue",13);case 13:a++,e.next=8;break;case 16:localStorage.setItem("txs",r.toString()),i(r.map((function(e){return{id:e}}))),p(!1);case 19:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),m=function(e,t){if(4!==e){var n=a.find((function(e){return e.id===t})),r=a.filter((function(e){return e.id!==t}));if(n){var c=Object(u.a)(Object(u.a)({},n),{},{status:e});i([].concat(Object(C.a)(r),[c]))}}else y(t)},y=function(e){var t=a.filter((function(t){return t.id!==e}));i(t)},h=function(){var e=Object(j.a)(f.a.mark((function e(t){var n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(o.h)([Object(o.e)(t)]).then(o.d);case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return b?Object(M.jsx)(S,{}):Object(M.jsxs)(T.Provider,{value:{runningTxs:0!==a.length,addTx:function(e){var t={id:e};i((function(e){return[].concat(Object(C.a)(e),[t])})),Object(o.i)(e).subscribe((function(e){return m(null===e||void 0===e?void 0:e.status,null===t||void 0===t?void 0:t.id)})),window.localStorage.setItem("txs",[].concat(Object(C.a)(a),[null===t||void 0===t?void 0:t.id]).toString())}},children:[Object(M.jsx)("div",{className:"txs__list",children:a.map((function(e){return Object(M.jsx)(A,{id:null===e||void 0===e?void 0:e.id},null===e||void 0===e?void 0:e.id)}))}),t]})}function E(){return Object(r.useContext)(T)}var R=function(e,t){switch(t.type){case"PROCESSING":return Object(u.a)(Object(u.a)({},e),{},{loading:!0,error:!1});case"SUCCESS":return Object(u.a)(Object(u.a)({},e),{},{loading:!1,error:!1,data:t.payload});case"ERROR":return Object(u.a)(Object(u.a)({},e),{},{loading:!1,error:!0});default:throw new Error}};function N(e){var t=e.title,n=e.subtitle;return Object(M.jsxs)(M.Fragment,{children:[Object(M.jsx)("img",{src:"".concat("","/assets/MyWorld.png"),width:"200px",alt:"MyWorld"}),Object(M.jsx)("h1",{className:"app__title",children:t}),Object(M.jsx)("h3",{className:"app__subtitle",children:n})]})}var k=Object(r.createContext)();function w(e){var t=e.children,n=function(){var e=Object(r.useState)(),t=Object(l.a)(e,2),n=t[0],c=t[1],a={logIn:o.a,logOut:o.j};return Object(r.useEffect)((function(){var e=!1;return e||o.c().subscribe(c),function(){e=!0}}),[]),[n,!0,a]}(),c=Object(l.a)(n,3),a=c[0],i=c[1],s=c[2];return a&&i?Object(M.jsx)(k.Provider,{value:Object(u.a)({user:a,loggedIn:i},s),children:t}):Object(M.jsxs)(M.Fragment,{children:[Object(M.jsx)(N,{title:Object(M.jsxs)(M.Fragment,{children:[Object(M.jsx)("span",{className:"highlight",children:"My"}),"World"]}),subtitle:Object(M.jsxs)(M.Fragment,{children:["An NFT gallery of ",Object(M.jsx)("span",{className:"highlight",children:"arts and music"})," for autism community"]})}),Object(M.jsx)("div",{style:{display:"inline-block"},className:"btn btn-bg rounded",onClick:function(){return null===s||void 0===s?void 0:s.logIn()},children:"Sign In to start"})]})}var F=function(){return Object(r.useContext)(k)},D=Object(r.createContext)();function I(e){var t=e.children,n=F().user,c=function(e){var t=Object(r.useState)(!0),n=Object(l.a)(t,2),c=n[0],a=n[1],i=Object(r.useState)(null),s=Object(l.a)(i,2),u=s[0],d=s[1],b=E().addTx;return Object(r.useEffect)((function(){(null===e||void 0===e?void 0:e.addr)&&function(){var t=Object(j.a)(f.a.mark((function t(){var n;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(o.g)({cadence:"\nimport MyWArt from 0xMyWArtContract\nimport NonFungibleToken from 0xNonFungibleTokenContract\n\npub fun main(addr: Address): Bool {\n  let ref = getAccount(addr).getCapability<&{NonFungibleToken.CollectionPublic}>(MyWArt.MyWArtCollectionPublicPath).check()\n  return ref\n}\n",args:function(t,n){return[t(null===e||void 0===e?void 0:e.addr,n.Address)]}});case 3:n=t.sent,d(n),a(!1),t.next=12;break;case 8:t.prev=8,t.t0=t.catch(0),console.log(t.t0),a(!1);case 12:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(){return t.apply(this,arguments)}}()()}),[]),{loading:c,collection:u,createCollection:function(){var e=Object(j.a)(f.a.mark((function e(){var t;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(o.f)({cadence:"\n  import MyW from 0xMyWContract\n  import MyWMarket from 0xMyWMarketContract\n  import MyWArt from 0xMyWArtContract\n  import NonFungibleToken from 0xNonFungibleTokenContract  \n\n  transaction {\n\n    prepare(acct: AuthAccount) {\n\n      if acct.borrow<&MyWArt.Collection>(from: MyWArt.MyWArtCollectionStoragePath) == nil {\n\n        // Put a new Collection in storage\n        acct.save<@MyWArt.Collection>(\n            <- MyWArt.createEmptyCollection(), \n            to: MyWArt.MyWArtCollectionStoragePath\n        )\n\n        // Create a public capability for the Collection\n        acct.link<&{NonFungibleToken.CollectionPublic}>(\n            MyWArt.MyWArtCollectionPublicPath, \n            target: MyWArt.MyWArtCollectionStoragePath\n        )\n\n        // Create a public Data capability for the Collection\n        acct.link<&{MyWArt.Data}>(MyWArt.MyWArtDataPublicPath, target: MyWArt.MyWArtCollectionStoragePath)\n      }\n\n      if acct.borrow<&MyWMarket.SaleCollection>(from: MyWMarket.MyWSaleCollectionPath) == nil {\n\n        \n        // Where to deposit sale revenue to\n        let ownerCapability = acct\n            .getCapability(MyW.MyWVaultReceiver)\n\n        // Where to deposit sale cut to\n        let broker = getAccount(MyWMarket.DefaultBeneficiaryAddress)\n        let beneficiaryCapability = broker\n            .getCapability(MyW.MyWVaultReceiver)\n\n        // Let's stick with default cut\n        let cutPercentage = MyWMarket.DefaultCutPercentage\n\n\n        let saleCollection <- MyWMarket.createEmptySaleCollection(\n            ownerCapability: ownerCapability,\n            beneficiaryCapability: beneficiaryCapability,\n            cutPercentage: cutPercentage\n        )\n\n        // Put a new SaleCollection in storage\n        acct.save<@MyWMarket.SaleCollection>(\n            <- saleCollection, \n            to: MyWMarket.MyWSaleCollectionPath\n        )\n\n        // Create a public capability for the SaleCollection\n        acct.link<&{MyWMarket.SalePublic}>(\n            MyWMarket.MyWSalePublicPath, \n            target: MyWMarket.MyWSaleCollectionPath\n        )\n\n      }\n\n    }\n \n  }\n",limit:55});case 2:return t=e.sent,b(t),e.next=6,Object(o.i)(t).onceSealed();case 6:d(!0);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),deleteCollection:function(){var e=Object(j.a)(f.a.mark((function e(){var t;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(o.f)({cadence:'\n  import MyWArt from 0xMyWArtContract\n\n  transaction () {\n\n    let account: AuthAccount\n\n    prepare(acct: AuthAccount) { \n\n      let collectionRef = acct.borrow<&MyWArt.Collection>(from: MyWArt.MyWArtCollectionStoragePath)\n        ?? panic("Could not borrow collection reference")\n      self.account = acct\n    }\n\n    execute {\n\n      let collection <- self.account.load<@MyWArt.Collection>(from: MyWArt.MyWArtCollectionStoragePath)\n        ?? panic("Could not borrow collection reference")\n\n      destroy collection\n        \n      self.account.unlink(MyWArt.MyWArtCollectionPublicPath)\n\n      self.account.unlink(MyWArt.MyWArtDataPublicPath)\n\n    }\n\n  }  \n',limit:75});case 3:return t=e.sent,b(t),e.next=7,Object(o.i)(t).onceSealed();case 7:d(!1),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.log(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}()}}(n),a=c.collection,i=c.createCollection,s=c.deleteCollection,d=function(e){var t=Object(r.useReducer)(R,{loading:!0,error:!1,data:null}),n=Object(l.a)(t,2),c=n[0],a=n[1],i=E().addTx;Object(r.useEffect)((function(){s()}),[]);var s=function(){var t=Object(j.a)(f.a.mark((function t(){var n;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a({type:"PROCESSING"}),t.prev=1,t.next=4,Object(o.g)({cadence:"\n  import FungibleToken from 0xFungibleTokenContract\n  import MyW from 0xMyWContract\n\n  pub fun main(address: Address): UFix64? {\n    let account = getAccount(address)\n    if let vaultRef = account.getCapability(MyW.MyWVaultBalance).borrow<&{FungibleToken.Balance}>() {\n      return vaultRef.balance\n    } \n    return nil\n  }\n",args:function(t,n){return[t(null===e||void 0===e?void 0:e.addr,n.Address)]}});case 4:n=t.sent,a({type:"SUCCESS",payload:n}),t.next=12;break;case 8:t.prev=8,t.t0=t.catch(1),a({type:"ERROR"}),console.log(t.t0);case 12:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(){return t.apply(this,arguments)}}(),d=function(){var e=Object(j.a)(f.a.mark((function e(){var t;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a({type:"PROCESSING"}),e.prev=1,e.next=4,Object(o.f)({cadence:"\n  import FungibleToken from 0xFungibleTokenContract\n  import MyW from 0xMyWContract\n\n  transaction {\n    prepare(signer: AuthAccount) {\n      if(signer.borrow<&MyW.Vault>(from: MyW.MyWVaultStorage) != nil) {\n        return\n      }\n    \n      signer.save(<-MyW.createEmptyVault(), to: MyW.MyWVaultStorage)\n\n      signer.link<&{FungibleToken.Receiver}>(\n        MyW.MyWVaultReceiver,\n        target: MyW.MyWVaultStorage\n      )\n\n      signer.link<&{FungibleToken.Balance}>(\n        MyW.MyWVaultBalance,\n        target: MyW.MyWVaultStorage\n      )\n    }\n  }\n",limit:100});case 4:return t=e.sent,i(t),e.next=8,Object(o.i)(t).onceSealed();case 8:a({type:"SUCCESS"}),s(),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(1),console.log(e.t0),a({type:"ERROR"});case 16:case"end":return e.stop()}}),e,null,[[1,12]])})));return function(){return e.apply(this,arguments)}}();return Object(u.a)(Object(u.a)({},c),{},{createMyWVault:d,getMyWBalance:s})}(n),b=d.data,p=d.createMyWVault,O=d.getMyWBalance,m=function(){var e=Object(r.useReducer)(R,{loading:!1,error:!1,data:[]}),t=Object(l.a)(e,2),n=t[0],c=t[1],a=function(){var e=Object(j.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:c({type:"PROCESSING"});try{g.getAll().then((function(e){c({type:"SUCCESS",payload:e.data})})).catch((function(e){console.log(e),c({type:"ERROR"})}))}catch(t){console.log(t),c({type:"ERROR"})}case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(r.useEffect)((function(){a()}),[]),Object(u.a)(Object(u.a)({},n),{},{fetchGallery:a})}(),y=m.data,h=function(e,t,n,c){var a=Object(r.useReducer)(W,{loading:!1,error:!1,data:[]}),i=Object(l.a)(a,2),s=i[0],d=i[1],b=E(),p=b.addTx,O=b.runningTxs,m=function(){var e=Object(j.a)(f.a.mark((function e(){var t;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=3,Object(o.g)({cadence:"\n      import MyWArt from 0xMyWArtContract\n      pub fun main(): UFix64 {\n        return MyWArt.DefaultMintFee\n      }\n    "});case 3:return t=e.sent,e.abrupt("return",t);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),y=function(){var t=Object(j.a)(f.a.mark((function t(){var n,r,c,a;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log(e),d({type:"PROCESSING"}),t.prev=2,n=e.addr,t.next=6,Object(o.g)({cadence:'\n  import MyWArt from 0xMyWArtContract\n\n  pub fun main(address: Address):  {UInt64: MyWArt.MyWArtData} {\n\n    let account = getAccount(address)\n    \n    let dataRef = account\n      .getCapability<&{MyWArt.Data}>(MyWArt.MyWArtDataPublicPath).borrow() ??\n        panic("Could not borrow a reference to NFT collection")\n\n    return dataRef.getDataCollection()\n\n  }\n',limit:55,args:function(e,t){return[e(n,t.Address)]}});case 6:for(a in r=t.sent,console.log(r),c=[],r)r.hasOwnProperty(a)&&(r[a].id=a,c.push(r[a]));d({type:"SUCCESS",payload:c}),t.next=17;break;case 13:t.prev=13,t.t0=t.catch(2),console.log(t.t0),d({type:"ERROR"});case 17:case"end":return t.stop()}}),t,null,[[2,13]])})));return function(){return t.apply(this,arguments)}}();Object(r.useEffect)((function(){y()}),[]);var h=function(){var e=Object(j.a)(f.a.mark((function e(t){var r,a,i,l,s;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!O){e.next=3;break}return alert("Transactions are still running. Please wait for them to finish first."),e.abrupt("return");case 3:return e.prev=3,r=t.id,a=t.seller_address,i=parseInt(r),l=a,e.next=9,Object(o.f)({cadence:'\nimport MyWArt from 0xMyWArtContract\nimport MyW from 0xMyWContract\nimport NonFungibleToken from 0xNonFungibleTokenContract\nimport MyWMarket from 0xMyWMarketContract\n\ntransaction(artId: UInt64, sellerAddress: Address) {\n\n    let collectionRef: &{NonFungibleToken.CollectionPublic}\n    let saleRef: &{MyWMarket.SalePublic}\n    let vaultRef: &MyW.Vault\n    let want_price: UFix64\n\n    prepare(acct: AuthAccount) {\n\n        // Get collection receiver capability\n        self.collectionRef = acct\n            .getCapability(MyWArt.MyWArtCollectionPublicPath)\n            .borrow<&{NonFungibleToken.CollectionPublic}>()\n            ?? panic(" Could not borrow reference to MyWArt receiver")\n        \n        let sellerAccount = getAccount(sellerAddress) \n        \n        // Get Sale Collection  capability\n        self.saleRef = sellerAccount\n            .getCapability(MyWMarket.MyWSalePublicPath)\n            .borrow<&{MyWMarket.SalePublic}>()\n            ?? panic(" Could not borrow reference to MyWArt sale collection")\n\n        \n        // Get vault\n        self.vaultRef = acct.borrow<&MyW.Vault>(from: MyW.MyWVaultStorage)\n            ?? panic(" Could not borrow reference to MyW main vault")\n\n        // Check balance\n        self.want_price = self.saleRef.getPrice(tokenID: artId)!\n        \n        log("*************************")\n        log(self.vaultRef.balance)\n\n        assert(self.vaultRef.balance >= self.want_price, message: "Not enought MyW balance to purcase the art")\n\n    }\n\n    execute {\n\n        let vault <- self.vaultRef.withdraw(amount: self.want_price)\n\n        let nft <- self.saleRef.purchase(tokenID: artId, buyTokens: <- vault)\n\n        self.collectionRef.deposit(token: <- nft)\n\n    }\n\n}\n\n',limit:200,args:function(e,t){return[e(i,t.UInt64),e(l,t.Address)]}});case 9:return s=e.sent,g.delete(i).then((function(){y(),c()})).catch((function(e){console.log(e)})),p(s),e.next=14,Object(o.i)(s).onceSealed();case 14:return e.next=16,n();case 16:e.next=21;break;case 18:e.prev=18,e.t0=e.catch(3),console.log(e.t0);case 21:case"end":return e.stop()}}),e,null,[[3,18]])})));return function(t){return e.apply(this,arguments)}}(),v=function(){var e=Object(j.a)(f.a.mark((function e(t){var r,a,i,l,s;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!O){e.next=3;break}return alert("Transactions are still running. Please wait for them to finish first."),e.abrupt("return");case 3:return e.prev=3,r=t.id,a=t.want_price,i=parseFloat(a).toFixed(8),l=parseInt(r),e.next=9,Object(o.f)({cadence:'\nimport MyWArt from 0xMyWArtContract\nimport NonFungibleToken from 0xNonFungibleTokenContract\nimport MyWMarket from 0xMyWMarketContract\n\ntransaction(artId: UInt64, wantPrice: UFix64) {\n\n    let collectionRef: &MyWArt.Collection\n    let saleRef: &MyWMarket.SaleCollection\n\n    prepare(acct: AuthAccount) {\n\n        self.collectionRef = acct.borrow<&MyWArt.Collection>(\n            from: MyWArt.MyWArtCollectionStoragePath\n        ) \n            ?? panic(" Could not borrow reference to MyWArt private collection")\n        \n        self.saleRef = acct.borrow<&MyWMarket.SaleCollection>(\n            from: MyWMarket.MyWSaleCollectionPath\n        )\n            ?? panic(" Could not borrow reference to MyWArt sale collection")\n\n    }\n\n    execute {\n\n        let nft <- self.collectionRef\n            .withdraw(withdrawID: artId) as! @MyWArt.NFT\n        \n        self.saleRef.listForSale(\n            token: <- nft,\n            price: wantPrice\n        )\n\n    }\n\n}\n',limit:55,args:function(e,t){return[e(l,t.UInt64),e(i,t.UFix64)]}});case 9:return s=e.sent,g.create(t).then((function(){y()})).catch((function(e){console.log(e)})),p(s),e.next=14,Object(o.i)(s).onceSealed();case 14:return e.next=16,n();case 16:c(),e.next=22;break;case 19:e.prev=19,e.t0=e.catch(3),console.log(e.t0);case 22:case"end":return e.stop()}}),e,null,[[3,19]])})));return function(t){return e.apply(this,arguments)}}(),x=function(){var e=Object(j.a)(f.a.mark((function e(r){var c,a,i,l,s,u,d;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=3;break}return alert("You need to enable the collection first. Go to the tab Collection"),e.abrupt("return");case 3:if(!O){e.next=6;break}return alert("Transactions are still running. Please wait for them to finish first."),e.abrupt("return");case 6:return c=r.name,a=r.price,i=r.uri,l=r.description,s=parseFloat(a).toFixed(8),u=Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_MYWART_CONTRACT,e.prev=9,e.next=12,Object(o.f)({cadence:'\nimport MyWArt from 0xMyWArtContract\nimport MyW from 0xMyWContract\nimport NonFungibleToken from 0xNonFungibleTokenContract\n\n// This transaction is what an admin would use to mint a single NFT\n// and deposit it in a user\'s collection\n\n// AuthAccount must have enough MyW token balance to pay for minting fee\n\ntransaction(name: String, price: UFix64, uri: String, description: String, minter: Address) { \n    // local variable for the admin reference\n    let minterRef: &{MyWArt.MinterProxyPublic}\n    let collectionRef: &{NonFungibleToken.CollectionPublic}\n    let myWRef: &MyW.Vault\n\n    prepare(acct: AuthAccount) {\n\n        let admin = getAccount(minter)\n\n        self.minterRef = admin\n            .getCapability(MyWArt.MinterProxyPublicPath)\n            .borrow<&{MyWArt.MinterProxyPublic}>() ??\n                panic("Could not borrow reference to minter")\n\n        self.collectionRef = acct\n            .getCapability(MyWArt.MyWArtCollectionPublicPath)\n            .borrow<&{NonFungibleToken.CollectionPublic}>() ??\n                panic("Could not borrow reference to collection public for receiving nft")\n            \n        self.myWRef = acct.borrow<&MyW.Vault>(from: MyW.MyWVaultStorage) ??\n            panic("Could not borrow reference to MyW vault")\n\n        assert(self.myWRef.balance >= MyWArt.DefaultMintFee, message: "Could not mint NFT: MyW token balance is low")    \n\n    }\n\n    execute {\n\n        let paymentVault <- self.myWRef.withdraw(amount: MyWArt.DefaultMintFee) as! @MyW.Vault\n\n        // Mint a new NFT\n        let data = MyWArt.MyWArtData(\n            name: name,\n            price: price,\n            uri: uri,\n            description: description\n        )\n\n        let nft <- self.minterRef.mintMyWArt(data: data, fee: <- paymentVault)\n          \n        self.collectionRef.deposit(token: <-nft)\n\n    }\n}\n',limit:100,args:function(e,t){return[e(c,t.String),e(s,t.UFix64),e(i,t.String),e(l,t.String),e(u,t.Address)]}});case 12:return d=e.sent,p(d),e.next=16,Object(o.i)(d).onceSealed();case 16:return e.next=18,n();case 18:return e.next=20,y();case 20:e.next=25;break;case 22:e.prev=22,e.t0=e.catch(9),console.log(e.t0);case 25:case"end":return e.stop()}}),e,null,[[9,22]])})));return function(t){return e.apply(this,arguments)}}(),_=function(){var e=Object(j.a)(f.a.mark((function e(){var t;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=3,Object(o.g)({cadence:"\n      pub fun main(): AnyStruct {\n        return true\n      }\n    "});case 3:t=e.sent,console.log(t);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(u.a)(Object(u.a)({},s),{},{putForSale:v,mintMyWArt:x,testScript:_,purchaseMyWArt:h,queryMyWArtMintFee:m})}(n,a,O,m.fetchGallery),v=h.data,x=h.putForSale,_=h.purchaseMyWArt,C=h.mintMyWArt,S=h.queryMyWArtMintFee,A=h.testScript;return Object(M.jsx)(D.Provider,{value:{saleItems:y,useMyarts:v,putForSale:x,purchaseMyWArt:_,mintMyWArt:C,queryMyWArtMintFee:S,testScript:A,collection:a,createCollection:i,deleteCollection:s,balance:b,createMyWVault:p,getMyWBalance:O},children:t})}var U=function(){return Object(r.useContext)(D)};n(66);function H(e){var t=e.myart,n=e.store,c=U(),a=c.useMyarts,i=c.putForSale,o=t.id,s=t.name,b=t.price,f=t.uri,j=F().user,p=a.some((function(e){return(null===e||void 0===e?void 0:e.id)===(null===t||void 0===t?void 0:t.id)})),O=d(b.slice(0,-6)),m=O.value,y=O.bind,h=(O.reset,d("Anonymous")),v=h.value,x=h.bind,_=(h.reset,Object(r.useState)(!1)),g=Object(l.a)(_,2),C=g[0],W=g[1];return Object(M.jsxs)("div",{className:"myart-card__border",children:[Object(M.jsxs)("div",{className:"myart-card__wrapper ".concat(p&&n&&"faded"),children:[Object(M.jsx)("img",{className:"myart-card__image img-large",src:f,alt:"Art"}),Object(M.jsx)("br",{}),Object(M.jsx)("h3",{className:"myart-cart__title",children:s}),Object(M.jsxs)("p",{className:"myart-card__info",children:["# ",o]})]}),Object(M.jsxs)("div",{className:"btn btn-bordered btn-light",children:[Object(M.jsxs)("div",{onClick:function(){W(!C)},children:[Object(M.jsx)("i",{className:"ri-price-tag-3-fill btn-icon"})," ",parseInt(b)," MyW"]}),C&&Object(M.jsxs)(M.Fragment,{children:[Object(M.jsxs)("div",{className:"myart__form__item ",children:[Object(M.jsx)("label",{children:"Price"}),Object(M.jsx)("input",Object(u.a)({type:"number",step:".01"},y))]}),Object(M.jsxs)("div",{className:"myart__form__item ",children:[Object(M.jsx)("label",{children:"Artist Name (optional)"}),Object(M.jsx)("input",Object(u.a)({type:"text"},x))]}),Object(M.jsx)("div",{className:"btn upload__btn btn-bg rounded",onClick:function(){return t.want_price=m,t.seller_name=v,t.seller_address=j.addr,void i(t)},children:"Put for sale"})]})]}),Object(M.jsx)("div",{className:"collected",children:"Collected"})]})}n(67),n(133);var K=n(81),V=n(83);function L(){var e=U(),t=e.mintMyWArt,n=e.queryMyWArtMintFee,c=d(""),a=c.value,i=c.bind,o=c.reset,s=d(""),b=s.value,p=s.bind,O=s.reset,m=d(""),y=m.value,h=m.bind,v=m.reset,x=Object(r.useState)(null),g=Object(l.a)(x,2),C=g[0],W=g[1],S=Object(r.useState)(null),A=Object(l.a)(S,2),T=A[0],P=A[1],E={endpoint:Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_IPFS_END_POINT,token:Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_IPFS_API_KEY,ipfspath:Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_IPFS_PATH,setIpfsUri:function(e){return W(e)}};Object(V.useEffect)((function(){Object(j.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=P,e.next=3,n();case 3:e.t1=e.sent,(0,e.t0)(e.t1);case 5:case"end":return e.stop()}}),e)})))()}),[]);var R=function(){var e=Object(j.a)(f.a.mark((function e(n){var r,c,i;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.preventDefault(),{name:a,price:b,uri:C,description:y},!0!==(c=_(r={name:"Test",price:100,uri:"https://ipfs.io/ipfs/bafkreih6qup2zmio7nf4anbwrthztahg7rb7rb7mghw4iyg6nkg32gpn3e",description:"Only for testing"}))){e.next=10;break}if(!confirm("Minting myart: "+"\n    name: ".concat(r.name,",")+"\n    price: ".concat(r.price,",")+"\n    uri: ".concat(r.uri,",")+"\n    description: ".concat(r.description)+"\nProceed?")){e.next=8;break}return e.next=8,t(r);case 8:e.next=14;break;case 10:i="Error:",console.log(c),c.forEach((function(e){i="".concat(i,"\n").concat(e.message)})),alert(i);case 14:o(),O(),v();case 17:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(M.jsx)(M.Fragment,{children:Object(M.jsxs)("div",{className:"myart__form__border",children:[Object(M.jsx)("div",{className:"myart-cart__title",children:"Mint Your Art"}),Object(M.jsxs)("form",{className:"myart__form",children:[Object(M.jsx)(K.LazyIpfsImage,Object(u.a)({},E)),Object(M.jsxs)("div",{className:"myart__form__item ",children:[Object(M.jsx)("label",{children:"Name"}),Object(M.jsx)("input",Object(u.a)({type:"text"},i))]}),Object(M.jsxs)("div",{className:"myart__form__item ",children:[Object(M.jsx)("label",{children:"Price"}),Object(M.jsx)("input",Object(u.a)({type:"number",step:".01"},p))]}),Object(M.jsxs)("div",{className:"myart__form__item ",children:[Object(M.jsx)("label",{children:"Description"}),Object(M.jsx)("input",Object(u.a)({type:"text"},h))]}),Object(M.jsx)("div",{className:"btn upload__btn btn-bg rounded",onClick:R,children:"3. Submit"}),Object(M.jsxs)("div",{children:["* Mint Fee: ",T?T.slice(0,-6):null]})]})]})})}function B(e){var t=e.myarts;return Object(M.jsxs)("div",{className:"myart-list__wrapper",children:[t.map((function(e,t){return Object(M.jsx)(H,{myart:e},t)})),Object(M.jsx)(L,{})]})}function G(e){var t=e.myWArt,n=U(),r=n.useMyarts,c=n.purchaseMyWArt,a=t.id,i=t.name,o=t.want_price,l=t.uri,s=t.description,u=t.seller_address,d=t.seller_name,b=r.some((function(e){return(null===e||void 0===e?void 0:e.id)===(null===t||void 0===t?void 0:t.id)})),f=function(){return Object(M.jsxs)("div",{onClick:function(){return c(t)},className:"btn btn-bordered btn-light",children:[Object(M.jsx)("i",{className:"ri-price-tag-3-fill btn-icon"})," ",parseInt(o)," FUSD"]})};return Object(M.jsxs)("div",{className:"myart-card__border",children:[Object(M.jsxs)("div",{className:"myart-card__wrapper ".concat(b&&"faded"),children:[Object(M.jsx)("img",{className:"myart-card__image img-large",src:l,alt:"Art"}),Object(M.jsx)("br",{}),Object(M.jsx)("h3",{className:"myart-cart__title",children:i}),Object(M.jsxs)("div",{className:"myart-card__info",children:["ID: # ",a]}),s&&Object(M.jsxs)("div",{className:"myart-card__info",children:["Description ",s]}),Object(M.jsxs)("div",{className:"myart-card__info",children:["Seller:",d&&Object(M.jsxs)("span",{children:[d," @ "]}),u]}),Object(M.jsxs)("p",{className:"myart-card__info",children:["ID: # ",a]})]}),Object(M.jsx)(f,{})]})}function Y(e){var t=e.saleItems;return Object(M.jsx)("div",{className:"myart-list__wrapper",children:t.map((function(e,t){return Object(M.jsx)(G,{myWArt:e},t)}))})}n(160);var q=[{name:"Home",path:"/",component:function(){var e=Object(s.f)();return Object(M.jsxs)(M.Fragment,{children:[Object(M.jsx)(N,{title:Object(M.jsxs)(M.Fragment,{children:[Object(M.jsx)("span",{className:"highlight",children:"My"}),"World"]}),subtitle:Object(M.jsxs)(M.Fragment,{children:["An NFT gallery of ",Object(M.jsx)("span",{className:"highlight",children:"arts and music"})," for autism community"]})}),Object(M.jsx)("img",{className:"header-image",alt:"Header",onClick:function(){return e.push("/packs")},src:"".concat("","/assets/PinWheel.png")})]})},nav:!0},{name:"Gallery",path:"/gallery",component:function(){var e=U().saleItems;return Object(M.jsxs)(M.Fragment,{children:[Object(M.jsx)(N,{title:Object(M.jsxs)(M.Fragment,{children:[Object(M.jsx)("span",{className:"highlight",children:"MyWorld "}),"Gallery"]}),subtitle:Object(M.jsxs)(M.Fragment,{children:["Browse ",Object(M.jsx)("span",{className:"highlight",children:"arts"})," in our gallery"]})}),Object(M.jsx)(Y,{saleItems:e})]})},nav:!0},{name:"Collection",path:"/collection",component:function(){var e=U(),t=e.collection,n=e.createCollection,r=e.deleteCollection,c=e.useMyarts;return Object(M.jsxs)(M.Fragment,{children:[Object(M.jsx)(N,{title:Object(M.jsxs)(M.Fragment,{children:["MyWorld ",Object(M.jsx)("span",{className:"highlight",children:"Collection"})]}),subtitle:Object(M.jsxs)(M.Fragment,{children:["Here are your ",Object(M.jsx)("span",{className:"highlight",children:"Arts"})," collection"]})}),t?Object(M.jsxs)(M.Fragment,{children:[Object(M.jsx)(B,{myarts:c}),Object(M.jsx)("div",{className:"btn btn-bg rounded",onClick:function(){return r()},children:"Delete Collection"})]}):Object(M.jsx)("div",{className:"btn btn-bg rounded",onClick:function(){return n()},children:"Enable Collection"})]})},nav:!0},{name:"Artists",path:"/artists",component:function(){return Object(M.jsx)(M.Fragment,{children:Object(M.jsx)(N,{title:Object(M.jsxs)(M.Fragment,{children:[Object(M.jsx)("span",{className:"highlight",children:"Artists"})," Profile"]}),subtitle:Object(M.jsxs)(M.Fragment,{children:["Our lens ",Object(M.jsx)("span",{className:"highlight",children:"through"})," life"]})})})},nav:!0}],z=q.filter((function(e){return e.nav}));n(165);function J(){var e=Object(r.useState)(!1),t=Object(l.a)(e,2),n=t[0],c=t[1],a=Object(s.f)(),i=function(e){var t=e.route;return Object(M.jsx)("div",{className:"navbar__item",children:Object(M.jsx)("div",{className:"btn",onClick:function(){return a.push(t.path)},children:t.name})})};return Object(M.jsxs)(M.Fragment,{children:[Object(M.jsx)("div",{className:"navbar",children:z.map((function(e){return Object(M.jsx)(i,{route:e},e.path)}))}),Object(M.jsx)("div",{className:"btn btn-bg navbar__mobile__trigger mobile_only",onClick:function(){return c((function(e){return!e}))},children:"Menu"}),n&&Object(M.jsx)("div",{className:"navbar__mobile",children:z.map((function(e){return Object(M.jsx)(i,{route:e},e.path)}))})]})}var Q=n(30);function X(e){var t=e.children;return Object(M.jsx)(Q.a,{children:Object(M.jsx)(w,{children:Object(M.jsx)(P,{children:Object(M.jsx)(I,{children:Object(M.jsx)("div",{className:"app",children:t})})})})})}function Z(){return Object(M.jsx)("div",{children:"Not found"})}function $(e){var t=e.routes.map((function(e){var t=e.path,n=e.component;return Object(M.jsx)(s.a,{path:t,component:n,exact:!0},t)}));return Object(M.jsxs)(s.c,{children:[t,Object(M.jsx)(s.a,{component:Z})]})}n(166);function ee(){var e=F(),t=e.user,n=e.logOut,r=U(),c=r.balance,a=r.createMyWVault;return Object(M.jsxs)("div",{className:"wallet__popup",children:[Object(M.jsxs)("div",{className:"wallet__item",children:["\ud83d\udc5b ",null===t||void 0===t?void 0:t.addr]}),c?Object(M.jsxs)("div",{className:"wallet__item",children:["\ud83d\udcb0 MyW: ",c.slice(0,-6)," ",Object(M.jsx)("a",{style:{color:"white"},href:"https://youtu.be/q8vcEGe95js",children:"(Get Tokens)"})]}):Object(M.jsx)("div",{className:"btn btn-small",onClick:function(){return a()},children:"\u26a0\ufe0f Enable MyW Token"}),Object(M.jsx)("div",{className:"btn btn-small",onClick:function(){return n()},children:"\ud83d\udc4b Logout"})]})}function te(){return Object(M.jsx)(M.Fragment,{children:Object(M.jsxs)(X,{children:[Object(M.jsx)(ee,{}),Object(M.jsx)(J,{}),Object(M.jsx)($,{routes:q})]})})}i.a.render(Object(M.jsx)(te,{}),document.getElementById("root"))},66:function(e,t,n){},67:function(e,t,n){},92:function(e,t){},94:function(e,t){}},[[167,1,2]]]);
//# sourceMappingURL=main.9966b71c.chunk.js.map